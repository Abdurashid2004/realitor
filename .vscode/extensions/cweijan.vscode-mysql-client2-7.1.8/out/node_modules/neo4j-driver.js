"use strict";var f=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports);var gt=f((YH,Qr)=>{function Pg(r){return r&&r.__esModule?r:{default:r}}Qr.exports=Pg,Qr.exports.__esModule=!0,Qr.exports.default=Qr.exports});var or=f((ZH,Xr)=>{function Cg(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}Xr.exports=Cg,Xr.exports.__esModule=!0,Xr.exports.default=Xr.exports});var So=f((KH,Fe)=>{function ps(r){return Fe.exports=ps=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fe.exports.__esModule=!0,Fe.exports.default=Fe.exports,ps(r)}Fe.exports=ps,Fe.exports.__esModule=!0,Fe.exports.default=Fe.exports});var sh=f((GH,Jr)=>{var uh=So().default;function Ig(r,t){if(uh(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t||"default");if(uh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}Jr.exports=Ig,Jr.exports.__esModule=!0,Jr.exports.default=Jr.exports});var ah=f((QH,$r)=>{var Rg=So().default,Ag=sh();function jg(r){var t=Ag(r,"string");return Rg(t)=="symbol"?t:t+""}$r.exports=jg,$r.exports.__esModule=!0,$r.exports.default=$r.exports});var ur=f((XH,en)=>{var qg=ah();function ch(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,qg(n.key),n)}}function Ng(r,t,e){return t&&ch(r.prototype,t),e&&ch(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}en.exports=Ng,en.exports.__esModule=!0,en.exports.default=en.exports});var fh=f((JH,Be)=>{function _s(r,t){return Be.exports=_s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Be.exports.__esModule=!0,Be.exports.default=Be.exports,_s(r,t)}Be.exports=_s,Be.exports.__esModule=!0,Be.exports.default=Be.exports});var lh=f(($H,tn)=>{var xg=fh();function Dg(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&xg(r,t)}tn.exports=Dg,tn.exports.__esModule=!0,tn.exports.default=tn.exports});var hh=f((e8,rn)=>{function Mg(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}rn.exports=Mg,rn.exports.__esModule=!0,rn.exports.default=rn.exports});var ph=f((t8,nn)=>{var kg=So().default,Ug=hh();function Lg(r,t){if(t&&(kg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ug(r)}nn.exports=Lg,nn.exports.__esModule=!0,nn.exports.default=nn.exports});var _h=f((r8,Ve)=>{function ds(r){return Ve.exports=ds=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ve.exports.__esModule=!0,Ve.exports.default=Ve.exports,ds(r)}Ve.exports=ds,Ve.exports.__esModule=!0,Ve.exports.default=Ve.exports});var ie=f(ne=>{"use strict";var Fg=ne&&ne.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(ne,"__esModule",{value:!0});ne.PROTOCOL_ERROR=ne.SESSION_EXPIRED=ne.SERVICE_UNAVAILABLE=ne.Neo4jError=ne.newError=void 0;var Bg="ServiceUnavailable";ne.SERVICE_UNAVAILABLE=Bg;var Vg="SessionExpired";ne.SESSION_EXPIRED=Vg;var Wg="ProtocolError";ne.PROTOCOL_ERROR=Wg;var Hg="N/A",dh=function(r){Fg(t,r);function t(e,n){var i=r.call(this,e)||this;return i.constructor=t,i.__proto__=t.prototype,i.code=n,i.name="Neo4jError",i}return t}(Error);ne.Neo4jError=dh;function zg(r,t){return new dh(r,t??Hg)}ne.newError=zg});var Et=f(le=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});le.toString=le.toNumber=le.inSafeRange=le.isInt=le.int=void 0;var on=ie(),vh=new Map,st=function(){function r(t,e){this.low=t||0,this.high=e||0}return r.prototype.inSafeRange=function(){return this.greaterThanOrEqual(r.MIN_SAFE_VALUE)&&this.lessThanOrEqual(r.MAX_SAFE_VALUE)},r.prototype.toInt=function(){return this.low},r.prototype.toNumber=function(){return this.high*St+(this.low>>>0)},r.prototype.toBigInt=function(){if(this.isZero())return BigInt(0);if(this.isPositive())return BigInt(this.high>>>0)*BigInt(St)+BigInt(this.low>>>0);var t=this.negate();return BigInt(-1)*(BigInt(t.high>>>0)*BigInt(St)+BigInt(t.low>>>0))},r.prototype.toNumberOrInfinity=function(){return this.lessThan(r.MIN_SAFE_VALUE)?Number.NEGATIVE_INFINITY:this.greaterThan(r.MAX_SAFE_VALUE)?Number.POSITIVE_INFINITY:this.toNumber()},r.prototype.toString=function(t){if(t=t||10,t<2||t>36)throw RangeError("radix out of range: "+t);if(this.isZero())return"0";var e;if(this.isNegative())if(this.equals(r.MIN_VALUE)){var n=r.fromNumber(t),i=this.div(n);return e=i.multiply(n).subtract(this),i.toString(t)+e.toInt().toString(t)}else return"-"+this.negate().toString(t);var o=r.fromNumber(Math.pow(t,6));e=this;for(var u="";;){var s=e.div(o),c=e.subtract(s.multiply(o)).toInt()>>>0,a=c.toString(t);if(e=s,e.isZero())return a+u;for(;a.length<6;)a="0"+a;u=""+a+u}},r.prototype.getHighBits=function(){return this.high},r.prototype.getLowBits=function(){return this.low},r.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(r.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var t=this.high!==0?this.high:this.low,e=31;e>0&&(t&1<<e)===0;e--);return this.high!==0?e+33:e+1},r.prototype.isZero=function(){return this.high===0&&this.low===0},r.prototype.isNegative=function(){return this.high<0},r.prototype.isPositive=function(){return this.high>=0},r.prototype.isOdd=function(){return(this.low&1)===1},r.prototype.isEven=function(){return(this.low&1)===0},r.prototype.equals=function(t){var e=r.fromValue(t);return this.high===e.high&&this.low===e.low},r.prototype.notEquals=function(t){return!this.equals(t)},r.prototype.lessThan=function(t){return this.compare(t)<0},r.prototype.lessThanOrEqual=function(t){return this.compare(t)<=0},r.prototype.greaterThan=function(t){return this.compare(t)>0},r.prototype.greaterThanOrEqual=function(t){return this.compare(t)>=0},r.prototype.compare=function(t){var e=r.fromValue(t);if(this.equals(e))return 0;var n=this.isNegative(),i=e.isNegative();return n&&!i?-1:!n&&i?1:this.subtract(e).isNegative()?-1:1},r.prototype.negate=function(){return this.equals(r.MIN_VALUE)?r.MIN_VALUE:this.not().add(r.ONE)},r.prototype.add=function(t){var e=r.fromValue(t),n=this.high>>>16,i=this.high&65535,o=this.low>>>16,u=this.low&65535,s=e.high>>>16,c=e.high&65535,a=e.low>>>16,l=e.low&65535,h=0,p=0,y=0,O=0;return O+=u+l,y+=O>>>16,O&=65535,y+=o+a,p+=y>>>16,y&=65535,p+=i+c,h+=p>>>16,p&=65535,h+=n+s,h&=65535,r.fromBits(y<<16|O,h<<16|p)},r.prototype.subtract=function(t){var e=r.fromValue(t);return this.add(e.negate())},r.prototype.multiply=function(t){if(this.isZero())return r.ZERO;var e=r.fromValue(t);if(e.isZero())return r.ZERO;if(this.equals(r.MIN_VALUE))return e.isOdd()?r.MIN_VALUE:r.ZERO;if(e.equals(r.MIN_VALUE))return this.isOdd()?r.MIN_VALUE:r.ZERO;if(this.isNegative())return e.isNegative()?this.negate().multiply(e.negate()):this.negate().multiply(e).negate();if(e.isNegative())return this.multiply(e.negate()).negate();if(this.lessThan(mh)&&e.lessThan(mh))return r.fromNumber(this.toNumber()*e.toNumber());var n=this.high>>>16,i=this.high&65535,o=this.low>>>16,u=this.low&65535,s=e.high>>>16,c=e.high&65535,a=e.low>>>16,l=e.low&65535,h=0,p=0,y=0,O=0;return O+=u*l,y+=O>>>16,O&=65535,y+=o*l,p+=y>>>16,y&=65535,y+=u*a,p+=y>>>16,y&=65535,p+=i*l,h+=p>>>16,p&=65535,p+=o*a,h+=p>>>16,p&=65535,p+=u*c,h+=p>>>16,p&=65535,h+=n*l+i*a+o*c+u*s,h&=65535,r.fromBits(y<<16|O,h<<16|p)},r.prototype.div=function(t){var e=r.fromValue(t);if(e.isZero())throw(0,on.newError)("division by zero");if(this.isZero())return r.ZERO;var n,i,o;if(this.equals(r.MIN_VALUE)){if(e.equals(r.ONE)||e.equals(r.NEG_ONE))return r.MIN_VALUE;if(e.equals(r.MIN_VALUE))return r.ONE;var u=this.shiftRight(1);return n=u.div(e).shiftLeft(1),n.equals(r.ZERO)?e.isNegative()?r.ONE:r.NEG_ONE:(i=this.subtract(e.multiply(n)),o=n.add(i.div(e)),o)}else if(e.equals(r.MIN_VALUE))return r.ZERO;if(this.isNegative())return e.isNegative()?this.negate().div(e.negate()):this.negate().div(e).negate();if(e.isNegative())return this.div(e.negate()).negate();for(o=r.ZERO,i=this;i.greaterThanOrEqual(e);){n=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(n)/Math.LN2),c=s<=48?1:Math.pow(2,s-48),a=r.fromNumber(n),l=a.multiply(e);l.isNegative()||l.greaterThan(i);)n-=c,a=r.fromNumber(n),l=a.multiply(e);a.isZero()&&(a=r.ONE),o=o.add(a),i=i.subtract(l)}return o},r.prototype.modulo=function(t){var e=r.fromValue(t);return this.subtract(this.div(e).multiply(e))},r.prototype.not=function(){return r.fromBits(~this.low,~this.high)},r.prototype.and=function(t){var e=r.fromValue(t);return r.fromBits(this.low&e.low,this.high&e.high)},r.prototype.or=function(t){var e=r.fromValue(t);return r.fromBits(this.low|e.low,this.high|e.high)},r.prototype.xor=function(t){var e=r.fromValue(t);return r.fromBits(this.low^e.low,this.high^e.high)},r.prototype.shiftLeft=function(t){var e=r.toNumber(t);return(e&=63)===0?r.ZERO:e<32?r.fromBits(this.low<<e,this.high<<e|this.low>>>32-e):r.fromBits(0,this.low<<e-32)},r.prototype.shiftRight=function(t){var e=r.toNumber(t);return(e&=63)===0?r.ZERO:t<32?r.fromBits(this.low>>>e|this.high<<32-e,this.high>>e):r.fromBits(this.high>>e-32,this.high>=0?0:-1)},r.isInteger=function(t){return(t&&t.__isInteger__)===!0},r.fromInt=function(t){var e,n;return t=t|0,t>=-128&&t<128&&(n=vh.get(t),n)?n:(e=new r(t,t<0?-1:0),t>=-128&&t<128&&vh.set(t,e),e)},r.fromBits=function(t,e){return new r(t,e)},r.fromNumber=function(t){return isNaN(t)||!isFinite(t)?r.ZERO:t<=-yh?r.MIN_VALUE:t+1>=yh?r.MAX_VALUE:t<0?r.fromNumber(-t).negate():new r(t%St|0,t/St|0)},r.fromString=function(t,e,n){var i=n===void 0?{}:n,o=i.strictStringValidation;if(t.length===0)throw(0,on.newError)("number format error: empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return r.ZERO;if(e=e||10,e<2||e>36)throw(0,on.newError)("radix out of range: "+e);var u;if((u=t.indexOf("-"))>0)throw(0,on.newError)('number format error: interior "-" character: '+t);if(u===0)return r.fromString(t.substring(1),e).negate();for(var s=r.fromNumber(Math.pow(e,8)),c=r.ZERO,a=0;a<t.length;a+=8){var l=Math.min(8,t.length-a),h=t.substring(a,a+l),p=parseInt(h,e);if(o===!0&&!Zg(h,p,e))throw(0,on.newError)('number format error: "'+h+'" is NaN in radix '+e+": "+t);if(l<8){var y=r.fromNumber(Math.pow(e,l));c=c.multiply(y).add(r.fromNumber(p))}else c=c.multiply(s),c=c.add(r.fromNumber(p))}return c},r.fromValue=function(t,e){return e===void 0&&(e={}),t instanceof r?t:typeof t=="number"?r.fromNumber(t):typeof t=="string"?r.fromString(t,void 0,e):typeof t=="bigint"?r.fromString(t.toString()):new r(t.low,t.high)},r.toNumber=function(t){switch(typeof t){case"number":return t;case"bigint":return Number(t);default:return r.fromValue(t).toNumber()}},r.toString=function(t,e){return r.fromValue(t).toString(e)},r.inSafeRange=function(t){return r.fromValue(t).inSafeRange()},r.ZERO=r.fromInt(0),r.ONE=r.fromInt(1),r.NEG_ONE=r.fromInt(-1),r.MAX_VALUE=r.fromBits(-1,2147483647),r.MIN_VALUE=r.fromBits(0,-2147483648),r.MIN_SAFE_VALUE=r.fromBits(1,-2097152),r.MAX_SAFE_VALUE=r.fromBits(-1,2097151),r.__isInteger__=!0,r}();function Yg(r,t,e){var n=r.toString(t),i=Math.max(e-n.length,0),o="0".repeat(i);return""+o+n}function Zg(r,t,e){return!Number.isNaN(r)&&!Number.isNaN(t)&&Yg(t,e,r.length)===r.toLowerCase()}Object.defineProperty(st.prototype,"__isInteger__",{value:!0,enumerable:!1,configurable:!1});var bh=1<<16,Kg=1<<24,St=bh*bh,Gg=St*St,yh=Gg/2,mh=st.fromInt(Kg),Qg=st.fromValue;le.int=Qg;var Xg=st.isInteger;le.isInt=Xg;var Jg=st.inSafeRange;le.inSafeRange=Jg;var $g=st.toNumber;le.toNumber=$g;var eS=st.toString;le.toString=eS;le.default=st});var vs=f(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});at.getBrokenObjectReason=at.isBrokenObject=at.createBrokenObject=void 0;var Oh="__isBrokenObject__",gh="__reason__";function tS(r,t){t===void 0&&(t={});var e=function(){throw r};return new Proxy(t,{get:function(n,i){if(i===Oh)return!0;if(i===gh)return r;if(i==="toJSON")return;e()},set:e,apply:e,construct:e,defineProperty:e,deleteProperty:e,getOwnPropertyDescriptor:e,getPrototypeOf:e,has:e,isExtensible:e,ownKeys:e,preventExtensions:e,setPrototypeOf:e})}at.createBrokenObject=tS;function rS(r){return r!==null&&typeof r=="object"&&r[Oh]===!0}at.isBrokenObject=rS;function nS(r){return r[gh]}at.getBrokenObjectReason=nS});var wo=f(Eo=>{"use strict";Object.defineProperty(Eo,"__esModule",{value:!0});Eo.stringify=void 0;var Sh=vs();function iS(r){return JSON.stringify(r,function(t,e){return(0,Sh.isBrokenObject)(e)?{__isBrokenObject__:!0,__reason__:(0,Sh.getBrokenObjectReason)(e)}:typeof e=="bigint"?e+"n":e})}Eo.stringify=iS});var he=f(N=>{"use strict";Object.defineProperty(N,"__esModule",{value:!0});N.ENCRYPTION_OFF=N.ENCRYPTION_ON=N.validateQueryAndParameters=N.assertValidDate=N.assertNumberOrInteger=N.assertNumber=N.assertString=N.assertObject=N.isString=N.isObject=N.isEmptyObjectOrNull=void 0;var oS=Et(),sr=wo(),uS="ENCRYPTION_ON";N.ENCRYPTION_ON=uS;var sS="ENCRYPTION_OFF";N.ENCRYPTION_OFF=sS;function aS(r){if(r===null)return!0;if(!To(r))return!1;for(var t in r)if(Object.prototype.hasOwnProperty.bind(r,t))return!1;return!0}N.isEmptyObjectOrNull=aS;function To(r){return typeof r=="object"&&!Array.isArray(r)&&r!==null}N.isObject=To;function cS(r,t,e){var n="",i=t||{},o=e?.skipAsserts||!1;return typeof r=="string"?n=r:r instanceof String?n=r.toString():typeof r=="object"&&r.text&&(n=r.text,i=r.parameters||{}),o||(_S(n),dS(i)),{validatedQuery:n,params:i}}N.validateQueryAndParameters=cS;function fS(r,t){if(!To(r))throw new TypeError(t+" expected to be an object but was: "+(0,sr.stringify)(r));return r}N.assertObject=fS;function Eh(r,t){if(!wh(r))throw new TypeError(t+" expected to be string but was: "+(0,sr.stringify)(r));return r}N.assertString=Eh;function lS(r,t){if(typeof r!="number")throw new TypeError(t+" expected to be a number but was: "+(0,sr.stringify)(r));return r}N.assertNumber=lS;function hS(r,t){if(typeof r!="number"&&typeof r!="bigint"&&!(0,oS.isInt)(r))throw new TypeError(t+" expected to be either a number or an Integer object but was: "+(0,sr.stringify)(r));return r}N.assertNumberOrInteger=hS;function pS(r,t){if(Object.prototype.toString.call(r)!=="[object Date]")throw new TypeError(t+" expected to be a standard JavaScript Date but was: "+(0,sr.stringify)(r));if(Number.isNaN(r.getTime()))throw new TypeError(t+" expected to be valid JavaScript Date but its time was NaN: "+(0,sr.stringify)(r));return r}N.assertValidDate=pS;function _S(r){if(Eh(r,"Cypher query"),r.trim().length===0)throw new TypeError("Cypher query is expected to be a non-empty string.")}function dS(r){if(!To(r)){var t=r.constructor?" "+r.constructor.name:"";throw new TypeError("Query parameters are expected to either be undefined/null or an object, given:"+t+" "+r)}}function wh(r){return Object.prototype.toString.call(r)==="[object String]"}N.isString=wh});var ms=f(_=>{"use strict";var vS=_&&_.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),bS=_&&_.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),yS=_&&_.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&vS(t,r,e);return bS(t,r),t};Object.defineProperty(_,"__esModule",{value:!0});_.floorMod=_.floorDiv=_.assertValidZoneId=_.assertValidNanosecond=_.assertValidSecond=_.assertValidMinute=_.assertValidHour=_.assertValidDay=_.assertValidMonth=_.assertValidYear=_.timeZoneOffsetInSeconds=_.totalNanoseconds=_.newDate=_.toStandardDate=_.isoStringToStandardDate=_.dateToIsoString=_.timeZoneOffsetToIsoString=_.timeToIsoString=_.durationToIsoString=_.dateToEpochDay=_.localDateTimeToEpochSecond=_.localTimeToNanoOfDay=_.normalizeNanosecondsForDuration=_.normalizeSecondsForDuration=_.SECONDS_PER_DAY=_.DAYS_PER_400_YEAR_CYCLE=_.DAYS_0000_TO_1970=_.NANOS_PER_HOUR=_.NANOS_PER_MINUTE=_.NANOS_PER_MILLISECOND=_.NANOS_PER_SECOND=_.SECONDS_PER_HOUR=_.SECONDS_PER_MINUTE=_.MINUTES_PER_HOUR=_.NANOSECOND_OF_SECOND_RANGE=_.SECOND_OF_MINUTE_RANGE=_.MINUTE_OF_HOUR_RANGE=_.HOUR_OF_DAY_RANGE=_.DAY_OF_MONTH_RANGE=_.MONTH_OF_YEAR_RANGE=_.YEAR_RANGE=void 0;var A=yS(Et()),Th=ie(),mS=he(),wt=function(){function r(t,e){this._minNumber=t,this._maxNumber=e,this._minInteger=(0,A.int)(t),this._maxInteger=(0,A.int)(e)}return r.prototype.contains=function(t){if((0,A.isInt)(t)&&t instanceof A.default)return t.greaterThanOrEqual(this._minInteger)&&t.lessThanOrEqual(this._maxInteger);if(typeof t=="bigint"){var e=(0,A.int)(t);return e.greaterThanOrEqual(this._minInteger)&&e.lessThanOrEqual(this._maxInteger)}else return t>=this._minNumber&&t<=this._maxNumber},r.prototype.toString=function(){return"["+this._minNumber+", "+this._maxNumber+"]"},r}();_.YEAR_RANGE=new wt(-999999999,999999999);_.MONTH_OF_YEAR_RANGE=new wt(1,12);_.DAY_OF_MONTH_RANGE=new wt(1,31);_.HOUR_OF_DAY_RANGE=new wt(0,23);_.MINUTE_OF_HOUR_RANGE=new wt(0,59);_.SECOND_OF_MINUTE_RANGE=new wt(0,59);_.NANOSECOND_OF_SECOND_RANGE=new wt(0,999999999);_.MINUTES_PER_HOUR=60;_.SECONDS_PER_MINUTE=60;_.SECONDS_PER_HOUR=_.SECONDS_PER_MINUTE*_.MINUTES_PER_HOUR;_.NANOS_PER_SECOND=1e9;_.NANOS_PER_MILLISECOND=1e6;_.NANOS_PER_MINUTE=_.NANOS_PER_SECOND*_.SECONDS_PER_MINUTE;_.NANOS_PER_HOUR=_.NANOS_PER_MINUTE*_.MINUTES_PER_HOUR;_.DAYS_0000_TO_1970=719528;_.DAYS_PER_400_YEAR_CYCLE=146097;_.SECONDS_PER_DAY=86400;function OS(r,t){return(0,A.int)(r).add(ys(t,_.NANOS_PER_SECOND))}_.normalizeSecondsForDuration=OS;function gS(r){return Ch(r,_.NANOS_PER_SECOND)}_.normalizeNanosecondsForDuration=gS;function SS(r,t,e,n){r=(0,A.int)(r),t=(0,A.int)(t),e=(0,A.int)(e),n=(0,A.int)(n);var i=r.multiply(_.NANOS_PER_HOUR);return i=i.add(t.multiply(_.NANOS_PER_MINUTE)),i=i.add(e.multiply(_.NANOS_PER_SECOND)),i.add(n)}_.localTimeToNanoOfDay=SS;function ES(r,t,e,n,i,o,u){var s=Ph(r,t,e),c=BS(n,i,o);return s.multiply(_.SECONDS_PER_DAY).add(c)}_.localDateTimeToEpochSecond=ES;function Ph(r,t,e){r=(0,A.int)(r),t=(0,A.int)(t),e=(0,A.int)(e);var n=r.multiply(365);return r.greaterThanOrEqual(0)?n=n.add(r.add(3).div(4).subtract(r.add(99).div(100)).add(r.add(399).div(400))):n=n.subtract(r.div(-4).subtract(r.div(-100)).add(r.div(-400))),n=n.add(t.multiply(367).subtract(362).div(12)),n=n.add(e.subtract(1)),t.greaterThan(2)&&(n=n.subtract(1),VS(r)||(n=n.subtract(1))),n.subtract(_.DAYS_0000_TO_1970)}_.dateToEpochDay=Ph;function wS(r,t,e,n){var i=pe(r),o=pe(t),u=WS(e,n);return"P"+i+"M"+o+"DT"+u+"S"}_.durationToIsoString=wS;function TS(r,t,e,n){var i=pe(r,2),o=pe(t,2),u=pe(e,2),s=bs(n);return i+":"+o+":"+u+s}_.timeToIsoString=TS;function PS(r){if(r=(0,A.int)(r),r.equals(0))return"Z";var t=r.isNegative();t&&(r=r.multiply(-1));var e=t?"-":"+",n=pe(r.div(_.SECONDS_PER_HOUR),2),i=pe(r.div(_.SECONDS_PER_MINUTE).modulo(_.MINUTES_PER_HOUR),2),o=r.modulo(_.SECONDS_PER_MINUTE),u=o.equals(0)?null:pe(o,2);return u?""+e+n+":"+i+":"+u:""+e+n+":"+i}_.timeZoneOffsetToIsoString=PS;function CS(r,t,e){var n=HS(r),i=pe(t,2),o=pe(e,2);return n+"-"+i+"-"+o}_.dateToIsoString=CS;function IS(r){return new Date(r)}_.isoStringToStandardDate=IS;function RS(r){return new Date(r)}_.toStandardDate=RS;function AS(r){return new Date(r)}_.newDate=AS;function jS(r,t){t=t||0;var e=r.getMilliseconds()*_.NANOS_PER_MILLISECOND;return zS(t,e)}_.totalNanoseconds=jS;function qS(r){var t=r.getSeconds()>=r.getUTCSeconds()?r.getSeconds()-r.getUTCSeconds():r.getSeconds()-r.getUTCSeconds()+60,e=r.getTimezoneOffset();return e===0?0+t:-1*e*_.SECONDS_PER_MINUTE+t}_.timeZoneOffsetInSeconds=qS;function NS(r){return Tt(r,_.YEAR_RANGE,"Year")}_.assertValidYear=NS;function xS(r){return Tt(r,_.MONTH_OF_YEAR_RANGE,"Month")}_.assertValidMonth=xS;function DS(r){return Tt(r,_.DAY_OF_MONTH_RANGE,"Day")}_.assertValidDay=DS;function MS(r){return Tt(r,_.HOUR_OF_DAY_RANGE,"Hour")}_.assertValidHour=MS;function kS(r){return Tt(r,_.MINUTE_OF_HOUR_RANGE,"Minute")}_.assertValidMinute=kS;function US(r){return Tt(r,_.SECOND_OF_MINUTE_RANGE,"Second")}_.assertValidSecond=US;function LS(r){return Tt(r,_.NANOSECOND_OF_SECOND_RANGE,"Nanosecond")}_.assertValidNanosecond=LS;function FS(r,t){try{Intl.DateTimeFormat(void 0,{timeZone:t})}catch{throw(0,Th.newError)(r+' is expected to be a valid ZoneId but was: "'+t+'"')}}_.assertValidZoneId=FS;function Tt(r,t,e){if((0,mS.assertNumberOrInteger)(r,e),!t.contains(r))throw(0,Th.newError)(e+" is expected to be in range "+t+" but was: "+r);return r}function BS(r,t,e){r=(0,A.int)(r),t=(0,A.int)(t),e=(0,A.int)(e);var n=r.multiply(_.SECONDS_PER_HOUR);return n=n.add(t.multiply(_.SECONDS_PER_MINUTE)),n.add(e)}function VS(r){return r=(0,A.int)(r),r.modulo(4).equals(0)?r.modulo(100).equals(0)?!!r.modulo(400).equals(0):!0:!1}function ys(r,t){r=(0,A.int)(r),t=(0,A.int)(t);var e=r.div(t);return r.isPositive()!==t.isPositive()&&e.multiply(t).notEquals(r)&&(e=e.subtract(1)),e}_.floorDiv=ys;function Ch(r,t){return r=(0,A.int)(r),t=(0,A.int)(t),r.subtract(ys(r,t).multiply(t))}_.floorMod=Ch;function WS(r,t){r=(0,A.int)(r),t=(0,A.int)(t);var e,n,i=r.isNegative(),o=t.greaterThan(0);return i&&o?r.equals(-1)?e="-0":e=r.add(1).toString():e=r.toString(),o&&(i?n=bs(t.negate().add(2*_.NANOS_PER_SECOND).modulo(_.NANOS_PER_SECOND)):n=bs(t.add(_.NANOS_PER_SECOND).modulo(_.NANOS_PER_SECOND))),n?e+n:e}function bs(r){return r=(0,A.int)(r),r.equals(0)?"":"."+pe(r,9)}function HS(r){var t=(0,A.int)(r);return t.isNegative()||t.greaterThan(9999)?pe(t,6,{usePositiveSign:!0}):pe(t,4)}function pe(r,t,e){r=(0,A.int)(r);var n=r.isNegative();n&&(r=r.negate());var i=r.toString();if(t)for(;i.length<t;)i="0"+i;return n?"-"+i:e?.usePositiveSign===!0?"+"+i:i}function zS(r,t){return r instanceof A.default?r.add(t):typeof r=="bigint"?r+BigInt(t):r+t}});var Vh=f(C=>{"use strict";var YS=C&&C.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),ZS=C&&C.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),Ih=C&&C.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&YS(t,r,e);return ZS(t,r),t},KS=C&&C.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,o=[],u;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){u={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(u)throw u.error}}return o};Object.defineProperty(C,"__esModule",{value:!0});C.isDateTime=C.DateTime=C.isLocalDateTime=C.LocalDateTime=C.isDate=C.Date=C.isTime=C.Time=C.isLocalTime=C.LocalTime=C.isDuration=C.Duration=void 0;var E=Ih(ms()),We=he(),GS=ie(),un=Ih(Et()),ar={value:!0,enumerable:!1,configurable:!1,writable:!1},Rh="__isDuration__",Ah="__isLocalTime__",jh="__isTime__",qh="__isDate__",Nh="__isLocalDateTime__",xh="__isDateTime__",Dh=function(){function r(t,e,n,i){this.months=(0,We.assertNumberOrInteger)(t,"Months"),this.days=(0,We.assertNumberOrInteger)(e,"Days"),(0,We.assertNumberOrInteger)(n,"Seconds"),(0,We.assertNumberOrInteger)(i,"Nanoseconds"),this.seconds=E.normalizeSecondsForDuration(n,i),this.nanoseconds=E.normalizeNanosecondsForDuration(i),Object.freeze(this)}return r.prototype.toString=function(){return E.durationToIsoString(this.months,this.days,this.seconds,this.nanoseconds)},r}();C.Duration=Dh;Object.defineProperty(Dh.prototype,Rh,ar);function QS(r){return cr(r,Rh)}C.isDuration=QS;var Mh=function(){function r(t,e,n,i){this.hour=E.assertValidHour(t),this.minute=E.assertValidMinute(e),this.second=E.assertValidSecond(n),this.nanosecond=E.assertValidNanosecond(i),Object.freeze(this)}return r.fromStandardDate=function(t,e){sn(t,e);var n=E.totalNanoseconds(t,e);return new r(t.getHours(),t.getMinutes(),t.getSeconds(),n instanceof un.default?n.toInt():typeof n=="bigint"?(0,un.int)(n).toInt():n)},r.prototype.toString=function(){return E.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)},r}();C.LocalTime=Mh;Object.defineProperty(Mh.prototype,Ah,ar);function XS(r){return cr(r,Ah)}C.isLocalTime=XS;var kh=function(){function r(t,e,n,i,o){this.hour=E.assertValidHour(t),this.minute=E.assertValidMinute(e),this.second=E.assertValidSecond(n),this.nanosecond=E.assertValidNanosecond(i),this.timeZoneOffsetSeconds=(0,We.assertNumberOrInteger)(o,"Time zone offset in seconds"),Object.freeze(this)}return r.fromStandardDate=function(t,e){return sn(t,e),new r(t.getHours(),t.getMinutes(),t.getSeconds(),(0,un.toNumber)(E.totalNanoseconds(t,e)),E.timeZoneOffsetInSeconds(t))},r.prototype.toString=function(){return E.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)+E.timeZoneOffsetToIsoString(this.timeZoneOffsetSeconds)},r}();C.Time=kh;Object.defineProperty(kh.prototype,jh,ar);function JS(r){return cr(r,jh)}C.isTime=JS;var Uh=function(){function r(t,e,n){this.year=E.assertValidYear(t),this.month=E.assertValidMonth(e),this.day=E.assertValidDay(n),Object.freeze(this)}return r.fromStandardDate=function(t){return sn(t),new r(t.getFullYear(),t.getMonth()+1,t.getDate())},r.prototype.toString=function(){return E.dateToIsoString(this.year,this.month,this.day)},r}();C.Date=Uh;Object.defineProperty(Uh.prototype,qh,ar);function $S(r){return cr(r,qh)}C.isDate=$S;var Lh=function(){function r(t,e,n,i,o,u,s){this.year=E.assertValidYear(t),this.month=E.assertValidMonth(e),this.day=E.assertValidDay(n),this.hour=E.assertValidHour(i),this.minute=E.assertValidMinute(o),this.second=E.assertValidSecond(u),this.nanosecond=E.assertValidNanosecond(s),Object.freeze(this)}return r.fromStandardDate=function(t,e){return sn(t,e),new r(t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),(0,un.toNumber)(E.totalNanoseconds(t,e)))},r.prototype.toString=function(){return Bh(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)},r}();C.LocalDateTime=Lh;Object.defineProperty(Lh.prototype,Nh,ar);function eE(r){return cr(r,Nh)}C.isLocalDateTime=eE;var Fh=function(){function r(t,e,n,i,o,u,s,c,a){this.year=E.assertValidYear(t),this.month=E.assertValidMonth(e),this.day=E.assertValidDay(n),this.hour=E.assertValidHour(i),this.minute=E.assertValidMinute(o),this.second=E.assertValidSecond(u),this.nanosecond=E.assertValidNanosecond(s);var l=KS(rE(c,a),2),h=l[0],p=l[1];this.timeZoneOffsetSeconds=h,this.timeZoneId=p||void 0,Object.freeze(this)}return r.fromStandardDate=function(t,e){return sn(t,e),new r(t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),(0,un.toNumber)(E.totalNanoseconds(t,e)),E.timeZoneOffsetInSeconds(t),null)},r.prototype.toString=function(){var t=Bh(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond),e=this.timeZoneId?"["+this.timeZoneId+"]":E.timeZoneOffsetToIsoString(this.timeZoneOffsetSeconds||0);return t+e},r}();C.DateTime=Fh;Object.defineProperty(Fh.prototype,xh,ar);function tE(r){return cr(r,xh)}C.isDateTime=tE;function cr(r,t){return(r&&r[t])===!0}function Bh(r,t,e,n,i,o,u){return E.dateToIsoString(r,t,e)+"T"+E.timeToIsoString(n,i,o,u)}function rE(r,t){var e=r||r===0,n=t&&t!=="";if(!e&&!n)throw(0,GS.newError)("Unable to create DateTime without either time zone offset or id. Please specify either of them. Given offset: "+r+" and id: "+t);var i=[void 0,void 0];return e&&((0,We.assertNumberOrInteger)(r,"Time zone offset in seconds"),i[0]=r),n&&((0,We.assertString)(t,"Time zone ID"),E.assertValidZoneId("Time zone ID",t),i[1]=t),i}function sn(r,t){(0,We.assertValidDate)(r,"Standard date"),t!=null&&(0,We.assertNumberOrInteger)(t,"Nanosecond")}});var Jh=f(F=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});F.isPathSegment=F.PathSegment=F.isPath=F.Path=F.isUnboundRelationship=F.UnboundRelationship=F.isRelationship=F.Relationship=F.isNode=F.Node=void 0;var Os=wo(),an={value:!0,enumerable:!1,configurable:!1,writable:!1},Wh="__isNode__",Hh="__isRelationship__",zh="__isUnboundRelationship__",Yh="__isPath__",Zh="__isPathSegment__";function cn(r,t){return(r&&r[t])===!0}var Kh=function(){function r(t,e,n){this.identity=t,this.labels=e,this.properties=n}return r.prototype.toString=function(){for(var t="("+this.identity,e=0;e<this.labels.length;e++)t+=":"+this.labels[e];var n=Object.keys(this.properties);if(n.length>0){t+=" {";for(var e=0;e<n.length;e++)e>0&&(t+=","),t+=n[e]+":"+(0,Os.stringify)(this.properties[n[e]]);t+="}"}return t+=")",t},r}();F.Node=Kh;Object.defineProperty(Kh.prototype,Wh,an);function nE(r){return cn(r,Wh)}F.isNode=nE;var gs=function(){function r(t,e,n,i,o){this.identity=t,this.start=e,this.end=n,this.type=i,this.properties=o}return r.prototype.toString=function(){var t="("+this.start+")-[:"+this.type,e=Object.keys(this.properties);if(e.length>0){t+=" {";for(var n=0;n<e.length;n++)n>0&&(t+=","),t+=e[n]+":"+(0,Os.stringify)(this.properties[e[n]]);t+="}"}return t+="]->("+this.end+")",t},r}();F.Relationship=gs;Object.defineProperty(gs.prototype,Hh,an);function iE(r){return cn(r,Hh)}F.isRelationship=iE;var Gh=function(){function r(t,e,n){this.identity=t,this.type=e,this.properties=n}return r.prototype.bind=function(t,e){return new gs(this.identity,t,e,this.type,this.properties)},r.prototype.toString=function(){var t="-[:"+this.type,e=Object.keys(this.properties);if(e.length>0){t+=" {";for(var n=0;n<e.length;n++)n>0&&(t+=","),t+=e[n]+":"+(0,Os.stringify)(this.properties[e[n]]);t+="}"}return t+="]->",t},r}();F.UnboundRelationship=Gh;Object.defineProperty(Gh.prototype,zh,an);function oE(r){return cn(r,zh)}F.isUnboundRelationship=oE;var Qh=function(){function r(t,e,n){this.start=t,this.relationship=e,this.end=n}return r}();F.PathSegment=Qh;Object.defineProperty(Qh.prototype,Zh,an);function uE(r){return cn(r,Zh)}F.isPathSegment=uE;var Xh=function(){function r(t,e,n){this.start=t,this.end=e,this.segments=n,this.length=n.length}return r}();F.Path=Xh;Object.defineProperty(Xh.prototype,Yh,an);function sE(r){return cn(r,Yh)}F.isPath=sE});var ep=f(He=>{"use strict";var Ss=He&&He.__generator||function(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function s(a){return function(l){return c([a,l])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(o=a[0]&2?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[a[0]&2,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,i=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){e.label=a[1];break}if(a[0]===6&&e.label<o[1]){e.label=o[1],o=a;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(a);break}o[2]&&e.ops.pop(),e.trys.pop();continue}a=t.call(r,e)}catch(l){a=[6,l],i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},Es=He&&He.__values||function(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],n=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ws=He&&He.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,o=[],u;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){u={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(u)throw u.error}}return o};Object.defineProperty(He,"__esModule",{value:!0});var $h=ie();function aE(r){var t={};return r.forEach(function(e,n){t[e]=n}),t}var cE=function(){function r(t,e,n){this.keys=t,this.length=t.length,this._fields=e,this._fieldLookup=n||aE(t)}return r.prototype.forEach=function(t){var e,n;try{for(var i=Es(this.entries()),o=i.next();!o.done;o=i.next()){var u=ws(o.value,2),s=u[0],c=u[1];t(c,s,this)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},r.prototype.map=function(t){var e,n,i=[];try{for(var o=Es(this.entries()),u=o.next();!u.done;u=o.next()){var s=ws(u.value,2),c=s[0],a=s[1];i.push(t(a,c,this))}}catch(l){e={error:l}}finally{try{u&&!u.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return i},r.prototype.entries=function(){var t;return Ss(this,function(e){switch(e.label){case 0:t=0,e.label=1;case 1:return t<this.keys.length?[4,[this.keys[t],this._fields[t]]]:[3,4];case 2:e.sent(),e.label=3;case 3:return t++,[3,1];case 4:return[2]}})},r.prototype.values=function(){var t;return Ss(this,function(e){switch(e.label){case 0:t=0,e.label=1;case 1:return t<this.keys.length?[4,this._fields[t]]:[3,4];case 2:e.sent(),e.label=3;case 3:return t++,[3,1];case 4:return[2]}})},r.prototype[Symbol.iterator]=function(){var t;return Ss(this,function(e){switch(e.label){case 0:t=0,e.label=1;case 1:return t<this.keys.length?[4,this._fields[t]]:[3,4];case 2:e.sent(),e.label=3;case 3:return t++,[3,1];case 4:return[2]}})},r.prototype.toObject=function(){var t,e,n={};try{for(var i=Es(this.entries()),o=i.next();!o.done;o=i.next()){var u=ws(o.value,2),s=u[0],c=u[1];n[s]=c}}catch(a){t={error:a}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}return n},r.prototype.get=function(t){var e;if(typeof t!="number"){if(e=this._fieldLookup[t],e===void 0)throw(0,$h.newError)("This record has no field with key '"+t+"', available key are: ["+this.keys+"].")}else e=t;if(e>this._fields.length-1||e<0)throw(0,$h.newError)("This record has no field with index '"+e+"'. Remember that indexes start at `0`, and make sure your query returns records in the shape you meant it to.");return this._fields[e]},r.prototype.has=function(t){return typeof t=="number"?t>=0&&t<this._fields.length:this._fieldLookup[t]!==void 0},r}();He.default=cE});var np=f(fr=>{"use strict";Object.defineProperty(fr,"__esModule",{value:!0});fr.isPoint=fr.Point=void 0;var Po=he(),tp="__isPoint__",rp=function(){function r(t,e,n,i){this.srid=(0,Po.assertNumberOrInteger)(t,"SRID"),this.x=(0,Po.assertNumber)(e,"X coordinate"),this.y=(0,Po.assertNumber)(n,"Y coordinate"),this.z=i==null?i:(0,Po.assertNumber)(i,"Z coordinate"),Object.freeze(this)}return r.prototype.toString=function(){return this.z||this.z===0?"Point{srid="+Pt(this.srid)+", x="+Pt(this.x)+", y="+Pt(this.y)+", z="+Pt(this.z)+"}":"Point{srid="+Pt(this.srid)+", x="+Pt(this.x)+", y="+Pt(this.y)+"}"},r}();fr.Point=rp;function Pt(r){return Number.isInteger(r)?r+".0":r.toString()}Object.defineProperty(rp.prototype,tp,{value:!0,enumerable:!1,configurable:!1,writable:!1});function fE(r){return(r&&r[tp])===!0}fr.isPoint=fE});var Cs=f(M=>{"use strict";var lE=M&&M.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),hE=M&&M.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),pE=M&&M.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&lE(t,r,e);return hE(t,r),t};Object.defineProperty(M,"__esModule",{value:!0});M.Stats=M.QueryStatistics=M.ProfiledPlan=M.Plan=M.Notification=M.ServerInfo=M.queryType=void 0;var ip=pE(Et()),_E=function(){function r(t,e,n,i){this.query={text:t,parameters:e},this.queryType=n.type,this.counters=new op(n.stats||{}),this.updateStatistics=this.counters,this.plan=n.plan||n.profile?new Ts(n.plan||n.profile):!1,this.profile=n.profile?new Ps(n.profile):!1,this.notifications=this._buildNotifications(n.notifications),this.server=new sp(n.server,i),this.resultConsumedAfter=n.result_consumed_after,this.resultAvailableAfter=n.result_available_after,this.database={name:n.db||null}}return r.prototype._buildNotifications=function(t){return t?t.map(function(e){return new up(e)}):[]},r.prototype.hasPlan=function(){return this.plan instanceof Ts},r.prototype.hasProfile=function(){return this.profile instanceof Ps},r}(),Ts=function(){function r(t){this.operatorType=t.operatorType,this.identifiers=t.identifiers,this.arguments=t.args,this.children=t.children?t.children.map(function(e){return new r(e)}):[]}return r}();M.Plan=Ts;var Ps=function(){function r(t){this.operatorType=t.operatorType,this.identifiers=t.identifiers,this.arguments=t.args,this.dbHits=lr("dbHits",t),this.rows=lr("rows",t),this.pageCacheMisses=lr("pageCacheMisses",t),this.pageCacheHits=lr("pageCacheHits",t),this.pageCacheHitRatio=lr("pageCacheHitRatio",t),this.time=lr("time",t),this.children=t.children?t.children.map(function(e){return new r(e)}):[]}return r.prototype.hasPageCacheStats=function(){return this.pageCacheMisses>0||this.pageCacheHits>0||this.pageCacheHitRatio>0},r}();M.ProfiledPlan=Ps;var dE=function(){function r(){this.nodesCreated=0,this.nodesDeleted=0,this.relationshipsCreated=0,this.relationshipsDeleted=0,this.propertiesSet=0,this.labelsAdded=0,this.labelsRemoved=0,this.indexesAdded=0,this.indexesRemoved=0,this.constraintsAdded=0,this.constraintsRemoved=0}return r}();M.Stats=dE;var op=function(){function r(t){var e=this;this._stats={nodesCreated:0,nodesDeleted:0,relationshipsCreated:0,relationshipsDeleted:0,propertiesSet:0,labelsAdded:0,labelsRemoved:0,indexesAdded:0,indexesRemoved:0,constraintsAdded:0,constraintsRemoved:0},this._systemUpdates=0,Object.keys(t).forEach(function(n){var i=n.replace(/(-\w)/g,function(o){return o[1].toUpperCase()});i in e._stats?e._stats[i]=hr(t[n]):i==="systemUpdates"?e._systemUpdates=hr(t[n]):i==="containsSystemUpdates"?e._containsSystemUpdates=t[n]:i==="containsUpdates"&&(e._containsUpdates=t[n])}),this._stats=Object.freeze(this._stats)}return r.prototype.containsUpdates=function(){var t=this;return this._containsUpdates!==void 0?this._containsUpdates:Object.keys(this._stats).reduce(function(e,n){return e+t._stats[n]},0)>0},r.prototype.updates=function(){return this._stats},r.prototype.containsSystemUpdates=function(){return this._containsSystemUpdates!==void 0?this._containsSystemUpdates:this._systemUpdates>0},r.prototype.systemUpdates=function(){return this._systemUpdates},r}();M.QueryStatistics=op;var up=function(){function r(t){this.code=t.code,this.title=t.title,this.description=t.description,this.severity=t.severity,this.position=r._constructPosition(t.position)}return r._constructPosition=function(t){return t?{offset:hr(t.offset),line:hr(t.line),column:hr(t.column)}:{}},r}();M.Notification=up;var sp=function(){function r(t,e){t&&(this.address=t.address,this.version=t.version,this.agent=t.version),this.protocolVersion=e}return r}();M.ServerInfo=sp;function hr(r){return r instanceof ip.default?r.toInt():typeof r=="bigint"?(0,ip.int)(r).toInt():r}function lr(r,t,e){if(e===void 0&&(e=0),r in t){var n=t[r];return hr(n)}else return e}var vE={READ_ONLY:"r",READ_WRITE:"rw",WRITE_ONLY:"w",SCHEMA_WRITE:"s"};M.queryType=vE;M.default=_E});var Co=f(pr=>{"use strict";Object.defineProperty(pr,"__esModule",{value:!0});pr.FailedObserver=pr.CompletedObserver=void 0;var bE=function(){function r(){}return r.prototype.subscribe=function(t){fn(t,t.onKeys,[]),fn(t,t.onCompleted,{})},r.prototype.cancel=function(){},r.prototype.prepareToHandleSingleResponse=function(){},r.prototype.markCompleted=function(){},r.prototype.onError=function(t){throw Error("CompletedObserver not supposed to call onError")},r}();pr.CompletedObserver=bE;var yE=function(){function r(t){var e=t.error,n=t.onError;this._error=e,this._beforeError=n,this._observers=[],this.onError(e)}return r.prototype.subscribe=function(t){fn(t,t.onError,this._error),this._observers.push(t)},r.prototype.onError=function(t){var e=this;Promise.resolve(fn(this,this._beforeError,t)).then(function(){return e._observers.forEach(function(n){return fn(n,n.onError,t)})})},r.prototype.cancel=function(){},r.prototype.prepareToHandleSingleResponse=function(){},r.prototype.markCompleted=function(){},r}();pr.FailedObserver=yE;function fn(r,t,e){t&&t.bind(r)(e)}});var _r=f(xe=>{"use strict";var mE=xe&&xe.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),OE=xe&&xe.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),gE=xe&&xe.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&mE(t,r,e);return OE(t,r),t};Object.defineProperty(xe,"__esModule",{value:!0});xe.Bookmark=void 0;var ap=gE(he()),SE="bookmarks",cp=function(){function r(t){this._values=wE(t)}return r.empty=function(){return EE},r.prototype.isEmpty=function(){return this._values.length===0},r.prototype.values=function(){return this._values},r.prototype.asBeginTransactionParameters=function(){var t;return this.isEmpty()?{}:(t={},t[SE]=this._values,t)},r}();xe.Bookmark=cp;var EE=new cp(null);function wE(r){if(!r)return[];if(ap.isString(r))return[r];if(Array.isArray(r)){for(var t=[],e=fp(r),n=0;n<e.length;n++){var i=e[n];if(i!=null){if(!ap.isString(i))throw new TypeError("Bookmark value should be a string, given: '"+i+"'");t.push(i)}}return t}throw new TypeError("Bookmark should either be a string or a string array, given: '"+r+"'")}function fp(r){return r.reduce(function(t,e){return Array.isArray(e)?t.concat(fp(e)):t.concat(e)},[])}});var dr=f(j=>{"use strict";Object.defineProperty(j,"__esModule",{value:!0});j.BOLT_PROTOCOL_V4_4=j.BOLT_PROTOCOL_V4_3=j.BOLT_PROTOCOL_V4_2=j.BOLT_PROTOCOL_V4_1=j.BOLT_PROTOCOL_V4_0=j.BOLT_PROTOCOL_V3=j.BOLT_PROTOCOL_V2=j.BOLT_PROTOCOL_V1=j.DEFAULT_POOL_MAX_SIZE=j.DEFAULT_POOL_ACQUISITION_TIMEOUT=j.ACCESS_MODE_WRITE=j.ACCESS_MODE_READ=j.FETCH_ALL=void 0;var TE=-1;j.FETCH_ALL=TE;var PE=60*1e3;j.DEFAULT_POOL_ACQUISITION_TIMEOUT=PE;var CE=100;j.DEFAULT_POOL_MAX_SIZE=CE;var IE="READ";j.ACCESS_MODE_READ=IE;var RE="WRITE";j.ACCESS_MODE_WRITE=RE;var AE=1;j.BOLT_PROTOCOL_V1=AE;var jE=2;j.BOLT_PROTOCOL_V2=jE;var qE=3;j.BOLT_PROTOCOL_V3=qE;var NE=4;j.BOLT_PROTOCOL_V4_0=NE;var xE=4.1;j.BOLT_PROTOCOL_V4_1=xE;var DE=4.2;j.BOLT_PROTOCOL_V4_2=DE;var ME=4.3;j.BOLT_PROTOCOL_V4_3=ME;var kE=4.4;j.BOLT_PROTOCOL_V4_4=kE});var ln=f(Ee=>{"use strict";var hp=Ee&&Ee.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ee,"__esModule",{value:!0});Ee.EMPTY_CONNECTION_HOLDER=Ee.ReadOnlyConnectionHolder=Ee.ConnectionHolder=void 0;var UE=ie(),LE=he(),FE=dr(),BE=_r(),Is=function(){function r(t){var e=t===void 0?{}:t,n=e.mode,i=n===void 0?FE.ACCESS_MODE_WRITE:n,o=e.database,u=o===void 0?"":o,s=e.bookmark,c=e.connectionProvider,a=e.impersonatedUser,l=e.onDatabaseNameResolved;this._mode=i,this._database=u?(0,LE.assertString)(u,"database"):"",this._bookmark=s||BE.Bookmark.empty(),this._connectionProvider=c,this._impersonatedUser=a,this._referenceCount=0,this._connectionPromise=Promise.resolve(),this._onDatabaseNameResolved=l}return r.prototype.mode=function(){return this._mode},r.prototype.database=function(){return this._database},r.prototype.setDatabase=function(t){this._database=t},r.prototype.bookmark=function(){return this._bookmark},r.prototype.connectionProvider=function(){return this._connectionProvider},r.prototype.referenceCount=function(){return this._referenceCount},r.prototype.initializeConnection=function(){if(this._referenceCount===0&&this._connectionProvider)this._connectionPromise=this._connectionProvider.acquireConnection({accessMode:this._mode,database:this._database,bookmarks:this._bookmark,impersonatedUser:this._impersonatedUser,onDatabaseNameResolved:this._onDatabaseNameResolved});else return this._referenceCount++,!1;return this._referenceCount++,!0},r.prototype.getConnection=function(){return this._connectionPromise},r.prototype.releaseConnection=function(){return this._referenceCount===0?this._connectionPromise:(this._referenceCount--,this._referenceCount===0?this._releaseConnection():this._connectionPromise)},r.prototype.close=function(){return this._referenceCount===0?this._connectionPromise:(this._referenceCount=0,this._releaseConnection())},r.prototype._releaseConnection=function(){return this._connectionPromise=this._connectionPromise.then(function(t){return t?t.isOpen()?t.resetAndFlush().catch(lp).then(function(){return t._release()}):t._release():Promise.resolve()}).catch(lp),this._connectionPromise},r}();Ee.ConnectionHolder=Is;var pp=function(r){hp(t,r);function t(e){var n=r.call(this,{mode:e.mode(),database:e.database(),bookmark:e.bookmark(),connectionProvider:e.connectionProvider()})||this;return n._connectionHolder=e,n}return t.prototype.initializeConnection=function(){return this._connectionHolder.referenceCount()!==0},t.prototype.getConnection=function(){return this._connectionHolder.getConnection()},t.prototype.releaseConnection=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve()})},t.prototype.close=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve()})},t}(Is);Ee.ReadOnlyConnectionHolder=pp;Ee.default=pp;var VE=function(r){hp(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.mode=function(){},t.prototype.database=function(){},t.prototype.initializeConnection=function(){return!0},t.prototype.getConnection=function(){return Promise.reject((0,UE.newError)("This connection holder does not serve connections"))},t.prototype.releaseConnection=function(){return Promise.resolve()},t.prototype.close=function(){return Promise.resolve()},t}(Is),WE=new VE;Ee.EMPTY_CONNECTION_HOLDER=WE;function lp(r){}});var Io=f(De=>{"use strict";var HE=De&&De.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),zE=De&&De.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),YE=De&&De.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&HE(t,r,e);return zE(t,r),t};Object.defineProperty(De,"__esModule",{value:!0});De.TxConfig=void 0;var hn=YE(he()),_p=ie(),ZE=Et(),dp=function(){function r(t){XE(t),this.timeout=GE(t),this.metadata=QE(t)}return r.empty=function(){return KE},r.prototype.isEmpty=function(){return Object.values(this).every(function(t){return t==null})},r}();De.TxConfig=dp;var KE=new dp({});function GE(r){if(hn.isObject(r)&&(r.timeout||r.timeout===0)){hn.assertNumberOrInteger(r.timeout,"Transaction timeout");var t=(0,ZE.int)(r.timeout);if(t.isZero())throw(0,_p.newError)("Transaction timeout should not be zero");if(t.isNegative())throw(0,_p.newError)("Transaction timeout should not be negative");return t}return null}function QE(r){if(hn.isObject(r)&&r.metadata){var t=r.metadata;if(hn.assertObject(t,"config.metadata"),Object.keys(t).length!==0)return t}return null}function XE(r){r&&hn.assertObject(r,"Transaction config")}});var As=f(Ro=>{"use strict";Object.defineProperty(Ro,"__esModule",{value:!0});Ro.canRetryOn=void 0;var Rs=ie();function JE(r){return r&&r instanceof Rs.Neo4jError&&r.code&&(r.code===Rs.SERVICE_UNAVAILABLE||r.code===Rs.SESSION_EXPIRED||ew(r)||$E(r))}Ro.canRetryOn=JE;function $E(r){var t=r.code;return t.indexOf("TransientError")>=0?!(t==="Neo.TransientError.Transaction.Terminated"||t==="Neo.TransientError.Transaction.LockClientStopped"):!1}function ew(r){return r.code==="Neo.ClientError.Security.AuthorizationExpired"}});var js=f(qo=>{"use strict";Object.defineProperty(qo,"__esModule",{value:!0});qo.TransactionExecutor=void 0;var Ao=ie(),tw=As(),rw=30*1e3,nw=1e3,iw=2,ow=.2,uw=function(){function r(t,e,n,i){this._maxRetryTimeMs=jo(t,rw),this._initialRetryDelayMs=jo(e,nw),this._multiplier=jo(n,iw),this._jitterFactor=jo(i,ow),this._inFlightTimeoutIds=[],this._verifyAfterConstruction()}return r.prototype.execute=function(t,e){var n=this;return new Promise(function(i,o){n._executeTransactionInsidePromise(t,e,i,o)}).catch(function(i){var o=Date.now(),u=n._initialRetryDelayMs;return n._retryTransactionPromise(t,e,i,o,u)})},r.prototype.close=function(){this._inFlightTimeoutIds.forEach(function(t){return clearTimeout(t)}),this._inFlightTimeoutIds=[]},r.prototype._retryTransactionPromise=function(t,e,n,i,o){var u=this,s=Date.now()-i;return s>this._maxRetryTimeMs||!(0,tw.canRetryOn)(n)?Promise.reject(n):new Promise(function(c,a){var l=u._computeDelayWithJitter(o),h=setTimeout(function(){u._inFlightTimeoutIds=u._inFlightTimeoutIds.filter(function(p){return p!==h}),u._executeTransactionInsidePromise(t,e,c,a)},l);u._inFlightTimeoutIds.push(h)}).catch(function(c){var a=o*u._multiplier;return u._retryTransactionPromise(t,e,c,i,a)})},r.prototype._executeTransactionInsidePromise=function(t,e,n,i){var o=this,u;try{u=t()}catch(c){i(c);return}var s=this._safeExecuteTransactionWork(u,e);s.then(function(c){return o._handleTransactionWorkSuccess(c,u,n,i)}).catch(function(c){return o._handleTransactionWorkFailure(c,u,i)})},r.prototype._safeExecuteTransactionWork=function(t,e){try{var n=e(t);return Promise.resolve(n)}catch(i){return Promise.reject(i)}},r.prototype._handleTransactionWorkSuccess=function(t,e,n,i){e.isOpen()?e.commit().then(function(){n(t)}).catch(function(o){i(o)}):n(t)},r.prototype._handleTransactionWorkFailure=function(t,e,n){e.isOpen()?e.rollback().catch(function(i){}).then(function(){return n(t)}):n(t)},r.prototype._computeDelayWithJitter=function(t){var e=t*this._jitterFactor,n=t-e,i=t+e;return Math.random()*(i-n)+n},r.prototype._verifyAfterConstruction=function(){if(this._maxRetryTimeMs<0)throw(0,Ao.newError)("Max retry time should be >= 0: "+this._maxRetryTimeMs);if(this._initialRetryDelayMs<0)throw(0,Ao.newError)("Initial retry delay should >= 0: "+this._initialRetryDelayMs);if(this._multiplier<1)throw(0,Ao.newError)("Multiplier should be >= 1.0: "+this._multiplier);if(this._jitterFactor<0||this._jitterFactor>1)throw(0,Ao.newError)("Jitter factor should be in [0.0, 1.0]: "+this._jitterFactor)},r}();qo.TransactionExecutor=uw;function jo(r,t){return r||r===0?r:t}});var qs=f(No=>{"use strict";Object.defineProperty(No,"__esModule",{value:!0});No.ConnectivityVerifier=void 0;var sw=ln(),aw=dr(),cw=ie(),fw=function(){function r(t){this._connectionProvider=t}return r.prototype.verify=function(t){var e=t===void 0?{}:t,n=e.database,i=n===void 0?"":n;return lw(this._connectionProvider,i)},r}();No.ConnectivityVerifier=fw;function lw(r,t){var e=new sw.ConnectionHolder({mode:aw.ACCESS_MODE_READ,database:t,connectionProvider:r});return e.initializeConnection(),e.getConnection().then(function(n){if(!n)throw(0,cw.newError)("Unexpected error acquiring transaction");return e.close().then(function(){return n.server})}).catch(function(n){return e.close().catch(function(i){}).then(function(){return Promise.reject(n)})})}});var Ms=f(br=>{"use strict";var hw=br&&br.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),vr;Object.defineProperty(br,"__esModule",{value:!0});br.Logger=void 0;var vp=ie(),Ns="error",xs="warn",pn="info",Ds="debug",pw=pn,Do=(vr={},vr[Ns]=0,vr[xs]=1,vr[pn]=2,vr[Ds]=3,vr),bp=function(){function r(t,e){this._level=t,this._loggerFunction=e}return r.create=function(t){if(t&&t.logging){var e=t.logging,n=vw(e),i=bw(e);return new r(n,i)}return this.noOp()},r.noOp=function(){return dw},r.prototype.isErrorEnabled=function(){return xo(this._level,Ns)},r.prototype.error=function(t){this.isErrorEnabled()&&this._loggerFunction(Ns,t)},r.prototype.isWarnEnabled=function(){return xo(this._level,xs)},r.prototype.warn=function(t){this.isWarnEnabled()&&this._loggerFunction(xs,t)},r.prototype.isInfoEnabled=function(){return xo(this._level,pn)},r.prototype.info=function(t){this.isInfoEnabled()&&this._loggerFunction(pn,t)},r.prototype.isDebugEnabled=function(){return xo(this._level,Ds)},r.prototype.debug=function(t){this.isDebugEnabled()&&this._loggerFunction(Ds,t)},r}();br.Logger=bp;var _w=function(r){hw(t,r);function t(){return r.call(this,pn,function(e,n){})||this}return t.prototype.isErrorEnabled=function(){return!1},t.prototype.error=function(e){},t.prototype.isWarnEnabled=function(){return!1},t.prototype.warn=function(e){},t.prototype.isInfoEnabled=function(){return!1},t.prototype.info=function(e){},t.prototype.isDebugEnabled=function(){return!1},t.prototype.debug=function(e){},t}(bp),dw=new _w;function xo(r,t){return Do[r]>=Do[t]}function vw(r){if(r&&r.level){var t=r.level,e=Do[t];if(!e&&e!==0)throw(0,vp.newError)("Illegal logging level: "+t+". Supported levels are: "+Object.keys(Do));return t}return pw}function bw(r){if(r&&r.logger){var t=r.logger;if(t&&typeof t=="function")return t}throw(0,vp.newError)("Illegal logger function: "+r.logger)}});var ks=f(K=>{"use strict";var Mo=K&&K.__assign||function(){return Mo=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Mo.apply(this,arguments)},mp=K&&K.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,o=[],u;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){u={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(u)throw u.error}}return o};Object.defineProperty(K,"__esModule",{value:!0});K.Url=K.formatIPv6Address=K.formatIPv4Address=K.defaultPortForScheme=K.parseDatabaseUrl=void 0;var yw=he(),mw=7687,Ow=7474,gw=7473,Op=function(){function r(t,e,n,i,o){this.scheme=t,this.host=e,this.port=n,this.hostAndPort=i,this.query=o}return r}();K.Url=Op;function Sw(r){(0,yw.assertString)(r,"URL");var t=ww(r),e=Nw(t.url),n=t.schemeMissing?null:Tw(e.scheme),i=Pw(e.host),o=Aw(i),u=Cw(e.port,n),s=o+":"+u,c=Iw(e.query||Ew(e.resourceName),r);return new Op(n,i,u,s,c)}K.parseDatabaseUrl=Sw;function Ew(r){if(typeof r!="string")return null;var t=mp(r.split("?"),2),e=t[0],n=t[1];return n}function ww(r){return r=r.trim(),r.indexOf("://")===-1?{schemeMissing:!0,url:"none://"+r}:{schemeMissing:!1,url:r}}function Tw(r){return r?(r=r.trim(),r.charAt(r.length-1)===":"&&(r=r.substring(0,r.length-1)),r):null}function Pw(r,t){if(!r)throw new Error("Unable to extract host from "+t);return r.trim()}function Cw(r,t){var e=typeof r=="string"?parseInt(r,10):r;return e===0||e?e:Sp(t)}function Iw(r,t){var e=r?Rw(r):null,n={};return e&&e.split("&").forEach(function(i){var o=i.split("=");if(o.length!==2)throw new Error("Invalid parameters: '"+o+"' in URL '"+t+"'.");var u=yp(o[0],"key",t),s=yp(o[1],"value",t);if(n[u])throw new Error("Duplicated query parameters with key '"+u+"' in URL '"+t+"'");n[u]=s}),n}function Rw(r){return r=(r||"").trim(),r&&r.charAt(0)==="?"&&(r=r.substring(1,r.length)),r}function yp(r,t,e){if(r=(r||"").trim(),!r)throw new Error("Illegal empty "+t+" in URL query '"+e+"'");return r}function gp(r){var t=r.charAt(0)==="[",e=r.charAt(r.length-1)==="]";if(!t&&!e)return"["+r+"]";if(t&&e)return r;throw new Error("Illegal IPv6 address "+r)}function Aw(r){if(!r)throw new Error("Illegal host "+r);var t=r.indexOf(":")>=0;return t?gp(r):r}function jw(r,t){return r+":"+t}K.formatIPv4Address=jw;function qw(r,t){var e=gp(r);return e+":"+t}K.formatIPv6Address=qw;function Sp(r){return r==="http"?Ow:r==="https"?gw:mw}K.defaultPortForScheme=Sp;function Nw(r){function t(s,c){var a=s.indexOf(c);return a>=0?[s.substring(0,a),s[a],s.substring(a+1)]:[s,"",""]}function e(s,c){var a=s.lastIndexOf(c);return a>=0?[s.substring(0,a),s[a],s.substring(a+1)]:["","",s]}function n(s,c,a){var l=t(s,c),h=t(l[2],a);return[h[0],h[2]]}function i(s){var c={},a;a=e(s,"@"),a[1]==="@"&&(c.userInfo=decodeURIComponent(a[0]),s=a[2]);var l=mp(n(s,"[","]"),2),h=l[0],p=l[1];return h!==""?(c.host=h,a=t(p,":")):(a=t(s,":"),c.host=a[0]),a[1]===":"&&(c.port=a[2]),c}var o={},u;return u=t(r,":"),u[1]===":"&&(o.scheme=decodeURIComponent(u[0]),r=u[2]),u=t(r,"#"),u[1]==="#"&&(o.fragment=decodeURIComponent(u[2]),r=u[0]),u=t(r,"?"),u[1]==="?"&&(o.query=u[2],r=u[0]),r.startsWith("//")?(u=t(r.substr(2),"/"),o=Mo(Mo({},o),i(u[0])),o.path=u[1]+u[2]):o.path=r,o}});var Ls=f(Me=>{"use strict";var xw=Me&&Me.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),Dw=Me&&Me.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),Mw=Me&&Me.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&xw(t,r,e);return Dw(t,r),t};Object.defineProperty(Me,"__esModule",{value:!0});Me.ServerAddress=void 0;var Us=he(),kw=Mw(ks()),Uw=function(){function r(t,e,n,i){this._host=(0,Us.assertString)(t,"host"),this._resolved=e?(0,Us.assertString)(e,"resolved"):null,this._port=(0,Us.assertNumber)(n,"port"),this._hostPort=i,this._stringValue=e?i+"("+e+")":""+i}return r.prototype.host=function(){return this._host},r.prototype.resolvedHost=function(){return this._resolved?this._resolved:this._host},r.prototype.port=function(){return this._port},r.prototype.resolveWith=function(t){return new r(this._host,t,this._port,this._hostPort)},r.prototype.asHostPort=function(){return this._hostPort},r.prototype.asKey=function(){return this._hostPort},r.prototype.toString=function(){return this._stringValue},r.fromUrl=function(t){var e=kw.parseDatabaseUrl(t);return new r(e.host,null,e.port,e.hostAndPort)},r}();Me.ServerAddress=Uw});var Ep=f(Fs=>{"use strict";Object.defineProperty(Fs,"__esModule",{value:!0});var Lw=function(){function r(){}return r.prototype.resolve=function(){throw new Error("Abstract function")},r.prototype._resolveToItself=function(t){return Promise.resolve([t])},r}();Fs.default=Lw});var Vs=f(Bs=>{"use strict";Object.defineProperty(Bs,"__esModule",{value:!0});var Fw=Ls();function Bw(r){return Promise.resolve([r])}var Vw=function(){function r(t){this._resolverFunction=t||Bw}return r.prototype.resolve=function(t){var e=this;return new Promise(function(n){return n(e._resolverFunction(t.asHostPort()))}).then(function(n){if(!Array.isArray(n))throw new TypeError("Configured resolver function should either return an array of addresses or a Promise resolved with an array of addresses."+("Each address is '<host>:<port>'. Got: "+n));return n.map(function(i){return Fw.ServerAddress.fromUrl(i)})})},r}();Bs.default=Vw});var Tp=f(ct=>{"use strict";var wp=ct&&ct.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ct,"__esModule",{value:!0});ct.ConfiguredCustomResolver=ct.BaseHostNameResolver=void 0;var Ww=wp(Ep());ct.BaseHostNameResolver=Ww.default;var Hw=wp(Vs());ct.ConfiguredCustomResolver=Hw.default});var Ws=f(T=>{"use strict";var zw=T&&T.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),Yw=T&&T.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),J=T&&T.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&zw(t,r,e);return Yw(t,r),t};Object.defineProperty(T,"__esModule",{value:!0});T.objectUtil=T.retryStrategy=T.resolver=T.serverAddress=T.urlUtil=T.logger=T.connectivityVerifier=T.transactionExecutor=T.txConfig=T.connectionHolder=T.constants=T.bookmark=T.observer=T.temporalUtil=T.util=void 0;var Zw=J(he());T.util=Zw;var Kw=J(ms());T.temporalUtil=Kw;var Gw=J(Co());T.observer=Gw;var Qw=J(_r());T.bookmark=Qw;var Xw=J(dr());T.constants=Xw;var Jw=J(ln());T.connectionHolder=Jw;var $w=J(Io());T.txConfig=$w;var e0=J(js());T.transactionExecutor=e0;var t0=J(qs());T.connectivityVerifier=t0;var r0=J(Ms());T.logger=r0;var n0=J(ks());T.urlUtil=n0;var i0=J(Ls());T.serverAddress=i0;var o0=J(Tp());T.resolver=o0;var u0=J(As());T.retryStrategy=u0;var s0=J(vs());T.objectUtil=s0});var ko=f(_n=>{"use strict";var a0=_n&&_n.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_n,"__esModule",{value:!0});var c0=a0(Cs()),Pp=Ws(),f0=Pp.connectionHolder.EMPTY_CONNECTION_HOLDER,l0=function(r){console.log("Uncaught error when processing result: "+r)},h0=function(r){},p0=function(){function r(t,e,n,i){this._stack=_0(),this._streamObserverPromise=t,this._p=null,this._query=e,this._parameters=n||{},this._connectionHolder=i||f0}return r.prototype.keys=function(){var t=this;return new Promise(function(e,n){t._streamObserverPromise.then(function(i){return i.subscribe({onKeys:function(o){return e(o)},onError:function(o){return n(o)}})}).catch(n)})},r.prototype.summary=function(){var t=this;return new Promise(function(e,n){t._streamObserverPromise.then(function(i){i.cancel(),i.subscribe({onCompleted:function(o){return t._createSummary(o).then(e,n)},onError:function(o){return n(o)}})}).catch(n)})},r.prototype._getOrCreatePromise=function(){var t=this;return this._p||(this._p=new Promise(function(e,n){var i=[],o={onNext:function(u){i.push(u)},onCompleted:function(u){e({records:i,summary:u})},onError:function(u){n(u)}};t.subscribe(o)})),this._p},r.prototype.then=function(t,e){return this._getOrCreatePromise().then(t,e)},r.prototype.catch=function(t){return this._getOrCreatePromise().catch(t)},r.prototype.finally=function(t){return this._getOrCreatePromise().finally(t)},r.prototype.subscribe=function(t){var e=this,n=t.onCompleted||h0,i=function(s){e._createSummary(s).then(function(c){return n.call(t,c)})};t.onCompleted=i;var o=t.onError||l0,u=function(s){e._connectionHolder.releaseConnection().then(function(){d0(s,e._stack),o.call(t,s)})};t.onError=u,this._streamObserverPromise.then(function(s){return s.subscribe(t)}).catch(function(s){return t.onError(s)})},r.prototype._cancel=function(){this._streamObserverPromise.then(function(t){return t.cancel()})},r.prototype._createSummary=function(t){var e=Pp.util.validateQueryAndParameters(this._query,this._parameters,{skipAsserts:!0}),n=e.validatedQuery,i=e.params,o=this._connectionHolder;return o.getConnection().then(function(u){return o.releaseConnection().then(function(){return u?u.protocol().version:void 0})},function(u){}).then(function(u){return new c0.default(n,i,t,u)})},r}();function _0(){var r=new Error("");return r.stack?r.stack.replace(/^Error(\n\r)*/,""):null}function d0(r,t){t&&(r.stack=r.toString()+`
`+t)}_n.default=p0});var Cp=f(Hs=>{"use strict";Object.defineProperty(Hs,"__esModule",{value:!0});var v0=function(){function r(){}return r.prototype.acquireConnection=function(t){throw Error("Not implemented")},r.prototype.supportsMultiDb=function(){throw Error("Not implemented")},r.prototype.supportsTransactionConfig=function(){throw Error("Not implemented")},r.prototype.supportsUserImpersonation=function(){throw Error("Not implemented")},r.prototype.close=function(){throw Error("Not implemented")},r}();Hs.default=v0});var Ip=f(zs=>{"use strict";Object.defineProperty(zs,"__esModule",{value:!0});var b0=function(){function r(){this.id="",this.databaseId=""}return r.prototype.isOpen=function(){return!1},r.prototype.protocol=function(){throw Error("Not implemented")},r.prototype.connect=function(t,e){throw Error("Not implemented")},r.prototype.write=function(t,e,n){throw Error("Not implemented")},r.prototype.resetAndFlush=function(){throw Error("Not implemented")},r.prototype.close=function(){throw Error("Not implemented")},r.prototype._release=function(){return Promise.resolve()},r}();zs.default=b0});var Zs=f(ze=>{"use strict";var y0=ze&&ze.__awaiter||function(r,t,e,n){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return new(e||(e=Promise))(function(o,u){function s(l){try{a(n.next(l))}catch(h){u(h)}}function c(l){try{a(n.throw(l))}catch(h){u(h)}}function a(l){l.done?o(l.value):i(l.value).then(s,c)}a((n=n.apply(r,t||[])).next())})},m0=ze&&ze.__generator||function(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function s(a){return function(l){return c([a,l])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(o=a[0]&2?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[a[0]&2,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,i=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){e.label=a[1];break}if(a[0]===6&&e.label<o[1]){e.label=o[1],o=a;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(a);break}o[2]&&e.ops.pop(),e.trys.pop();continue}a=t.call(r,e)}catch(l){a=[6,l],i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},O0=ze&&ze.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ze,"__esModule",{value:!0});var g0=he(),Ys=ln(),Ap=_r(),S0=Io(),we=Co(),Te=ie(),jp=O0(ko()),E0=function(){function r(t){var e=t.connectionHolder,n=t.onClose,i=t.onBookmark,o=t.onConnection,u=t.reactive,s=t.fetchSize,c=t.impersonatedUser;this._connectionHolder=e,this._reactive=u,this._state=Pe.ACTIVE,this._onClose=n,this._onBookmark=i,this._onConnection=o,this._onError=this._onErrorCallback.bind(this),this._onComplete=this._onCompleteCallback.bind(this),this._fetchSize=s,this._results=[],this._impersonatedUser=c}return r.prototype._begin=function(t,e){var n=this;this._connectionHolder.getConnection().then(function(i){if(n._onConnection(),i)return i.protocol().beginTransaction({bookmark:t,txConfig:e,mode:n._connectionHolder.mode(),database:n._connectionHolder.database(),impersonatedUser:n._impersonatedUser,beforeError:n._onError,afterComplete:n._onComplete});throw(0,Te.newError)("No connection available")}).catch(function(i){return n._onError(i)})},r.prototype.run=function(t,e){var n=(0,g0.validateQueryAndParameters)(t,e),i=n.validatedQuery,o=n.params,u=this._state.run(i,o,{connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,reactive:this._reactive,fetchSize:this._fetchSize});return this._results.push(u),u},r.prototype.commit=function(){var t=this._state.commit({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,pendingResults:this._results});return this._state=t.state,this._onClose(),new Promise(function(e,n){t.result.subscribe({onCompleted:function(){return e()},onError:function(i){return n(i)}})})},r.prototype.rollback=function(){var t=this._state.rollback({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,pendingResults:this._results});return this._state=t.state,this._onClose(),new Promise(function(e,n){t.result.subscribe({onCompleted:function(){return e()},onError:function(i){return n(i)}})})},r.prototype.isOpen=function(){return this._state===Pe.ACTIVE},r.prototype.close=function(){return y0(this,void 0,void 0,function(){return m0(this,function(t){switch(t.label){case 0:return this.isOpen()?[4,this.rollback()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},r.prototype._onErrorCallback=function(t){return this._state=Pe.FAILED,this._onClose(),this._connectionHolder.releaseConnection()},r.prototype._onCompleteCallback=function(t){this._onBookmark(new Ap.Bookmark(t.bookmark))},r}(),Pe={ACTIVE:{commit:function(r){var t=r.connectionHolder,e=r.onError,n=r.onComplete,i=r.onConnection,o=r.pendingResults;return{result:Rp(!0,t,e,n,i,o),state:Pe.SUCCEEDED}},rollback:function(r){var t=r.connectionHolder,e=r.onError,n=r.onComplete,i=r.onConnection,o=r.pendingResults;return{result:Rp(!1,t,e,n,i,o),state:Pe.ROLLED_BACK}},run:function(r,t,e){var n=e.connectionHolder,i=e.onError,o=e.onComplete,u=e.onConnection,s=e.reactive,c=e.fetchSize,a=n.getConnection().then(function(l){if(u(),l)return l.protocol().run(r,t,{bookmark:Ap.Bookmark.empty(),txConfig:S0.TxConfig.empty(),beforeError:i,afterComplete:o,reactive:s,fetchSize:c});throw(0,Te.newError)("No connection available")}).catch(function(l){return new we.FailedObserver({error:l,onError:i})});return ke(a,r,t,n)}},FAILED:{commit:function(r){var t=r.connectionHolder,e=r.onError,n=r.onComplete;return{result:ke(new we.FailedObserver({error:(0,Te.newError)("Cannot commit this transaction, because it has been rolled back either because of an error or explicit termination."),onError:e}),"COMMIT",{},t),state:Pe.FAILED}},rollback:function(r){var t=r.connectionHolder,e=r.onError,n=r.onComplete;return{result:ke(new we.CompletedObserver,"ROLLBACK",{},t),state:Pe.FAILED}},run:function(r,t,e){var n=e.connectionHolder,i=e.onError,o=e.onComplete;return ke(new we.FailedObserver({error:(0,Te.newError)("Cannot run query in this transaction, because it has been rolled back either because of an error or explicit termination."),onError:i}),r,t,n)}},SUCCEEDED:{commit:function(r){var t=r.connectionHolder,e=r.onError,n=r.onComplete;return{result:ke(new we.FailedObserver({error:(0,Te.newError)("Cannot commit this transaction, because it has already been committed."),onError:e}),"COMMIT",{}),state:Pe.SUCCEEDED,connectionHolder:t}},rollback:function(r){var t=r.connectionHolder,e=r.onError,n=r.onComplete;return{result:ke(new we.FailedObserver({error:(0,Te.newError)("Cannot rollback this transaction, because it has already been committed."),onError:e}),"ROLLBACK",{}),state:Pe.SUCCEEDED,connectionHolder:t}},run:function(r,t,e){var n=e.connectionHolder,i=e.onError,o=e.onComplete;return ke(new we.FailedObserver({error:(0,Te.newError)("Cannot run query in this transaction, because it has already been committed."),onError:i}),r,t,n)}},ROLLED_BACK:{commit:function(r){var t=r.connectionHolder,e=r.onError,n=r.onComplete;return{result:ke(new we.FailedObserver({error:(0,Te.newError)("Cannot commit this transaction, because it has already been rolled back."),onError:e}),"COMMIT",{},t),state:Pe.ROLLED_BACK}},rollback:function(r){var t=r.connectionHolder,e=r.onError,n=r.onComplete;return{result:ke(new we.FailedObserver({error:(0,Te.newError)("Cannot rollback this transaction, because it has already been rolled back.")}),"ROLLBACK",{},t),state:Pe.ROLLED_BACK}},run:function(r,t,e){var n=e.connectionHolder,i=e.onError,o=e.onComplete;return ke(new we.FailedObserver({error:(0,Te.newError)("Cannot run query in this transaction, because it has already been rolled back."),onError:i}),r,t,n)}}};function Rp(r,t,e,n,i,o){var u=t.getConnection().then(function(s){return i(),o.forEach(function(c){return c._cancel()}),Promise.all(o).then(function(c){if(s)return r?s.protocol().commitTransaction({beforeError:e,afterComplete:n}):s.protocol().rollbackTransaction({beforeError:e,afterComplete:n});throw(0,Te.newError)("No connection available")})}).catch(function(s){return new we.FailedObserver({error:s,onError:e})});return new jp.default(u,r?"COMMIT":"ROLLBACK",{},t)}function ke(r,t,e,n){return n===void 0&&(n=Ys.EMPTY_CONNECTION_HOLDER),new jp.default(Promise.resolve(r),t,e,new Ys.ReadOnlyConnectionHolder(n||Ys.EMPTY_CONNECTION_HOLDER))}ze.default=E0});var Xs=f(Ke=>{"use strict";var Ks=Ke&&Ke.__awaiter||function(r,t,e,n){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return new(e||(e=Promise))(function(o,u){function s(l){try{a(n.next(l))}catch(h){u(h)}}function c(l){try{a(n.throw(l))}catch(h){u(h)}}function a(l){l.done?o(l.value):i(l.value).then(s,c)}a((n=n.apply(r,t||[])).next())})},Gs=Ke&&Ke.__generator||function(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function s(a){return function(l){return c([a,l])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(o=a[0]&2?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[a[0]&2,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,i=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){e.label=a[1];break}if(a[0]===6&&e.label<o[1]){e.label=o[1],o=a;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(a);break}o[2]&&e.ops.pop(),e.trys.pop();continue}a=t.call(r,e)}catch(l){a=[6,l],i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},xp=Ke&&Ke.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ke,"__esModule",{value:!0});var Qs=Co(),w0=he(),Ye=ie(),T0=xp(ko()),P0=xp(Zs()),qp=ln(),Ze=dr(),C0=js(),Np=_r(),yr=Io(),I0=function(){function r(t){var e=t.mode,n=t.connectionProvider,i=t.bookmark,o=t.database,u=t.config,s=t.reactive,c=t.fetchSize,a=t.impersonatedUser;this._mode=e,this._database=o,this._reactive=s,this._fetchSize=c,this._onDatabaseNameResolved=this._onDatabaseNameResolved.bind(this),this._readConnectionHolder=new qp.ConnectionHolder({mode:Ze.ACCESS_MODE_READ,database:o,bookmark:i,connectionProvider:n,impersonatedUser:a,onDatabaseNameResolved:this._onDatabaseNameResolved}),this._writeConnectionHolder=new qp.ConnectionHolder({mode:Ze.ACCESS_MODE_WRITE,database:o,bookmark:i,connectionProvider:n,impersonatedUser:a,onDatabaseNameResolved:this._onDatabaseNameResolved}),this._open=!0,this._hasTx=!1,this._impersonatedUser=a,this._lastBookmark=i||Np.Bookmark.empty(),this._transactionExecutor=R0(u),this._onComplete=this._onCompleteCallback.bind(this),this._databaseNameResolved=this._database!==""}return r.prototype.run=function(t,e,n){var i=this,o=(0,w0.validateQueryAndParameters)(t,e),u=o.validatedQuery,s=o.params,c=n?new yr.TxConfig(n):yr.TxConfig.empty();return this._run(u,s,function(a){return i._assertSessionIsOpen(),a.protocol().run(u,s,{bookmark:i._lastBookmark,txConfig:c,mode:i._mode,database:i._database,impersonatedUser:i._impersonatedUser,afterComplete:i._onComplete,reactive:i._reactive,fetchSize:i._fetchSize})})},r.prototype._run=function(t,e,n){var i=this._connectionHolderWithMode(this._mode),o;return this._open?!this._hasTx&&i.initializeConnection()?o=i.getConnection().then(function(u){return n(u)}).catch(function(u){return Promise.resolve(new Qs.FailedObserver({error:u}))}):o=Promise.resolve(new Qs.FailedObserver({error:(0,Ye.newError)("Queries cannot be run directly on a session with an open transaction; either run from within the transaction or use a different session.")})):o=Promise.resolve(new Qs.FailedObserver({error:(0,Ye.newError)("Cannot run query in a closed session.")})),new T0.default(o,t,e,i)},r.prototype._acquireConnection=function(t){return Ks(this,void 0,void 0,function(){var e,n,i=this;return Gs(this,function(o){return n=this._connectionHolderWithMode(this._mode),this._open?!this._hasTx&&n.initializeConnection()?e=n.getConnection().then(function(u){return t(u)}).then(function(u){return Ks(i,void 0,void 0,function(){return Gs(this,function(s){switch(s.label){case 0:return[4,n.releaseConnection()];case 1:return s.sent(),[2,u]}})})}):e=Promise.reject((0,Ye.newError)("Queries cannot be run directly on a session with an open transaction; either run from within the transaction or use a different session.")):e=Promise.reject((0,Ye.newError)("Cannot run query in a closed session.")),[2,e]})})},r.prototype.beginTransaction=function(t){var e=t,n=yr.TxConfig.empty();return e&&(n=new yr.TxConfig(e)),this._beginTransaction(this._mode,n)},r.prototype._beginTransaction=function(t,e){if(!this._open)throw(0,Ye.newError)("Cannot begin a transaction on a closed session.");if(this._hasTx)throw(0,Ye.newError)("You cannot begin a transaction on a session with an open transaction; either run from within the transaction or use a different session.");var n=r._validateSessionMode(t),i=this._connectionHolderWithMode(n);i.initializeConnection(),this._hasTx=!0;var o=new P0.default({connectionHolder:i,impersonatedUser:this._impersonatedUser,onClose:this._transactionClosed.bind(this),onBookmark:this._updateBookmark.bind(this),onConnection:this._assertSessionIsOpen.bind(this),reactive:this._reactive,fetchSize:this._fetchSize});return o._begin(this._lastBookmark,e),o},r.prototype._assertSessionIsOpen=function(){if(!this._open)throw(0,Ye.newError)("You cannot run more transactions on a closed session.")},r.prototype._transactionClosed=function(){this._hasTx=!1},r.prototype.lastBookmark=function(){return this._lastBookmark.values()},r.prototype.readTransaction=function(t,e){var n=new yr.TxConfig(e);return this._runTransaction(Ze.ACCESS_MODE_READ,n,t)},r.prototype.writeTransaction=function(t,e){var n=new yr.TxConfig(e);return this._runTransaction(Ze.ACCESS_MODE_WRITE,n,t)},r.prototype._runTransaction=function(t,e,n){var i=this;return this._transactionExecutor.execute(function(){return i._beginTransaction(t,e)},n)},r.prototype._onDatabaseNameResolved=function(t){if(!this._databaseNameResolved){var e=t||"";this._database=e,this._readConnectionHolder.setDatabase(e),this._writeConnectionHolder.setDatabase(e),this._databaseNameResolved=!0}},r.prototype._updateBookmark=function(t){t&&!t.isEmpty()&&(this._lastBookmark=t)},r.prototype.close=function(){return Ks(this,void 0,void 0,function(){return Gs(this,function(t){switch(t.label){case 0:return this._open?(this._open=!1,this._transactionExecutor.close(),[4,this._readConnectionHolder.close()]):[3,3];case 1:return t.sent(),[4,this._writeConnectionHolder.close()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},r.prototype._connectionHolderWithMode=function(t){if(t===Ze.ACCESS_MODE_READ)return this._readConnectionHolder;if(t===Ze.ACCESS_MODE_WRITE)return this._writeConnectionHolder;throw(0,Ye.newError)("Unknown access mode: "+t)},r.prototype._onCompleteCallback=function(t){this._updateBookmark(new Np.Bookmark(t.bookmark))},r._validateSessionMode=function(t){var e=t||Ze.ACCESS_MODE_WRITE;if(e!==Ze.ACCESS_MODE_READ&&e!==Ze.ACCESS_MODE_WRITE)throw(0,Ye.newError)("Illegal session mode "+e);return e},r}();function R0(r){var t=r&&r.maxTransactionRetryTime?r.maxTransactionRetryTime:null;return new C0.TransactionExecutor(t)}Ke.default=I0});var Bp=f(Ce=>{"use strict";var kp=Ce&&Ce.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ce,"__esModule",{value:!0});Ce.WRITE=Ce.READ=Ce.Driver=void 0;var Dp=_r(),A0=qs(),j0=kp(Vs()),mr=dr(),q0=Ms(),Mp=kp(Xs()),N0=he(),x0=60*60*1e3,D0=1e3,M0=mr.ACCESS_MODE_READ;Ce.READ=M0;var Up=mr.ACCESS_MODE_WRITE;Ce.WRITE=Up;var k0=0,Lp=function(){function r(t,e,n,i){e===void 0&&(e={}),i===void 0&&(i=function(o){return new Mp.default(o)}),L0(e),U0(e),this._id=k0++,this._meta=t,this._config=e,this._log=q0.Logger.create(e),this._createConnectionProvider=n,this._createSession=i,this._connectionProvider=null,this._afterConstruction()}return r.prototype.verifyConnectivity=function(t){var e=t===void 0?{}:t,n=e.database,i=n===void 0?"":n,o=this._getOrCreateConnectionProvider(),u=new A0.ConnectivityVerifier(o);return u.verify({database:i})},r.prototype.supportsMultiDb=function(){var t=this._getOrCreateConnectionProvider();return t.supportsMultiDb()},r.prototype.supportsTransactionConfig=function(){var t=this._getOrCreateConnectionProvider();return t.supportsTransactionConfig()},r.prototype.supportsUserImpersonation=function(){var t=this._getOrCreateConnectionProvider();return t.supportsUserImpersonation()},r.prototype._supportsRouting=function(){return this._meta.routing},r.prototype._isEncrypted=function(){return this._config.encrypted===N0.ENCRYPTION_ON},r.prototype._getTrust=function(){return this._config.trust},r.prototype.session=function(t){var e=t===void 0?{}:t,n=e.defaultAccessMode,i=n===void 0?Up:n,o=e.bookmarks,u=e.database,s=u===void 0?"":u,c=e.impersonatedUser,a=e.fetchSize;return this._newSession({defaultAccessMode:i,bookmarkOrBookmarks:o,database:s,reactive:!1,impersonatedUser:c,fetchSize:Fp(a,this._config.fetchSize)})},r.prototype.close=function(){return this._log.info("Driver "+this._id+" closing"),this._connectionProvider?this._connectionProvider.close():Promise.resolve()},r.prototype._afterConstruction=function(){this._log.info(this._meta.typename+" driver "+this._id+" created for server address "+this._meta.address)},r.prototype._newSession=function(t){var e=t.defaultAccessMode,n=t.bookmarkOrBookmarks,i=t.database,o=t.reactive,u=t.impersonatedUser,s=t.fetchSize,c=Mp.default._validateSessionMode(e),a=this._getOrCreateConnectionProvider(),l=n?new Dp.Bookmark(n):Dp.Bookmark.empty();return this._createSession({mode:c,database:i||"",connectionProvider:a,bookmark:l,config:this._config,reactive:o,impersonatedUser:u,fetchSize:s})},r.prototype._getOrCreateConnectionProvider=function(){return this._connectionProvider||(this._connectionProvider=this._createConnectionProvider(this._id,this._config,this._log,F0(this._config))),this._connectionProvider},r}();Ce.Driver=Lp;function U0(r){var t=r.resolver;if(t&&typeof t!="function")throw new TypeError("Configured resolver should be a function. Got: "+t);return r}function L0(r){r.maxConnectionLifetime=Js(r.maxConnectionLifetime,x0),r.maxConnectionPoolSize=Js(r.maxConnectionPoolSize,mr.DEFAULT_POOL_MAX_SIZE),r.connectionAcquisitionTimeout=Js(r.connectionAcquisitionTimeout,mr.DEFAULT_POOL_ACQUISITION_TIMEOUT),r.fetchSize=Fp(r.fetchSize,D0)}function Js(r,t){var e=parseInt(r,10);return e>0||e===0?e:e<0?Number.MAX_SAFE_INTEGER:t}function Fp(r,t){var e=parseInt(r,10);if(e>0||e===mr.FETCH_ALL)return e;if(e===0||e<0)throw new Error("The fetch size can only be a positive value or "+mr.FETCH_ALL+" for ALL. However fetchSize = "+e);return t}function F0(r){return new j0.default(r.resolver)}Ce.default=Lp});var Vp=f($s=>{"use strict";Object.defineProperty($s,"__esModule",{value:!0});var B0={basic:function(r,t,e){return e?{scheme:"basic",principal:r,credentials:t,realm:e}:{scheme:"basic",principal:r,credentials:t}},kerberos:function(r){return{scheme:"kerberos",principal:"",credentials:r}},bearer:function(r){return{scheme:"bearer",credentials:r}},custom:function(r,t,e,n,i){return i?{scheme:n,principal:r,credentials:t,realm:e,parameters:i}:{scheme:n,principal:r,credentials:t,realm:e}}};$s.default=B0});var Hp=f(Wp=>{"use strict";Object.defineProperty(Wp,"__esModule",{value:!0})});var P=f(d=>{"use strict";var V0=d&&d.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),W0=d&&d.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),Or=d&&d.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&V0(t,r,e);return W0(t,r),t},It=d&&d.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(d,"__esModule",{value:!0});d.types=d.Driver=d.Session=d.Transaction=d.Connection=d.ConnectionProvider=d.Result=d.Stats=d.QueryStatistics=d.ProfiledPlan=d.Plan=d.Notification=d.ServerInfo=d.queryType=d.ResultSummary=d.Record=d.isPathSegment=d.PathSegment=d.isPath=d.Path=d.isUnboundRelationship=d.UnboundRelationship=d.isRelationship=d.Relationship=d.isNode=d.Node=d.Time=d.LocalTime=d.LocalDateTime=d.isTime=d.isLocalTime=d.isLocalDateTime=d.isDuration=d.isDateTime=d.isDate=d.Duration=d.DateTime=d.Date=d.Point=d.isPoint=d.internal=d.toString=d.toNumber=d.inSafeRange=d.isInt=d.int=d.Integer=d.error=d.Neo4jError=d.newError=void 0;d.auth=d.json=d.driver=void 0;var Ct=ie();Object.defineProperty(d,"newError",{enumerable:!0,get:function(){return Ct.newError}});Object.defineProperty(d,"Neo4jError",{enumerable:!0,get:function(){return Ct.Neo4jError}});var ye=Or(Et());d.Integer=ye.default;Object.defineProperty(d,"int",{enumerable:!0,get:function(){return ye.int}});Object.defineProperty(d,"isInt",{enumerable:!0,get:function(){return ye.isInt}});Object.defineProperty(d,"inSafeRange",{enumerable:!0,get:function(){return ye.inSafeRange}});Object.defineProperty(d,"toNumber",{enumerable:!0,get:function(){return ye.toNumber}});Object.defineProperty(d,"toString",{enumerable:!0,get:function(){return ye.toString}});var x=Vh();Object.defineProperty(d,"Date",{enumerable:!0,get:function(){return x.Date}});Object.defineProperty(d,"DateTime",{enumerable:!0,get:function(){return x.DateTime}});Object.defineProperty(d,"Duration",{enumerable:!0,get:function(){return x.Duration}});Object.defineProperty(d,"isDate",{enumerable:!0,get:function(){return x.isDate}});Object.defineProperty(d,"isDateTime",{enumerable:!0,get:function(){return x.isDateTime}});Object.defineProperty(d,"isDuration",{enumerable:!0,get:function(){return x.isDuration}});Object.defineProperty(d,"isLocalDateTime",{enumerable:!0,get:function(){return x.isLocalDateTime}});Object.defineProperty(d,"isLocalTime",{enumerable:!0,get:function(){return x.isLocalTime}});Object.defineProperty(d,"isTime",{enumerable:!0,get:function(){return x.isTime}});Object.defineProperty(d,"LocalDateTime",{enumerable:!0,get:function(){return x.LocalDateTime}});Object.defineProperty(d,"LocalTime",{enumerable:!0,get:function(){return x.LocalTime}});Object.defineProperty(d,"Time",{enumerable:!0,get:function(){return x.Time}});var H=Jh();Object.defineProperty(d,"Node",{enumerable:!0,get:function(){return H.Node}});Object.defineProperty(d,"isNode",{enumerable:!0,get:function(){return H.isNode}});Object.defineProperty(d,"Relationship",{enumerable:!0,get:function(){return H.Relationship}});Object.defineProperty(d,"isRelationship",{enumerable:!0,get:function(){return H.isRelationship}});Object.defineProperty(d,"UnboundRelationship",{enumerable:!0,get:function(){return H.UnboundRelationship}});Object.defineProperty(d,"isUnboundRelationship",{enumerable:!0,get:function(){return H.isUnboundRelationship}});Object.defineProperty(d,"Path",{enumerable:!0,get:function(){return H.Path}});Object.defineProperty(d,"isPath",{enumerable:!0,get:function(){return H.isPath}});Object.defineProperty(d,"PathSegment",{enumerable:!0,get:function(){return H.PathSegment}});Object.defineProperty(d,"isPathSegment",{enumerable:!0,get:function(){return H.isPathSegment}});var zp=It(ep());d.Record=zp.default;var Uo=np();Object.defineProperty(d,"isPoint",{enumerable:!0,get:function(){return Uo.isPoint}});Object.defineProperty(d,"Point",{enumerable:!0,get:function(){return Uo.Point}});var G=Or(Cs());d.ResultSummary=G.default;Object.defineProperty(d,"queryType",{enumerable:!0,get:function(){return G.queryType}});Object.defineProperty(d,"ServerInfo",{enumerable:!0,get:function(){return G.ServerInfo}});Object.defineProperty(d,"Notification",{enumerable:!0,get:function(){return G.Notification}});Object.defineProperty(d,"Plan",{enumerable:!0,get:function(){return G.Plan}});Object.defineProperty(d,"ProfiledPlan",{enumerable:!0,get:function(){return G.ProfiledPlan}});Object.defineProperty(d,"QueryStatistics",{enumerable:!0,get:function(){return G.QueryStatistics}});Object.defineProperty(d,"Stats",{enumerable:!0,get:function(){return G.Stats}});var Yp=It(ko());d.Result=Yp.default;var H0=It(Cp());d.ConnectionProvider=H0.default;var Zp=It(Ip());d.Connection=Zp.default;var Kp=It(Zs());d.Transaction=Kp.default;var Gp=It(Xs());d.Session=Gp.default;var ea=Or(Bp()),Qp=ea;d.Driver=ea.default;d.driver=Qp;var Xp=It(Vp());d.auth=Xp.default;var Jp=Or(Hp());d.types=Jp;var $p=Or(wo());d.json=$p;var e_=Or(Ws());d.internal=e_;var t_={SERVICE_UNAVAILABLE:Ct.SERVICE_UNAVAILABLE,SESSION_EXPIRED:Ct.SESSION_EXPIRED,PROTOCOL_ERROR:Ct.PROTOCOL_ERROR};d.error=t_;var z0={newError:Ct.newError,Neo4jError:Ct.Neo4jError,error:t_,Integer:ye.default,int:ye.int,isInt:ye.isInt,inSafeRange:ye.inSafeRange,toNumber:ye.toNumber,toString:ye.toString,internal:e_,isPoint:Uo.isPoint,Point:Uo.Point,Date:x.Date,DateTime:x.DateTime,Duration:x.Duration,isDate:x.isDate,isDateTime:x.isDateTime,isDuration:x.isDuration,isLocalDateTime:x.isLocalDateTime,isLocalTime:x.isLocalTime,isTime:x.isTime,LocalDateTime:x.LocalDateTime,LocalTime:x.LocalTime,Time:x.Time,Node:H.Node,isNode:H.isNode,Relationship:H.Relationship,isRelationship:H.isRelationship,UnboundRelationship:H.UnboundRelationship,isUnboundRelationship:H.isUnboundRelationship,Path:H.Path,isPath:H.isPath,PathSegment:H.PathSegment,isPathSegment:H.isPathSegment,Record:zp.default,ResultSummary:G.default,queryType:G.queryType,ServerInfo:G.ServerInfo,Notification:G.Notification,Plan:G.Plan,ProfiledPlan:G.ProfiledPlan,QueryStatistics:G.QueryStatistics,Stats:G.Stats,Result:Yp.default,Transaction:Kp.default,Session:Gp.default,Driver:ea.default,Connection:Zp.default,types:Jp,driver:Qp,json:$p,auth:Xp.default};d.default=z0});var gr=f(ta=>{"use strict";Object.defineProperty(ta,"__esModule",{value:!0});function Y0(r){return typeof r=="function"}ta.isFunction=Y0});var dn=f(na=>{"use strict";Object.defineProperty(na,"__esModule",{value:!0});var ra=!1;na.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(r){if(r){var t=new Error;console.warn(`DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: 
`+t.stack)}else ra&&console.log("RxJS: Back to a better error behavior. Thank you. <3");ra=r},get useDeprecatedSynchronousErrorHandling(){return ra}}});var Lo=f(ia=>{"use strict";Object.defineProperty(ia,"__esModule",{value:!0});function Z0(r){setTimeout(function(){throw r},0)}ia.hostReportError=Z0});var ua=f(oa=>{"use strict";Object.defineProperty(oa,"__esModule",{value:!0});var K0=dn(),G0=Lo();oa.empty={closed:!0,next:function(r){},error:function(r){if(K0.config.useDeprecatedSynchronousErrorHandling)throw r;G0.hostReportError(r)},complete:function(){}}});var $=f(sa=>{"use strict";Object.defineProperty(sa,"__esModule",{value:!0});sa.isArray=function(){return Array.isArray||function(r){return r&&typeof r.length=="number"}}()});var Fo=f(aa=>{"use strict";Object.defineProperty(aa,"__esModule",{value:!0});function Q0(r){return r!==null&&typeof r=="object"}aa.isObject=Q0});var fa=f(ca=>{"use strict";Object.defineProperty(ca,"__esModule",{value:!0});var X0=function(){function r(t){return Error.call(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(e,n){return n+1+") "+e.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t,this}return r.prototype=Object.create(Error.prototype),r}();ca.UnsubscriptionError=X0});var Y=f(la=>{"use strict";Object.defineProperty(la,"__esModule",{value:!0});var J0=$(),$0=Fo(),eT=gr(),Bo=fa(),tT=function(){function r(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return r.prototype.unsubscribe=function(){var t;if(!this.closed){var e=this,n=e._parentOrParents,i=e._ctorUnsubscribe,o=e._unsubscribe,u=e._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof r)n.remove(this);else if(n!==null)for(var s=0;s<n.length;++s){var c=n[s];c.remove(this)}if(eT.isFunction(o)){i&&(this._unsubscribe=void 0);try{o.call(this)}catch(h){t=h instanceof Bo.UnsubscriptionError?r_(h.errors):[h]}}if(J0.isArray(u))for(var s=-1,a=u.length;++s<a;){var l=u[s];if($0.isObject(l))try{l.unsubscribe()}catch(p){t=t||[],p instanceof Bo.UnsubscriptionError?t=t.concat(r_(p.errors)):t.push(p)}}if(t)throw new Bo.UnsubscriptionError(t)}},r.prototype.add=function(t){var e=t;if(!t)return r.EMPTY;switch(typeof t){case"function":e=new r(t);case"object":if(e===this||e.closed||typeof e.unsubscribe!="function")return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof r)){var n=e;e=new r,e._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=e._parentOrParents;if(i===null)e._parentOrParents=this;else if(i instanceof r){if(i===this)return e;e._parentOrParents=[i,this]}else if(i.indexOf(this)===-1)i.push(this);else return e;var o=this._subscriptions;return o===null?this._subscriptions=[e]:o.push(e),e},r.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);n!==-1&&e.splice(n,1)}},r.EMPTY=function(t){return t.closed=!0,t}(new r),r}();la.Subscription=tT;function r_(r){return r.reduce(function(t,e){return t.concat(e instanceof Bo.UnsubscriptionError?e.errors:e)},[])}});var Vo=f(vn=>{"use strict";Object.defineProperty(vn,"__esModule",{value:!0});vn.rxSubscriber=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}();vn.$$rxSubscriber=vn.rxSubscriber});var g=f(Er=>{"use strict";var i_=Er&&Er.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Er,"__esModule",{value:!0});var n_=gr(),ha=ua(),rT=Y(),nT=Vo(),Sr=dn(),Wo=Lo(),o_=function(r){i_(t,r);function t(e,n,i){var o=r.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=ha.empty;break;case 1:if(!e){o.destination=ha.empty;break}if(typeof e=="object"){e instanceof t?(o.syncErrorThrowable=e.syncErrorThrowable,o.destination=e,e.add(o)):(o.syncErrorThrowable=!0,o.destination=new pa(o,e));break}default:o.syncErrorThrowable=!0,o.destination=new pa(o,e,n,i);break}return o}return t.prototype[nT.rxSubscriber]=function(){return this},t.create=function(e,n,i){var o=new t(e,n,i);return o.syncErrorThrowable=!1,o},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(rT.Subscription);Er.Subscriber=o_;var pa=function(r){i_(t,r);function t(e,n,i,o){var u=r.call(this)||this;u._parentSubscriber=e;var s,c=u;return n_.isFunction(n)?s=n:n&&(s=n.next,i=n.error,o=n.complete,n!==ha.empty&&(c=Object.create(n),n_.isFunction(c.unsubscribe)&&u.add(c.unsubscribe.bind(c)),c.unsubscribe=u.unsubscribe.bind(u))),u._context=c,u._next=s,u._error=i,u._complete=o,u}return t.prototype.next=function(e){if(!this.isStopped&&this._next){var n=this._parentSubscriber;!Sr.config.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?this.__tryOrUnsub(this._next,e):this.__tryOrSetError(n,this._next,e)&&this.unsubscribe()}},t.prototype.error=function(e){if(!this.isStopped){var n=this._parentSubscriber,i=Sr.config.useDeprecatedSynchronousErrorHandling;if(this._error)!i||!n.syncErrorThrowable?(this.__tryOrUnsub(this._error,e),this.unsubscribe()):(this.__tryOrSetError(n,this._error,e),this.unsubscribe());else if(n.syncErrorThrowable)i?(n.syncErrorValue=e,n.syncErrorThrown=!0):Wo.hostReportError(e),this.unsubscribe();else{if(this.unsubscribe(),i)throw e;Wo.hostReportError(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var n=this._parentSubscriber;if(this._complete){var i=function(){return e._complete.call(e._context)};!Sr.config.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?(this.__tryOrUnsub(i),this.unsubscribe()):(this.__tryOrSetError(n,i),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,n){try{e.call(this._context,n)}catch(i){if(this.unsubscribe(),Sr.config.useDeprecatedSynchronousErrorHandling)throw i;Wo.hostReportError(i)}},t.prototype.__tryOrSetError=function(e,n,i){if(!Sr.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,i)}catch(o){return Sr.config.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=o,e.syncErrorThrown=!0,!0):(Wo.hostReportError(o),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(o_);Er.SafeSubscriber=pa});var Ho=f(_a=>{"use strict";Object.defineProperty(_a,"__esModule",{value:!0});var iT=g();function oT(r){for(;r;){var t=r,e=t.closed,n=t.destination,i=t.isStopped;if(e||i)return!1;n&&n instanceof iT.Subscriber?r=n:r=null}return!0}_a.canReportError=oT});var s_=f(va=>{"use strict";Object.defineProperty(va,"__esModule",{value:!0});var da=g(),u_=Vo(),uT=ua();function sT(r,t,e){if(r){if(r instanceof da.Subscriber)return r;if(r[u_.rxSubscriber])return r[u_.rxSubscriber]()}return!r&&!t&&!e?new da.Subscriber(uT.empty):new da.Subscriber(r,t,e)}va.toSubscriber=sT});var Rt=f(ba=>{"use strict";Object.defineProperty(ba,"__esModule",{value:!0});ba.observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}()});var ft=f(ya=>{"use strict";Object.defineProperty(ya,"__esModule",{value:!0});function aT(r){return r}ya.identity=aT});var Yo=f(zo=>{"use strict";Object.defineProperty(zo,"__esModule",{value:!0});var cT=ft();function fT(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return a_(r)}zo.pipe=fT;function a_(r){return r.length===0?cT.identity:r.length===1?r[0]:function(e){return r.reduce(function(n,i){return i(n)},e)}}zo.pipeFromArray=a_});var I=f(ma=>{"use strict";Object.defineProperty(ma,"__esModule",{value:!0});var lT=Ho(),hT=s_(),pT=Rt(),_T=Yo(),Zo=dn(),dT=function(){function r(t){this._isScalar=!1,t&&(this._subscribe=t)}return r.prototype.lift=function(t){var e=new r;return e.source=this,e.operator=t,e},r.prototype.subscribe=function(t,e,n){var i=this.operator,o=hT.toSubscriber(t,e,n);if(i?o.add(i.call(o,this.source)):o.add(this.source||Zo.config.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),Zo.config.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},r.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){Zo.config.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),lT.canReportError(t)?t.error(e):console.warn(e)}},r.prototype.forEach=function(t,e){var n=this;return e=c_(e),new e(function(i,o){var u;u=n.subscribe(function(s){try{t(s)}catch(c){o(c),u&&u.unsubscribe()}},o,i)})},r.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},r.prototype[pT.observable]=function(){return this},r.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.length===0?this:_T.pipeFromArray(t)(this)},r.prototype.toPromise=function(t){var e=this;return t=c_(t),new t(function(n,i){var o;e.subscribe(function(u){return o=u},function(u){return i(u)},function(){return n(o)})})},r.create=function(t){return new r(t)},r}();ma.Observable=dT;function c_(r){if(r||(r=Zo.config.Promise||Promise),!r)throw new Error("no Promise impl found");return r}});var bn=f(Oa=>{"use strict";Object.defineProperty(Oa,"__esModule",{value:!0});var vT=function(){function r(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return r.prototype=Object.create(Error.prototype),r}();Oa.ObjectUnsubscribedError=vT});var ga=f(yn=>{"use strict";var bT=yn&&yn.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(yn,"__esModule",{value:!0});var yT=Y(),mT=function(r){bT(t,r);function t(e,n){var i=r.call(this)||this;return i.subject=e,i.subscriber=n,i.closed=!1,i}return t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,n=e.observers;if(this.subject=null,!(!n||n.length===0||e.isStopped||e.closed)){var i=n.indexOf(this.subscriber);i!==-1&&n.splice(i,1)}}},t}(yT.Subscription);yn.SubjectSubscription=mT});var Q=f(At=>{"use strict";var wa=At&&At.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(At,"__esModule",{value:!0});var f_=I(),OT=g(),Sa=Y(),mn=bn(),gT=ga(),ST=Vo(),l_=function(r){wa(t,r);function t(e){var n=r.call(this,e)||this;return n.destination=e,n}return t}(OT.Subscriber);At.SubjectSubscriber=l_;var h_=function(r){wa(t,r);function t(){var e=r.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return t.prototype[ST.rxSubscriber]=function(){return new l_(this)},t.prototype.lift=function(e){var n=new Ea(this,this);return n.operator=e,n},t.prototype.next=function(e){if(this.closed)throw new mn.ObjectUnsubscribedError;if(!this.isStopped)for(var n=this.observers,i=n.length,o=n.slice(),u=0;u<i;u++)o[u].next(e)},t.prototype.error=function(e){if(this.closed)throw new mn.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var n=this.observers,i=n.length,o=n.slice(),u=0;u<i;u++)o[u].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new mn.ObjectUnsubscribedError;this.isStopped=!0;for(var e=this.observers,n=e.length,i=e.slice(),o=0;o<n;o++)i[o].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(e){if(this.closed)throw new mn.ObjectUnsubscribedError;return r.prototype._trySubscribe.call(this,e)},t.prototype._subscribe=function(e){if(this.closed)throw new mn.ObjectUnsubscribedError;return this.hasError?(e.error(this.thrownError),Sa.Subscription.EMPTY):this.isStopped?(e.complete(),Sa.Subscription.EMPTY):(this.observers.push(e),new gT.SubjectSubscription(this,e))},t.prototype.asObservable=function(){var e=new f_.Observable;return e.source=this,e},t.create=function(e,n){return new Ea(e,n)},t}(f_.Observable);At.Subject=h_;var Ea=function(r){wa(t,r);function t(e,n){var i=r.call(this)||this;return i.destination=e,i.source=n,i}return t.prototype.next=function(e){var n=this.destination;n&&n.next&&n.next(e)},t.prototype.error=function(e){var n=this.destination;n&&n.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){var n=this.source;return n?this.source.subscribe(e):Sa.Subscription.EMPTY},t}(h_);At.AnonymousSubject=Ea});var Ko=f(On=>{"use strict";var ET=On&&On.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(On,"__esModule",{value:!0});var wT=g();function TT(){return function(t){return t.lift(new PT(t))}}On.refCount=TT;var PT=function(){function r(t){this.connectable=t}return r.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var i=new CT(t,n),o=e.subscribe(i);return i.closed||(i.connection=n.connect()),o},r}(),CT=function(r){ET(t,r);function t(e,n){var i=r.call(this,e)||this;return i.connectable=n,i}return t.prototype._unsubscribe=function(){var e=this.connectable;if(!e){this.connection=null;return}this.connectable=null;var n=e._refCount;if(n<=0){this.connection=null;return}if(e._refCount=n-1,n>1){this.connection=null;return}var i=this.connection,o=e._connection;this.connection=null,o&&(!i||o===i)&&o.unsubscribe()},t}(wT.Subscriber)});var Pa=f(wr=>{"use strict";var Ta=wr&&wr.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(wr,"__esModule",{value:!0});var IT=Q(),RT=I(),AT=g(),p_=Y(),jT=Ko(),__=function(r){Ta(t,r);function t(e,n){var i=r.call(this)||this;return i.source=e,i.subjectFactory=n,i._refCount=0,i._isComplete=!1,i}return t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,e=this._connection=new p_.Subscription,e.add(this.source.subscribe(new qT(this.getSubject(),this))),e.closed&&(this._connection=null,e=p_.Subscription.EMPTY)),e},t.prototype.refCount=function(){return jT.refCount()(this)},t}(RT.Observable);wr.ConnectableObservable=__;wr.connectableObservableDescriptor=function(){var r=__.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:r._subscribe},_isComplete:{value:r._isComplete,writable:!0},getSubject:{value:r.getSubject},connect:{value:r.connect},refCount:{value:r.refCount}}}();var qT=function(r){Ta(t,r);function t(e,n){var i=r.call(this,e)||this;return i.connectable=n,i}return t.prototype._error=function(e){this._unsubscribe(),r.prototype._error.call(this,e)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),r.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var n=e._connection;e._refCount=0,e._subject=null,e._connection=null,n&&n.unsubscribe()}},t}(IT.SubjectSubscriber),i6=function(){function r(t){this.connectable=t}return r.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var i=new NT(t,n),o=e.subscribe(i);return i.closed||(i.connection=n.connect()),o},r}(),NT=function(r){Ta(t,r);function t(e,n){var i=r.call(this,e)||this;return i.connectable=n,i}return t.prototype._unsubscribe=function(){var e=this.connectable;if(!e){this.connection=null;return}this.connectable=null;var n=e._refCount;if(n<=0){this.connection=null;return}if(e._refCount=n-1,n>1){this.connection=null;return}var i=this.connection,o=e._connection;this.connection=null,o&&(!i||o===i)&&o.unsubscribe()},t}(AT.Subscriber)});var Ia=f(Tr=>{"use strict";var Go=Tr&&Tr.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Tr,"__esModule",{value:!0});var d_=g(),v_=Y(),xT=I(),DT=Q();function MT(r,t,e,n){return function(i){return i.lift(new kT(r,t,e,n))}}Tr.groupBy=MT;var kT=function(){function r(t,e,n,i){this.keySelector=t,this.elementSelector=e,this.durationSelector=n,this.subjectSelector=i}return r.prototype.call=function(t,e){return e.subscribe(new UT(t,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},r}(),UT=function(r){Go(t,r);function t(e,n,i,o,u){var s=r.call(this,e)||this;return s.keySelector=n,s.elementSelector=i,s.durationSelector=o,s.subjectSelector=u,s.groups=null,s.attemptedToUnsubscribe=!1,s.count=0,s}return t.prototype._next=function(e){var n;try{n=this.keySelector(e)}catch(i){this.error(i);return}this._group(e,n)},t.prototype._group=function(e,n){var i=this.groups;i||(i=this.groups=new Map);var o=i.get(n),u;if(this.elementSelector)try{u=this.elementSelector(e)}catch(a){this.error(a)}else u=e;if(!o){o=this.subjectSelector?this.subjectSelector():new DT.Subject,i.set(n,o);var s=new Ca(n,o,this);if(this.destination.next(s),this.durationSelector){var c=void 0;try{c=this.durationSelector(new Ca(n,o))}catch(a){this.error(a);return}this.add(c.subscribe(new LT(n,o,this)))}}o.closed||o.next(u)},t.prototype._error=function(e){var n=this.groups;n&&(n.forEach(function(i,o){i.error(e)}),n.clear()),this.destination.error(e)},t.prototype._complete=function(){var e=this.groups;e&&(e.forEach(function(n,i){n.complete()}),e.clear()),this.destination.complete()},t.prototype.removeGroup=function(e){this.groups.delete(e)},t.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,this.count===0&&r.prototype.unsubscribe.call(this))},t}(d_.Subscriber),LT=function(r){Go(t,r);function t(e,n,i){var o=r.call(this,n)||this;return o.key=e,o.group=n,o.parent=i,o}return t.prototype._next=function(e){this.complete()},t.prototype._unsubscribe=function(){var e=this,n=e.parent,i=e.key;this.key=this.parent=null,n&&n.removeGroup(i)},t}(d_.Subscriber),Ca=function(r){Go(t,r);function t(e,n,i){var o=r.call(this)||this;return o.key=e,o.groupSubject=n,o.refCountSubscription=i,o}return t.prototype._subscribe=function(e){var n=new v_.Subscription,i=this,o=i.refCountSubscription,u=i.groupSubject;return o&&!o.closed&&n.add(new FT(o)),n.add(u.subscribe(e)),n},t}(xT.Observable);Tr.GroupedObservable=Ca;var FT=function(r){Go(t,r);function t(e){var n=r.call(this)||this;return n.parent=e,e.count++,n}return t.prototype.unsubscribe=function(){var e=this.parent;!e.closed&&!this.closed&&(r.prototype.unsubscribe.call(this),e.count-=1,e.count===0&&e.attemptedToUnsubscribe&&e.unsubscribe())},t}(v_.Subscription)});var Ra=f(gn=>{"use strict";var BT=gn&&gn.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(gn,"__esModule",{value:!0});var VT=Q(),WT=bn(),HT=function(r){BT(t,r);function t(e){var n=r.call(this)||this;return n._value=e,n}return Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(e){var n=r.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new WT.ObjectUnsubscribedError;return this._value},t.prototype.next=function(e){r.prototype.next.call(this,this._value=e)},t}(VT.Subject);gn.BehaviorSubject=HT});var b_=f(Sn=>{"use strict";var zT=Sn&&Sn.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Sn,"__esModule",{value:!0});var YT=Y(),ZT=function(r){zT(t,r);function t(e,n){return r.call(this)||this}return t.prototype.schedule=function(e,n){return n===void 0&&(n=0),this},t}(YT.Subscription);Sn.Action=ZT});var Pr=f(En=>{"use strict";var KT=En&&En.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(En,"__esModule",{value:!0});var GT=b_(),QT=function(r){KT(t,r);function t(e,n){var i=r.call(this,e,n)||this;return i.scheduler=e,i.work=n,i.pending=!1,i}return t.prototype.schedule=function(e,n){if(n===void 0&&(n=0),this.closed)return this;this.state=e;var i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(o,this.id,n),this},t.prototype.requestAsyncId=function(e,n,i){return i===void 0&&(i=0),setInterval(e.flush.bind(e,this),i)},t.prototype.recycleAsyncId=function(e,n,i){if(i===void 0&&(i=0),i!==null&&this.delay===i&&this.pending===!1)return n;clearInterval(n)},t.prototype.execute=function(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(e,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,n){var i=!1,o=void 0;try{this.work(e)}catch(u){i=!0,o=!!u&&u||new Error(u)}if(i)return this.unsubscribe(),o},t.prototype._unsubscribe=function(){var e=this.id,n=this.scheduler,i=n.actions,o=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,o!==-1&&i.splice(o,1),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null},t}(GT.Action);En.AsyncAction=QT});var y_=f(wn=>{"use strict";var XT=wn&&wn.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(wn,"__esModule",{value:!0});var JT=Pr(),$T=function(r){XT(t,r);function t(e,n){var i=r.call(this,e,n)||this;return i.scheduler=e,i.work=n,i}return t.prototype.schedule=function(e,n){return n===void 0&&(n=0),n>0?r.prototype.schedule.call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)},t.prototype.execute=function(e,n){return n>0||this.closed?r.prototype.execute.call(this,e,n):this._execute(e,n)},t.prototype.requestAsyncId=function(e,n,i){return i===void 0&&(i=0),i!==null&&i>0||i===null&&this.delay>0?r.prototype.requestAsyncId.call(this,e,n,i):e.flush(this)},t}(JT.AsyncAction);wn.QueueAction=$T});var ja=f(Aa=>{"use strict";Object.defineProperty(Aa,"__esModule",{value:!0});var eP=function(){function r(t,e){e===void 0&&(e=r.now),this.SchedulerAction=t,this.now=e}return r.prototype.schedule=function(t,e,n){return e===void 0&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},r.now=function(){return Date.now()},r}();Aa.Scheduler=eP});var Cr=f(Tn=>{"use strict";var tP=Tn&&Tn.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Tn,"__esModule",{value:!0});var m_=ja(),rP=function(r){tP(t,r);function t(e,n){n===void 0&&(n=m_.Scheduler.now);var i=r.call(this,e,function(){return t.delegate&&t.delegate!==i?t.delegate.now():n()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return t.prototype.schedule=function(e,n,i){return n===void 0&&(n=0),t.delegate&&t.delegate!==this?t.delegate.schedule(e,n,i):r.prototype.schedule.call(this,e,n,i)},t.prototype.flush=function(e){var n=this.actions;if(this.active){n.push(e);return}var i;this.active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=n.shift());if(this.active=!1,i){for(;e=n.shift();)e.unsubscribe();throw i}},t}(m_.Scheduler);Tn.AsyncScheduler=rP});var O_=f(Pn=>{"use strict";var nP=Pn&&Pn.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Pn,"__esModule",{value:!0});var iP=Cr(),oP=function(r){nP(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t}(iP.AsyncScheduler);Pn.QueueScheduler=oP});var qa=f(Cn=>{"use strict";Object.defineProperty(Cn,"__esModule",{value:!0});var uP=y_(),sP=O_();Cn.queueScheduler=new sP.QueueScheduler(uP.QueueAction);Cn.queue=Cn.queueScheduler});var Ie=f(In=>{"use strict";Object.defineProperty(In,"__esModule",{value:!0});var g_=I();In.EMPTY=new g_.Observable(function(r){return r.complete()});function aP(r){return r?cP(r):In.EMPTY}In.empty=aP;function cP(r){return new g_.Observable(function(t){return r.schedule(function(){return t.complete()})})}});var Re=f(Na=>{"use strict";Object.defineProperty(Na,"__esModule",{value:!0});function fP(r){return r&&typeof r.schedule=="function"}Na.isScheduler=fP});var Da=f(xa=>{"use strict";Object.defineProperty(xa,"__esModule",{value:!0});xa.subscribeToArray=function(r){return function(t){for(var e=0,n=r.length;e<n&&!t.closed;e++)t.next(r[e]);t.complete()}}});var Qo=f(Ma=>{"use strict";Object.defineProperty(Ma,"__esModule",{value:!0});var lP=I(),hP=Y();function pP(r,t){return new lP.Observable(function(e){var n=new hP.Subscription,i=0;return n.add(t.schedule(function(){if(i===r.length){e.complete();return}e.next(r[i++]),e.closed||n.add(this.schedule())})),n})}Ma.scheduleArray=pP});var Ir=f(ka=>{"use strict";Object.defineProperty(ka,"__esModule",{value:!0});var _P=I(),dP=Da(),vP=Qo();function bP(r,t){return t?vP.scheduleArray(r,t):new _P.Observable(dP.subscribeToArray(r))}ka.fromArray=bP});var Rn=f(Ua=>{"use strict";Object.defineProperty(Ua,"__esModule",{value:!0});var yP=Re(),mP=Ir(),OP=Qo();function gP(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=r[r.length-1];return yP.isScheduler(e)?(r.pop(),OP.scheduleArray(r,e)):mP.fromArray(r)}Ua.of=gP});var Xo=f(La=>{"use strict";Object.defineProperty(La,"__esModule",{value:!0});var S_=I();function SP(r,t){return t?new S_.Observable(function(e){return t.schedule(EP,0,{error:r,subscriber:e})}):new S_.Observable(function(e){return e.error(r)})}La.throwError=SP;function EP(r){var t=r.error,e=r.subscriber;e.error(t)}});var jn=f(An=>{"use strict";Object.defineProperty(An,"__esModule",{value:!0});var wP=Ie(),TP=Rn(),PP=Xo(),CP;(function(r){r.NEXT="N",r.ERROR="E",r.COMPLETE="C"})(CP=An.NotificationKind||(An.NotificationKind={}));var IP=function(){function r(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue=t==="N"}return r.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},r.prototype.do=function(t,e,n){var i=this.kind;switch(i){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},r.prototype.accept=function(t,e,n){return t&&typeof t.next=="function"?this.observe(t):this.do(t,e,n)},r.prototype.toObservable=function(){var t=this.kind;switch(t){case"N":return TP.of(this.value);case"E":return PP.throwError(this.error);case"C":return wP.empty()}throw new Error("unexpected notification kind value")},r.createNext=function(t){return typeof t<"u"?new r("N",t):r.undefinedValueNotification},r.createError=function(t){return new r("E",void 0,t)},r.createComplete=function(){return r.completeNotification},r.completeNotification=new r("C"),r.undefinedValueNotification=new r("N",void 0),r}();An.Notification=IP});var Ba=f(lt=>{"use strict";var RP=lt&&lt.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(lt,"__esModule",{value:!0});var AP=g(),Fa=jn();function jP(r,t){return t===void 0&&(t=0),function(n){return n.lift(new E_(r,t))}}lt.observeOn=jP;var E_=function(){function r(t,e){e===void 0&&(e=0),this.scheduler=t,this.delay=e}return r.prototype.call=function(t,e){return e.subscribe(new w_(t,this.scheduler,this.delay))},r}();lt.ObserveOnOperator=E_;var w_=function(r){RP(t,r);function t(e,n,i){i===void 0&&(i=0);var o=r.call(this,e)||this;return o.scheduler=n,o.delay=i,o}return t.dispatch=function(e){var n=e.notification,i=e.destination;n.observe(i),this.unsubscribe()},t.prototype.scheduleMessage=function(e){var n=this.destination;n.add(this.scheduler.schedule(t.dispatch,this.delay,new T_(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(Fa.Notification.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(Fa.Notification.createError(e)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(Fa.Notification.createComplete()),this.unsubscribe()},t}(AP.Subscriber);lt.ObserveOnSubscriber=w_;var T_=function(){function r(t,e){this.notification=t,this.destination=e}return r}();lt.ObserveOnMessage=T_});var Jo=f(qn=>{"use strict";var qP=qn&&qn.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(qn,"__esModule",{value:!0});var NP=Q(),xP=qa(),DP=Y(),MP=Ba(),kP=bn(),UP=ga(),LP=function(r){qP(t,r);function t(e,n,i){e===void 0&&(e=Number.POSITIVE_INFINITY),n===void 0&&(n=Number.POSITIVE_INFINITY);var o=r.call(this)||this;return o.scheduler=i,o._events=[],o._infiniteTimeWindow=!1,o._bufferSize=e<1?1:e,o._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(o._infiniteTimeWindow=!0,o.next=o.nextInfiniteTimeWindow):o.next=o.nextTimeWindow,o}return t.prototype.nextInfiniteTimeWindow=function(e){if(!this.isStopped){var n=this._events;n.push(e),n.length>this._bufferSize&&n.shift()}r.prototype.next.call(this,e)},t.prototype.nextTimeWindow=function(e){this.isStopped||(this._events.push(new FP(this._getNow(),e)),this._trimBufferThenGetEvents()),r.prototype.next.call(this,e)},t.prototype._subscribe=function(e){var n=this._infiniteTimeWindow,i=n?this._events:this._trimBufferThenGetEvents(),o=this.scheduler,u=i.length,s;if(this.closed)throw new kP.ObjectUnsubscribedError;if(this.isStopped||this.hasError?s=DP.Subscription.EMPTY:(this.observers.push(e),s=new UP.SubjectSubscription(this,e)),o&&e.add(e=new MP.ObserveOnSubscriber(e,o)),n)for(var c=0;c<u&&!e.closed;c++)e.next(i[c]);else for(var c=0;c<u&&!e.closed;c++)e.next(i[c].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),s},t.prototype._getNow=function(){return(this.scheduler||xP.queue).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),n=this._bufferSize,i=this._windowTime,o=this._events,u=o.length,s=0;s<u&&!(e-o[s].time<i);)s++;return u>n&&(s=Math.max(s,u-n)),s>0&&o.splice(0,s),o},t}(NP.Subject);qn.ReplaySubject=LP;var FP=function(){function r(t,e){this.time=t,this.value=e}return r}()});var xn=f(Nn=>{"use strict";var BP=Nn&&Nn.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Nn,"__esModule",{value:!0});var VP=Q(),P_=Y(),WP=function(r){BP(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.value=null,e.hasNext=!1,e.hasCompleted=!1,e}return t.prototype._subscribe=function(e){return this.hasError?(e.error(this.thrownError),P_.Subscription.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),P_.Subscription.EMPTY):r.prototype._subscribe.call(this,e)},t.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},t.prototype.error=function(e){this.hasCompleted||r.prototype.error.call(this,e)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&r.prototype.next.call(this,this.value),r.prototype.complete.call(this)},t}(VP.Subject);Nn.AsyncSubject=WP});var I_=f(eu=>{"use strict";Object.defineProperty(eu,"__esModule",{value:!0});var HP=1,zP=function(){return Promise.resolve()}(),$o={};function C_(r){return r in $o?(delete $o[r],!0):!1}eu.Immediate={setImmediate:function(r){var t=HP++;return $o[t]=!0,zP.then(function(){return C_(t)&&r()}),t},clearImmediate:function(r){C_(r)}};eu.TestTools={pending:function(){return Object.keys($o).length}}});var A_=f(Dn=>{"use strict";var YP=Dn&&Dn.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Dn,"__esModule",{value:!0});var R_=I_(),ZP=Pr(),KP=function(r){YP(t,r);function t(e,n){var i=r.call(this,e,n)||this;return i.scheduler=e,i.work=n,i}return t.prototype.requestAsyncId=function(e,n,i){return i===void 0&&(i=0),i!==null&&i>0?r.prototype.requestAsyncId.call(this,e,n,i):(e.actions.push(this),e.scheduled||(e.scheduled=R_.Immediate.setImmediate(e.flush.bind(e,null))))},t.prototype.recycleAsyncId=function(e,n,i){if(i===void 0&&(i=0),i!==null&&i>0||i===null&&this.delay>0)return r.prototype.recycleAsyncId.call(this,e,n,i);e.actions.length===0&&(R_.Immediate.clearImmediate(n),e.scheduled=void 0)},t}(ZP.AsyncAction);Dn.AsapAction=KP});var j_=f(Mn=>{"use strict";var GP=Mn&&Mn.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Mn,"__esModule",{value:!0});var QP=Cr(),XP=function(r){GP(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var n=this.actions,i,o=-1,u=n.length;e=e||n.shift();do if(i=e.execute(e.state,e.delay))break;while(++o<u&&(e=n.shift()));if(this.active=!1,i){for(;++o<u&&(e=n.shift());)e.unsubscribe();throw i}},t}(QP.AsyncScheduler);Mn.AsapScheduler=XP});var Va=f(kn=>{"use strict";Object.defineProperty(kn,"__esModule",{value:!0});var JP=A_(),$P=j_();kn.asapScheduler=new $P.AsapScheduler(JP.AsapAction);kn.asap=kn.asapScheduler});var ee=f(Un=>{"use strict";Object.defineProperty(Un,"__esModule",{value:!0});var eC=Pr(),tC=Cr();Un.asyncScheduler=new tC.AsyncScheduler(eC.AsyncAction);Un.async=Un.asyncScheduler});var q_=f(Ln=>{"use strict";var rC=Ln&&Ln.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ln,"__esModule",{value:!0});var nC=Pr(),iC=function(r){rC(t,r);function t(e,n){var i=r.call(this,e,n)||this;return i.scheduler=e,i.work=n,i}return t.prototype.requestAsyncId=function(e,n,i){return i===void 0&&(i=0),i!==null&&i>0?r.prototype.requestAsyncId.call(this,e,n,i):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(function(){return e.flush(null)})))},t.prototype.recycleAsyncId=function(e,n,i){if(i===void 0&&(i=0),i!==null&&i>0||i===null&&this.delay>0)return r.prototype.recycleAsyncId.call(this,e,n,i);e.actions.length===0&&(cancelAnimationFrame(n),e.scheduled=void 0)},t}(nC.AsyncAction);Ln.AnimationFrameAction=iC});var N_=f(Fn=>{"use strict";var oC=Fn&&Fn.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Fn,"__esModule",{value:!0});var uC=Cr(),sC=function(r){oC(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var n=this.actions,i,o=-1,u=n.length;e=e||n.shift();do if(i=e.execute(e.state,e.delay))break;while(++o<u&&(e=n.shift()));if(this.active=!1,i){for(;++o<u&&(e=n.shift());)e.unsubscribe();throw i}},t}(uC.AsyncScheduler);Fn.AnimationFrameScheduler=sC});var x_=f(Bn=>{"use strict";Object.defineProperty(Bn,"__esModule",{value:!0});var aC=q_(),cC=N_();Bn.animationFrameScheduler=new cC.AnimationFrameScheduler(aC.AnimationFrameAction);Bn.animationFrame=Bn.animationFrameScheduler});var k_=f(Rr=>{"use strict";var D_=Rr&&Rr.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Rr,"__esModule",{value:!0});var fC=Pr(),lC=Cr(),hC=function(r){D_(t,r);function t(e,n){e===void 0&&(e=M_),n===void 0&&(n=Number.POSITIVE_INFINITY);var i=r.call(this,e,function(){return i.frame})||this;return i.maxFrames=n,i.frame=0,i.index=-1,i}return t.prototype.flush=function(){for(var e=this,n=e.actions,i=e.maxFrames,o,u;(u=n[0])&&u.delay<=i&&(n.shift(),this.frame=u.delay,!(o=u.execute(u.state,u.delay))););if(o){for(;u=n.shift();)u.unsubscribe();throw o}},t.frameTimeFactor=10,t}(lC.AsyncScheduler);Rr.VirtualTimeScheduler=hC;var M_=function(r){D_(t,r);function t(e,n,i){i===void 0&&(i=e.index+=1);var o=r.call(this,e,n)||this;return o.scheduler=e,o.work=n,o.index=i,o.active=!0,o.index=e.index=i,o}return t.prototype.schedule=function(e,n){if(n===void 0&&(n=0),!this.id)return r.prototype.schedule.call(this,e,n);this.active=!1;var i=new t(this.scheduler,this.work);return this.add(i),i.schedule(e,n)},t.prototype.requestAsyncId=function(e,n,i){i===void 0&&(i=0),this.delay=e.frame+i;var o=e.actions;return o.push(this),o.sort(t.sortActions),!0},t.prototype.recycleAsyncId=function(e,n,i){i===void 0&&(i=0)},t.prototype._execute=function(e,n){if(this.active===!0)return r.prototype._execute.call(this,e,n)},t.sortActions=function(e,n){return e.delay===n.delay?e.index===n.index?0:e.index>n.index?1:-1:e.delay>n.delay?1:-1},t}(fC.AsyncAction);Rr.VirtualAction=M_});var tu=f(Wa=>{"use strict";Object.defineProperty(Wa,"__esModule",{value:!0});function pC(){}Wa.noop=pC});var U_=f(Ha=>{"use strict";Object.defineProperty(Ha,"__esModule",{value:!0});var _C=I();function dC(r){return!!r&&(r instanceof _C.Observable||typeof r.lift=="function"&&typeof r.subscribe=="function")}Ha.isObservable=dC});var Ar=f(za=>{"use strict";Object.defineProperty(za,"__esModule",{value:!0});var vC=function(){function r(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return r.prototype=Object.create(Error.prototype),r}();za.ArgumentOutOfRangeError=vC});var jr=f(Ya=>{"use strict";Object.defineProperty(Ya,"__esModule",{value:!0});var bC=function(){function r(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return r.prototype=Object.create(Error.prototype),r}();Ya.EmptyError=bC});var Ka=f(Za=>{"use strict";Object.defineProperty(Za,"__esModule",{value:!0});var yC=function(){function r(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return r.prototype=Object.create(Error.prototype),r}();Za.TimeoutError=yC});var _e=f(qr=>{"use strict";var mC=qr&&qr.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(qr,"__esModule",{value:!0});var OC=g();function gC(r,t){return function(n){if(typeof r!="function")throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new L_(r,t))}}qr.map=gC;var L_=function(){function r(t,e){this.project=t,this.thisArg=e}return r.prototype.call=function(t,e){return e.subscribe(new SC(t,this.project,this.thisArg))},r}();qr.MapOperator=L_;var SC=function(r){mC(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.project=n,o.count=0,o.thisArg=i||o,o}return t.prototype._next=function(e){var n;try{n=this.project.call(this.thisArg,e,this.count++)}catch(i){this.destination.error(i);return}this.destination.next(n)},t}(OC.Subscriber)});var V_=f(Ga=>{"use strict";Object.defineProperty(Ga,"__esModule",{value:!0});var EC=I(),F_=xn(),wC=_e(),TC=Ho(),PC=$(),CC=Re();function B_(r,t,e){if(t)if(CC.isScheduler(t))e=t;else return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return B_(r,e).apply(void 0,n).pipe(wC.map(function(o){return PC.isArray(o)?t.apply(void 0,o):t(o)}))};return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=this,u,s={context:o,subject:u,callbackFunc:r,scheduler:e};return new EC.Observable(function(c){if(e){var l={args:n,subscriber:c,params:s};return e.schedule(IC,0,l)}else{if(!u){u=new F_.AsyncSubject;var a=function(){for(var h=[],p=0;p<arguments.length;p++)h[p]=arguments[p];u.next(h.length<=1?h[0]:h),u.complete()};try{r.apply(o,n.concat([a]))}catch(h){TC.canReportError(u)?u.error(h):console.warn(h)}}return u.subscribe(c)}})}}Ga.bindCallback=B_;function IC(r){var t=this,e=this,n=r.args,i=r.subscriber,o=r.params,u=o.callbackFunc,s=o.context,c=o.scheduler,a=o.subject;if(!a){a=o.subject=new F_.AsyncSubject;var l=function(){for(var h=[],p=0;p<arguments.length;p++)h[p]=arguments[p];var y=h.length<=1?h[0]:h;t.add(c.schedule(RC,0,{value:y,subject:a}))};try{u.apply(s,n.concat([l]))}catch(h){a.error(h)}}this.add(a.subscribe(i))}function RC(r){var t=r.value,e=r.subject;e.next(t),e.complete()}});var Y_=f(Qa=>{"use strict";Object.defineProperty(Qa,"__esModule",{value:!0});var AC=I(),H_=xn(),jC=_e(),qC=Ho(),NC=Re(),xC=$();function z_(r,t,e){if(t)if(NC.isScheduler(t))e=t;else return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return z_(r,e).apply(void 0,n).pipe(jC.map(function(o){return xC.isArray(o)?t.apply(void 0,o):t(o)}))};return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o={subject:void 0,args:n,callbackFunc:r,scheduler:e,context:this};return new AC.Observable(function(u){var s=o.context,c=o.subject;if(e)return e.schedule(DC,0,{params:o,subscriber:u,context:s});if(!c){c=o.subject=new H_.AsyncSubject;var a=function(){for(var l=[],h=0;h<arguments.length;h++)l[h]=arguments[h];var p=l.shift();if(p){c.error(p);return}c.next(l.length<=1?l[0]:l),c.complete()};try{r.apply(s,n.concat([a]))}catch(l){qC.canReportError(c)?c.error(l):console.warn(l)}}return c.subscribe(u)})}}Qa.bindNodeCallback=z_;function DC(r){var t=this,e=r.params,n=r.subscriber,i=r.context,o=e.callbackFunc,u=e.args,s=e.scheduler,c=e.subject;if(!c){c=e.subject=new H_.AsyncSubject;var a=function(){for(var l=[],h=0;h<arguments.length;h++)l[h]=arguments[h];var p=l.shift();if(p)t.add(s.schedule(W_,0,{err:p,subject:c}));else{var y=l.length<=1?l[0]:l;t.add(s.schedule(MC,0,{value:y,subject:c}))}};try{o.apply(i,u.concat([a]))}catch(l){this.add(s.schedule(W_,0,{err:l,subject:c}))}}this.add(c.subscribe(n))}function MC(r){var t=r.value,e=r.subject;e.next(t),e.complete()}function W_(r){var t=r.err,e=r.subject;e.error(t)}});var ht=f(Vn=>{"use strict";var kC=Vn&&Vn.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Vn,"__esModule",{value:!0});var UC=g(),LC=function(r){kC(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.notifyNext=function(e,n,i,o,u){this.destination.next(n)},t.prototype.notifyError=function(e,n){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(UC.Subscriber);Vn.OuterSubscriber=LC});var Z_=f(Wn=>{"use strict";var FC=Wn&&Wn.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Wn,"__esModule",{value:!0});var BC=g(),VC=function(r){FC(t,r);function t(e,n,i){var o=r.call(this)||this;return o.parent=e,o.outerValue=n,o.outerIndex=i,o.index=0,o}return t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(BC.Subscriber);Wn.InnerSubscriber=VC});var K_=f(Xa=>{"use strict";Object.defineProperty(Xa,"__esModule",{value:!0});var WC=Lo();Xa.subscribeToPromise=function(r){return function(t){return r.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,WC.hostReportError),t}}});var xr=f(Nr=>{"use strict";Object.defineProperty(Nr,"__esModule",{value:!0});function G_(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}Nr.getSymbolIterator=G_;Nr.iterator=G_();Nr.$$iterator=Nr.iterator});var Q_=f(Ja=>{"use strict";Object.defineProperty(Ja,"__esModule",{value:!0});var HC=xr();Ja.subscribeToIterable=function(r){return function(t){var e=r[HC.iterator]();do{var n=void 0;try{n=e.next()}catch(i){return t.error(i),t}if(n.done){t.complete();break}if(t.next(n.value),t.closed)break}while(!0);return typeof e.return=="function"&&t.add(function(){e.return&&e.return()}),t}}});var X_=f($a=>{"use strict";Object.defineProperty($a,"__esModule",{value:!0});var zC=Rt();$a.subscribeToObservable=function(r){return function(t){var e=r[zC.observable]();if(typeof e.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)}}});var tc=f(ec=>{"use strict";Object.defineProperty(ec,"__esModule",{value:!0});ec.isArrayLike=function(r){return r&&typeof r.length=="number"&&typeof r!="function"}});var nc=f(rc=>{"use strict";Object.defineProperty(rc,"__esModule",{value:!0});function YC(r){return!!r&&typeof r.subscribe!="function"&&typeof r.then=="function"}rc.isPromise=YC});var Hn=f(ic=>{"use strict";Object.defineProperty(ic,"__esModule",{value:!0});var ZC=Da(),KC=K_(),GC=Q_(),QC=X_(),XC=tc(),JC=nc(),$C=Fo(),eI=xr(),tI=Rt();ic.subscribeTo=function(r){if(!!r&&typeof r[tI.observable]=="function")return QC.subscribeToObservable(r);if(XC.isArrayLike(r))return ZC.subscribeToArray(r);if(JC.isPromise(r))return KC.subscribeToPromise(r);if(!!r&&typeof r[eI.iterator]=="function")return GC.subscribeToIterable(r);var t=$C.isObject(r)?"an invalid object":"'"+r+"'",e="You provided "+t+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(e)}});var pt=f(oc=>{"use strict";Object.defineProperty(oc,"__esModule",{value:!0});var rI=Z_(),nI=Hn(),iI=I();function oI(r,t,e,n,i){if(i===void 0&&(i=new rI.InnerSubscriber(r,e,n)),!i.closed)return t instanceof iI.Observable?t.subscribe(i):nI.subscribeTo(t)(i)}oc.subscribeToResult=oI});var ru=f(jt=>{"use strict";var uI=jt&&jt.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(jt,"__esModule",{value:!0});var sI=Re(),aI=$(),cI=ht(),fI=pt(),lI=Ir(),J_={};function hI(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=void 0,n=void 0;return sI.isScheduler(r[r.length-1])&&(n=r.pop()),typeof r[r.length-1]=="function"&&(e=r.pop()),r.length===1&&aI.isArray(r[0])&&(r=r[0]),lI.fromArray(r,n).lift(new $_(e))}jt.combineLatest=hI;var $_=function(){function r(t){this.resultSelector=t}return r.prototype.call=function(t,e){return e.subscribe(new ed(t,this.resultSelector))},r}();jt.CombineLatestOperator=$_;var ed=function(r){uI(t,r);function t(e,n){var i=r.call(this,e)||this;return i.resultSelector=n,i.active=0,i.values=[],i.observables=[],i}return t.prototype._next=function(e){this.values.push(J_),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,n=e.length;if(n===0)this.destination.complete();else{this.active=n,this.toRespond=n;for(var i=0;i<n;i++){var o=e[i];this.add(fI.subscribeToResult(this,o,void 0,i))}}},t.prototype.notifyComplete=function(e){(this.active-=1)===0&&this.destination.complete()},t.prototype.notifyNext=function(e,n,i){var o=this.values,u=o[i],s=this.toRespond?u===J_?--this.toRespond:this.toRespond:0;o[i]=n,s===0&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},t.prototype._tryResultSelector=function(e){var n;try{n=this.resultSelector.apply(this,e)}catch(i){this.destination.error(i);return}this.destination.next(n)},t}(cI.OuterSubscriber);jt.CombineLatestSubscriber=ed});var td=f(uc=>{"use strict";Object.defineProperty(uc,"__esModule",{value:!0});var pI=I(),_I=Y(),dI=Rt();function vI(r,t){return new pI.Observable(function(e){var n=new _I.Subscription;return n.add(t.schedule(function(){var i=r[dI.observable]();n.add(i.subscribe({next:function(o){n.add(t.schedule(function(){return e.next(o)}))},error:function(o){n.add(t.schedule(function(){return e.error(o)}))},complete:function(){n.add(t.schedule(function(){return e.complete()}))}}))})),n})}uc.scheduleObservable=vI});var rd=f(sc=>{"use strict";Object.defineProperty(sc,"__esModule",{value:!0});var bI=I(),yI=Y();function mI(r,t){return new bI.Observable(function(e){var n=new yI.Subscription;return n.add(t.schedule(function(){return r.then(function(i){n.add(t.schedule(function(){e.next(i),n.add(t.schedule(function(){return e.complete()}))}))},function(i){n.add(t.schedule(function(){return e.error(i)}))})})),n})}sc.schedulePromise=mI});var nd=f(ac=>{"use strict";Object.defineProperty(ac,"__esModule",{value:!0});var OI=I(),gI=Y(),SI=xr();function EI(r,t){if(!r)throw new Error("Iterable cannot be null");return new OI.Observable(function(e){var n=new gI.Subscription,i;return n.add(function(){i&&typeof i.return=="function"&&i.return()}),n.add(t.schedule(function(){i=r[SI.iterator](),n.add(t.schedule(function(){if(!e.closed){var o,u;try{var s=i.next();o=s.value,u=s.done}catch(c){e.error(c);return}u?e.complete():(e.next(o),this.schedule())}}))})),n})}ac.scheduleIterable=EI});var id=f(cc=>{"use strict";Object.defineProperty(cc,"__esModule",{value:!0});var wI=Rt();function TI(r){return r&&typeof r[wI.observable]=="function"}cc.isInteropObservable=TI});var od=f(fc=>{"use strict";Object.defineProperty(fc,"__esModule",{value:!0});var PI=xr();function CI(r){return r&&typeof r[PI.iterator]=="function"}fc.isIterable=CI});var hc=f(lc=>{"use strict";Object.defineProperty(lc,"__esModule",{value:!0});var II=td(),RI=rd(),AI=Qo(),jI=nd(),qI=id(),NI=nc(),xI=tc(),DI=od();function MI(r,t){if(r!=null){if(qI.isInteropObservable(r))return II.scheduleObservable(r,t);if(NI.isPromise(r))return RI.schedulePromise(r,t);if(xI.isArrayLike(r))return AI.scheduleArray(r,t);if(DI.isIterable(r)||typeof r=="string")return jI.scheduleIterable(r,t)}throw new TypeError((r!==null&&typeof r||r)+" is not observable")}lc.scheduled=MI});var Ae=f(pc=>{"use strict";Object.defineProperty(pc,"__esModule",{value:!0});var ud=I(),kI=Hn(),UI=hc();function LI(r,t){return t?UI.scheduled(r,t):r instanceof ud.Observable?r:new ud.Observable(kI.subscribeTo(r))}pc.from=LI});var k=f(Ge=>{"use strict";var nu=Ge&&Ge.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ge,"__esModule",{value:!0});var iu=g(),FI=I(),BI=Hn(),VI=function(r){nu(t,r);function t(e){var n=r.call(this)||this;return n.parent=e,n}return t.prototype._next=function(e){this.parent.notifyNext(e)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},t}(iu.Subscriber);Ge.SimpleInnerSubscriber=VI;var WI=function(r){nu(t,r);function t(e,n,i){var o=r.call(this)||this;return o.parent=e,o.outerValue=n,o.outerIndex=i,o}return t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(iu.Subscriber);Ge.ComplexInnerSubscriber=WI;var HI=function(r){nu(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.destination.complete()},t}(iu.Subscriber);Ge.SimpleOuterSubscriber=HI;var zI=function(r){nu(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.notifyNext=function(e,n,i,o){this.destination.next(n)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(iu.Subscriber);Ge.ComplexOuterSubscriber=zI;function YI(r,t){if(!t.closed){if(r instanceof FI.Observable)return r.subscribe(t);var e;try{e=BI.subscribeTo(r)(t)}catch(n){t.error(n)}return e}}Ge.innerSubscribe=YI});var zn=f(_t=>{"use strict";var ZI=_t&&_t.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(_t,"__esModule",{value:!0});var KI=_e(),GI=Ae(),_c=k();function dc(r,t,e){return e===void 0&&(e=Number.POSITIVE_INFINITY),typeof t=="function"?function(n){return n.pipe(dc(function(i,o){return GI.from(r(i,o)).pipe(KI.map(function(u,s){return t(i,u,o,s)}))},e))}:(typeof t=="number"&&(e=t),function(n){return n.lift(new sd(r,e))})}_t.mergeMap=dc;var sd=function(){function r(t,e){e===void 0&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return r.prototype.call=function(t,e){return e.subscribe(new ad(t,this.project,this.concurrent))},r}();_t.MergeMapOperator=sd;var ad=function(r){ZI(t,r);function t(e,n,i){i===void 0&&(i=Number.POSITIVE_INFINITY);var o=r.call(this,e)||this;return o.project=n,o.concurrent=i,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var n,i=this.index++;try{n=this.project(e,i)}catch(o){this.destination.error(o);return}this.active++,this._innerSub(n)},t.prototype._innerSub=function(e){var n=new _c.SimpleInnerSubscriber(this),i=this.destination;i.add(n);var o=_c.innerSubscribe(e,n);o!==n&&i.add(o)},t.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):this.active===0&&this.hasCompleted&&this.destination.complete()},t}(_c.SimpleOuterSubscriber);_t.MergeMapSubscriber=ad;_t.flatMap=dc});var ou=f(vc=>{"use strict";Object.defineProperty(vc,"__esModule",{value:!0});var QI=zn(),XI=ft();function JI(r){return r===void 0&&(r=Number.POSITIVE_INFINITY),QI.mergeMap(XI.identity,r)}vc.mergeAll=JI});var yc=f(bc=>{"use strict";Object.defineProperty(bc,"__esModule",{value:!0});var $I=ou();function e1(){return $I.mergeAll(1)}bc.concatAll=e1});var Yn=f(mc=>{"use strict";Object.defineProperty(mc,"__esModule",{value:!0});var t1=Rn(),r1=yc();function n1(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return r1.concatAll()(t1.of.apply(void 0,r))}mc.concat=n1});var uu=f(Oc=>{"use strict";Object.defineProperty(Oc,"__esModule",{value:!0});var i1=I(),o1=Ae(),u1=Ie();function s1(r){return new i1.Observable(function(t){var e;try{e=r()}catch(i){t.error(i);return}var n=e?o1.from(e):u1.empty();return n.subscribe(t)})}Oc.defer=s1});var fd=f(gc=>{"use strict";Object.defineProperty(gc,"__esModule",{value:!0});var a1=I(),cd=$(),c1=_e(),f1=Fo(),l1=Ae();function h1(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];if(r.length===1){var e=r[0];if(cd.isArray(e))return su(e,null);if(f1.isObject(e)&&Object.getPrototypeOf(e)===Object.prototype){var n=Object.keys(e);return su(n.map(function(o){return e[o]}),n)}}if(typeof r[r.length-1]=="function"){var i=r.pop();return r=r.length===1&&cd.isArray(r[0])?r[0]:r,su(r,null).pipe(c1.map(function(o){return i.apply(void 0,o)}))}return su(r,null)}gc.forkJoin=h1;function su(r,t){return new a1.Observable(function(e){var n=r.length;if(n===0){e.complete();return}for(var i=new Array(n),o=0,u=0,s=function(a){var l=l1.from(r[a]),h=!1;e.add(l.subscribe({next:function(p){h||(h=!0,u++),i[a]=p},error:function(p){return e.error(p)},complete:function(){o++,(o===n||!h)&&(u===n&&e.next(t?t.reduce(function(p,y,O){return p[y]=i[O],p},{}):i),e.complete())}}))},c=0;c<n;c++)s(c)})}});var pd=f(Sc=>{"use strict";Object.defineProperty(Sc,"__esModule",{value:!0});var p1=I(),_1=$(),d1=gr(),v1=_e(),_3=function(){return Object.prototype.toString}();function ld(r,t,e,n){return d1.isFunction(e)&&(n=e,e=void 0),n?ld(r,t,e).pipe(v1.map(function(i){return _1.isArray(i)?n.apply(void 0,i):n(i)})):new p1.Observable(function(i){function o(u){arguments.length>1?i.next(Array.prototype.slice.call(arguments)):i.next(u)}hd(r,t,o,i,e)})}Sc.fromEvent=ld;function hd(r,t,e,n,i){var o;if(m1(r)){var u=r;r.addEventListener(t,e,i),o=function(){return u.removeEventListener(t,e,i)}}else if(y1(r)){var s=r;r.on(t,e),o=function(){return s.off(t,e)}}else if(b1(r)){var c=r;r.addListener(t,e),o=function(){return c.removeListener(t,e)}}else if(r&&r.length)for(var a=0,l=r.length;a<l;a++)hd(r[a],t,e,n,i);else throw new TypeError("Invalid event target");n.add(o)}function b1(r){return r&&typeof r.addListener=="function"&&typeof r.removeListener=="function"}function y1(r){return r&&typeof r.on=="function"&&typeof r.off=="function"}function m1(r){return r&&typeof r.addEventListener=="function"&&typeof r.removeEventListener=="function"}});var dd=f(Ec=>{"use strict";Object.defineProperty(Ec,"__esModule",{value:!0});var O1=I(),g1=$(),S1=gr(),E1=_e();function _d(r,t,e){return e?_d(r,t).pipe(E1.map(function(n){return g1.isArray(n)?e.apply(void 0,n):e(n)})):new O1.Observable(function(n){var i=function(){for(var u=[],s=0;s<arguments.length;s++)u[s]=arguments[s];return n.next(u.length===1?u[0]:u)},o;try{o=r(i)}catch(u){n.error(u);return}if(!!S1.isFunction(t))return function(){return t(i,o)}})}Ec.fromEventPattern=_d});var bd=f(wc=>{"use strict";Object.defineProperty(wc,"__esModule",{value:!0});var w1=I(),vd=ft(),T1=Re();function P1(r,t,e,n,i){var o,u;if(arguments.length==1){var s=r;u=s.initialState,t=s.condition,e=s.iterate,o=s.resultSelector||vd.identity,i=s.scheduler}else n===void 0||T1.isScheduler(n)?(u=r,o=vd.identity,i=n):(u=r,o=n);return new w1.Observable(function(c){var a=u;if(i)return i.schedule(C1,0,{subscriber:c,iterate:e,condition:t,resultSelector:o,state:a});do{if(t){var l=void 0;try{l=t(a)}catch(p){c.error(p);return}if(!l){c.complete();break}}var h=void 0;try{h=o(a)}catch(p){c.error(p);return}if(c.next(h),c.closed)break;try{a=e(a)}catch(p){c.error(p);return}}while(!0)})}wc.generate=P1;function C1(r){var t=r.subscriber,e=r.condition;if(!t.closed){if(r.needIterate)try{r.state=r.iterate(r.state)}catch(o){t.error(o);return}else r.needIterate=!0;if(e){var n=void 0;try{n=e(r.state)}catch(o){t.error(o);return}if(!n){t.complete();return}if(t.closed)return}var i;try{i=r.resultSelector(r.state)}catch(o){t.error(o);return}if(!t.closed&&(t.next(i),!t.closed))return this.schedule(r)}}});var md=f(Tc=>{"use strict";Object.defineProperty(Tc,"__esModule",{value:!0});var I1=uu(),yd=Ie();function R1(r,t,e){return t===void 0&&(t=yd.EMPTY),e===void 0&&(e=yd.EMPTY),I1.defer(function(){return r()?t:e})}Tc.iif=R1});var Zn=f(Pc=>{"use strict";Object.defineProperty(Pc,"__esModule",{value:!0});var A1=$();function j1(r){return!A1.isArray(r)&&r-parseFloat(r)+1>=0}Pc.isNumeric=j1});var gd=f(Cc=>{"use strict";Object.defineProperty(Cc,"__esModule",{value:!0});var q1=I(),Od=ee(),N1=Zn();function x1(r,t){return r===void 0&&(r=0),t===void 0&&(t=Od.async),(!N1.isNumeric(r)||r<0)&&(r=0),(!t||typeof t.schedule!="function")&&(t=Od.async),new q1.Observable(function(e){return e.add(t.schedule(D1,r,{subscriber:e,counter:0,period:r})),e})}Cc.interval=x1;function D1(r){var t=r.subscriber,e=r.counter,n=r.period;t.next(e),this.schedule({subscriber:t,counter:e+1,period:n},n)}});var Rc=f(Ic=>{"use strict";Object.defineProperty(Ic,"__esModule",{value:!0});var M1=I(),k1=Re(),U1=ou(),L1=Ir();function F1(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=Number.POSITIVE_INFINITY,n=null,i=r[r.length-1];return k1.isScheduler(i)?(n=r.pop(),r.length>1&&typeof r[r.length-1]=="number"&&(e=r.pop())):typeof i=="number"&&(e=r.pop()),n===null&&r.length===1&&r[0]instanceof M1.Observable?r[0]:U1.mergeAll(e)(L1.fromArray(r,n))}Ic.merge=F1});var Ac=f(Kn=>{"use strict";Object.defineProperty(Kn,"__esModule",{value:!0});var B1=I(),V1=tu();Kn.NEVER=new B1.Observable(V1.noop);function W1(){return Kn.NEVER}Kn.never=W1});var Sd=f(qc=>{"use strict";Object.defineProperty(qc,"__esModule",{value:!0});var H1=I(),z1=Ae(),Y1=$(),Z1=Ie();function jc(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];if(r.length===0)return Z1.EMPTY;var e=r[0],n=r.slice(1);return r.length===1&&Y1.isArray(e)?jc.apply(void 0,e):new H1.Observable(function(i){var o=function(){return i.add(jc.apply(void 0,n).subscribe(i))};return z1.from(e).subscribe({next:function(u){i.next(u)},error:o,complete:o})})}qc.onErrorResumeNext=jc});var Td=f(au=>{"use strict";Object.defineProperty(au,"__esModule",{value:!0});var Ed=I(),K1=Y();function G1(r,t){return t?new Ed.Observable(function(e){var n=Object.keys(r),i=new K1.Subscription;return i.add(t.schedule(wd,0,{keys:n,index:0,subscriber:e,subscription:i,obj:r})),i}):new Ed.Observable(function(e){for(var n=Object.keys(r),i=0;i<n.length&&!e.closed;i++){var o=n[i];r.hasOwnProperty(o)&&e.next([o,r[o]])}e.complete()})}au.pairs=G1;function wd(r){var t=r.keys,e=r.index,n=r.subscriber,i=r.subscription,o=r.obj;if(!n.closed)if(e<t.length){var u=t[e];n.next([u,o[u]]),i.add(this.schedule({keys:t,index:e+1,subscriber:n,subscription:i,obj:o}))}else n.complete()}au.dispatch=wd});var xc=f(Nc=>{"use strict";Object.defineProperty(Nc,"__esModule",{value:!0});function Q1(r,t){function e(){return!e.pred.apply(e.thisArg,arguments)}return e.pred=r,e.thisArg=t,e}Nc.not=Q1});var qt=f(Gn=>{"use strict";var X1=Gn&&Gn.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Gn,"__esModule",{value:!0});var J1=g();function $1(r,t){return function(n){return n.lift(new eR(r,t))}}Gn.filter=$1;var eR=function(){function r(t,e){this.predicate=t,this.thisArg=e}return r.prototype.call=function(t,e){return e.subscribe(new tR(t,this.predicate,this.thisArg))},r}(),tR=function(r){X1(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.predicate=n,o.thisArg=i,o.count=0,o}return t.prototype._next=function(e){var n;try{n=this.predicate.call(this.thisArg,e,this.count++)}catch(i){this.destination.error(i);return}n&&this.destination.next(e)},t}(J1.Subscriber)});var Rd=f(Dc=>{"use strict";Object.defineProperty(Dc,"__esModule",{value:!0});var rR=xc(),Pd=Hn(),Cd=qt(),Id=I();function nR(r,t,e){return[Cd.filter(t,e)(new Id.Observable(Pd.subscribeTo(r))),Cd.filter(rR.not(t,e))(new Id.Observable(Pd.subscribeTo(r)))]}Dc.partition=nR});var Mc=f(Nt=>{"use strict";var iR=Nt&&Nt.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Nt,"__esModule",{value:!0});var oR=$(),uR=Ir(),sR=ht(),aR=pt();function cR(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];if(r.length===1)if(oR.isArray(r[0]))r=r[0];else return r[0];return uR.fromArray(r,void 0).lift(new Ad)}Nt.race=cR;var Ad=function(){function r(){}return r.prototype.call=function(t,e){return e.subscribe(new jd(t))},r}();Nt.RaceOperator=Ad;var jd=function(r){iR(t,r);function t(e){var n=r.call(this,e)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,n=e.length;if(n===0)this.destination.complete();else{for(var i=0;i<n&&!this.hasFirst;i++){var o=e[i],u=aR.subscribeToResult(this,o,void 0,i);this.subscriptions&&this.subscriptions.push(u),this.add(u)}this.observables=null}},t.prototype.notifyNext=function(e,n,i){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==i){var u=this.subscriptions[o];u.unsubscribe(),this.remove(u)}this.subscriptions=null}this.destination.next(n)},t}(sR.OuterSubscriber);Nt.RaceSubscriber=jd});var Nd=f(cu=>{"use strict";Object.defineProperty(cu,"__esModule",{value:!0});var fR=I();function lR(r,t,e){return r===void 0&&(r=0),new fR.Observable(function(n){t===void 0&&(t=r,r=0);var i=0,o=r;if(e)return e.schedule(qd,0,{index:i,count:t,start:r,subscriber:n});do{if(i++>=t){n.complete();break}if(n.next(o++),n.closed)break}while(!0)})}cu.range=lR;function qd(r){var t=r.start,e=r.index,n=r.count,i=r.subscriber;if(e>=n){i.complete();return}i.next(t),!i.closed&&(r.index=e+1,r.start=t+1,this.schedule(r))}cu.dispatch=qd});var Uc=f(kc=>{"use strict";Object.defineProperty(kc,"__esModule",{value:!0});var hR=I(),pR=ee(),xd=Zn(),Dd=Re();function _R(r,t,e){r===void 0&&(r=0);var n=-1;return xd.isNumeric(t)?n=Number(t)<1&&1||Number(t):Dd.isScheduler(t)&&(e=t),Dd.isScheduler(e)||(e=pR.async),new hR.Observable(function(i){var o=xd.isNumeric(r)?r:+r-e.now();return e.schedule(dR,o,{index:0,period:n,subscriber:i})})}kc.timer=_R;function dR(r){var t=r.index,e=r.period,n=r.subscriber;if(n.next(t),!n.closed){if(e===-1)return n.complete();r.index=t+1,this.schedule(r,e)}}});var Md=f(Lc=>{"use strict";Object.defineProperty(Lc,"__esModule",{value:!0});var vR=I(),bR=Ae(),yR=Ie();function mR(r,t){return new vR.Observable(function(e){var n;try{n=r()}catch(s){e.error(s);return}var i;try{i=t(n)}catch(s){e.error(s);return}var o=i?bR.from(i):yR.EMPTY,u=o.subscribe(e);return function(){u.unsubscribe(),n&&n.unsubscribe()}})}Lc.using=mR});var lu=f(xt=>{"use strict";var kd=xt&&xt.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(xt,"__esModule",{value:!0});var OR=Ir(),gR=$(),SR=g(),fu=xr(),Fc=k();function ER(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=r[r.length-1];return typeof e=="function"&&r.pop(),OR.fromArray(r,void 0).lift(new Ud(e))}xt.zip=ER;var Ud=function(){function r(t){this.resultSelector=t}return r.prototype.call=function(t,e){return e.subscribe(new Ld(t,this.resultSelector))},r}();xt.ZipOperator=Ud;var Ld=function(r){kd(t,r);function t(e,n,i){i===void 0&&(i=Object.create(null));var o=r.call(this,e)||this;return o.resultSelector=n,o.iterators=[],o.active=0,o.resultSelector=typeof n=="function"?n:void 0,o}return t.prototype._next=function(e){var n=this.iterators;gR.isArray(e)?n.push(new TR(e)):typeof e[fu.iterator]=="function"?n.push(new wR(e[fu.iterator]())):n.push(new PR(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,n=e.length;if(this.unsubscribe(),n===0){this.destination.complete();return}this.active=n;for(var i=0;i<n;i++){var o=e[i];if(o.stillUnsubscribed){var u=this.destination;u.add(o.subscribe())}else this.active--}},t.prototype.notifyInactive=function(){this.active--,this.active===0&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,n=e.length,i=this.destination,o=0;o<n;o++){var u=e[o];if(typeof u.hasValue=="function"&&!u.hasValue())return}for(var s=!1,c=[],o=0;o<n;o++){var u=e[o],a=u.next();if(u.hasCompleted()&&(s=!0),a.done){i.complete();return}c.push(a.value)}this.resultSelector?this._tryresultSelector(c):i.next(c),s&&i.complete()},t.prototype._tryresultSelector=function(e){var n;try{n=this.resultSelector.apply(this,e)}catch(i){this.destination.error(i);return}this.destination.next(n)},t}(SR.Subscriber);xt.ZipSubscriber=Ld;var wR=function(){function r(t){this.iterator=t,this.nextResult=t.next()}return r.prototype.hasValue=function(){return!0},r.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},r.prototype.hasCompleted=function(){var t=this.nextResult;return Boolean(t&&t.done)},r}(),TR=function(){function r(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return r.prototype[fu.iterator]=function(){return this},r.prototype.next=function(t){var e=this.index++,n=this.array;return e<this.length?{value:n[e],done:!1}:{value:null,done:!0}},r.prototype.hasValue=function(){return this.array.length>this.index},r.prototype.hasCompleted=function(){return this.array.length===this.index},r}(),PR=function(r){kd(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.parent=n,o.observable=i,o.stillUnsubscribed=!0,o.buffer=[],o.isComplete=!1,o}return t.prototype[fu.iterator]=function(){return this},t.prototype.next=function(){var e=this.buffer;return e.length===0&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return this.buffer.length>0},t.prototype.hasCompleted=function(){return this.buffer.length===0&&this.isComplete},t.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e){this.buffer.push(e),this.parent.checkIterators()},t.prototype.subscribe=function(){return Fc.innerSubscribe(this.observable,new Fc.SimpleInnerSubscriber(this))},t}(Fc.SimpleOuterSubscriber)});var Qn=f(m=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var CR=I();m.Observable=CR.Observable;var IR=Pa();m.ConnectableObservable=IR.ConnectableObservable;var RR=Ia();m.GroupedObservable=RR.GroupedObservable;var AR=Rt();m.observable=AR.observable;var jR=Q();m.Subject=jR.Subject;var qR=Ra();m.BehaviorSubject=qR.BehaviorSubject;var NR=Jo();m.ReplaySubject=NR.ReplaySubject;var xR=xn();m.AsyncSubject=xR.AsyncSubject;var Fd=Va();m.asap=Fd.asap;m.asapScheduler=Fd.asapScheduler;var Bd=ee();m.async=Bd.async;m.asyncScheduler=Bd.asyncScheduler;var Vd=qa();m.queue=Vd.queue;m.queueScheduler=Vd.queueScheduler;var Wd=x_();m.animationFrame=Wd.animationFrame;m.animationFrameScheduler=Wd.animationFrameScheduler;var Hd=k_();m.VirtualTimeScheduler=Hd.VirtualTimeScheduler;m.VirtualAction=Hd.VirtualAction;var DR=ja();m.Scheduler=DR.Scheduler;var MR=Y();m.Subscription=MR.Subscription;var kR=g();m.Subscriber=kR.Subscriber;var zd=jn();m.Notification=zd.Notification;m.NotificationKind=zd.NotificationKind;var UR=Yo();m.pipe=UR.pipe;var LR=tu();m.noop=LR.noop;var FR=ft();m.identity=FR.identity;var BR=U_();m.isObservable=BR.isObservable;var VR=Ar();m.ArgumentOutOfRangeError=VR.ArgumentOutOfRangeError;var WR=jr();m.EmptyError=WR.EmptyError;var HR=bn();m.ObjectUnsubscribedError=HR.ObjectUnsubscribedError;var zR=fa();m.UnsubscriptionError=zR.UnsubscriptionError;var YR=Ka();m.TimeoutError=YR.TimeoutError;var ZR=V_();m.bindCallback=ZR.bindCallback;var KR=Y_();m.bindNodeCallback=KR.bindNodeCallback;var GR=ru();m.combineLatest=GR.combineLatest;var QR=Yn();m.concat=QR.concat;var XR=uu();m.defer=XR.defer;var JR=Ie();m.empty=JR.empty;var $R=fd();m.forkJoin=$R.forkJoin;var eA=Ae();m.from=eA.from;var tA=pd();m.fromEvent=tA.fromEvent;var rA=dd();m.fromEventPattern=rA.fromEventPattern;var nA=bd();m.generate=nA.generate;var iA=md();m.iif=iA.iif;var oA=gd();m.interval=oA.interval;var uA=Rc();m.merge=uA.merge;var sA=Ac();m.never=sA.never;var aA=Rn();m.of=aA.of;var cA=Sd();m.onErrorResumeNext=cA.onErrorResumeNext;var fA=Td();m.pairs=fA.pairs;var lA=Rd();m.partition=lA.partition;var hA=Mc();m.race=hA.race;var pA=Nd();m.range=pA.range;var _A=Xo();m.throwError=_A.throwError;var dA=Uc();m.timer=dA.timer;var vA=Md();m.using=vA.using;var bA=lu();m.zip=bA.zip;var yA=hc();m.scheduled=yA.scheduled;var mA=Ie();m.EMPTY=mA.EMPTY;var OA=Ac();m.NEVER=OA.NEVER;var gA=dn();m.config=gA.config});var Vc=f(Xn=>{"use strict";var SA=Xn&&Xn.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Xn,"__esModule",{value:!0});var Bc=k();function EA(r){return function(e){return e.lift(new wA(r))}}Xn.audit=EA;var wA=function(){function r(t){this.durationSelector=t}return r.prototype.call=function(t,e){return e.subscribe(new TA(t,this.durationSelector))},r}(),TA=function(r){SA(t,r);function t(e,n){var i=r.call(this,e)||this;return i.durationSelector=n,i.hasValue=!1,i}return t.prototype._next=function(e){if(this.value=e,this.hasValue=!0,!this.throttled){var n=void 0;try{var i=this.durationSelector;n=i(e)}catch(u){return this.destination.error(u)}var o=Bc.innerSubscribe(n,new Bc.SimpleInnerSubscriber(this));!o||o.closed?this.clearThrottle():this.add(this.throttled=o)}},t.prototype.clearThrottle=function(){var e=this,n=e.value,i=e.hasValue,o=e.throttled;o&&(this.remove(o),this.throttled=void 0,o.unsubscribe()),i&&(this.value=void 0,this.hasValue=!1,this.destination.next(n))},t.prototype.notifyNext=function(){this.clearThrottle()},t.prototype.notifyComplete=function(){this.clearThrottle()},t}(Bc.SimpleOuterSubscriber)});var Yd=f(Wc=>{"use strict";Object.defineProperty(Wc,"__esModule",{value:!0});var PA=ee(),CA=Vc(),IA=Uc();function RA(r,t){return t===void 0&&(t=PA.async),CA.audit(function(){return IA.timer(r,t)})}Wc.auditTime=RA});var Zd=f(Jn=>{"use strict";var AA=Jn&&Jn.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Jn,"__esModule",{value:!0});var Hc=k();function jA(r){return function(e){return e.lift(new qA(r))}}Jn.buffer=jA;var qA=function(){function r(t){this.closingNotifier=t}return r.prototype.call=function(t,e){return e.subscribe(new NA(t,this.closingNotifier))},r}(),NA=function(r){AA(t,r);function t(e,n){var i=r.call(this,e)||this;return i.buffer=[],i.add(Hc.innerSubscribe(n,new Hc.SimpleInnerSubscriber(i))),i}return t.prototype._next=function(e){this.buffer.push(e)},t.prototype.notifyNext=function(){var e=this.buffer;this.buffer=[],this.destination.next(e)},t}(Hc.SimpleOuterSubscriber)});var Qd=f($n=>{"use strict";var Kd=$n&&$n.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty($n,"__esModule",{value:!0});var Gd=g();function xA(r,t){return t===void 0&&(t=null),function(n){return n.lift(new DA(r,t))}}$n.bufferCount=xA;var DA=function(){function r(t,e){this.bufferSize=t,this.startBufferEvery=e,!e||t===e?this.subscriberClass=MA:this.subscriberClass=kA}return r.prototype.call=function(t,e){return e.subscribe(new this.subscriberClass(t,this.bufferSize,this.startBufferEvery))},r}(),MA=function(r){Kd(t,r);function t(e,n){var i=r.call(this,e)||this;return i.bufferSize=n,i.buffer=[],i}return t.prototype._next=function(e){var n=this.buffer;n.push(e),n.length==this.bufferSize&&(this.destination.next(n),this.buffer=[])},t.prototype._complete=function(){var e=this.buffer;e.length>0&&this.destination.next(e),r.prototype._complete.call(this)},t}(Gd.Subscriber),kA=function(r){Kd(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.bufferSize=n,o.startBufferEvery=i,o.buffers=[],o.count=0,o}return t.prototype._next=function(e){var n=this,i=n.bufferSize,o=n.startBufferEvery,u=n.buffers,s=n.count;this.count++,s%o===0&&u.push([]);for(var c=u.length;c--;){var a=u[c];a.push(e),a.length===i&&(u.splice(c,1),this.destination.next(a))}},t.prototype._complete=function(){for(var e=this,n=e.buffers,i=e.destination;n.length>0;){var o=n.shift();o.length>0&&i.next(o)}r.prototype._complete.call(this)},t}(Gd.Subscriber)});var $d=f(ei=>{"use strict";var UA=ei&&ei.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(ei,"__esModule",{value:!0});var LA=ee(),FA=g(),BA=Re();function VA(r){var t=arguments.length,e=LA.async;BA.isScheduler(arguments[arguments.length-1])&&(e=arguments[arguments.length-1],t--);var n=null;t>=2&&(n=arguments[1]);var i=Number.POSITIVE_INFINITY;return t>=3&&(i=arguments[2]),function(u){return u.lift(new WA(r,n,i,e))}}ei.bufferTime=VA;var WA=function(){function r(t,e,n,i){this.bufferTimeSpan=t,this.bufferCreationInterval=e,this.maxBufferSize=n,this.scheduler=i}return r.prototype.call=function(t,e){return e.subscribe(new zA(t,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},r}(),HA=function(){function r(){this.buffer=[]}return r}(),zA=function(r){UA(t,r);function t(e,n,i,o,u){var s=r.call(this,e)||this;s.bufferTimeSpan=n,s.bufferCreationInterval=i,s.maxBufferSize=o,s.scheduler=u,s.contexts=[];var c=s.openContext();if(s.timespanOnly=i==null||i<0,s.timespanOnly){var a={subscriber:s,context:c,bufferTimeSpan:n};s.add(c.closeAction=u.schedule(Xd,n,a))}else{var l={subscriber:s,context:c},h={bufferTimeSpan:n,bufferCreationInterval:i,subscriber:s,scheduler:u};s.add(c.closeAction=u.schedule(Jd,n,l)),s.add(u.schedule(YA,i,h))}return s}return t.prototype._next=function(e){for(var n=this.contexts,i=n.length,o,u=0;u<i;u++){var s=n[u],c=s.buffer;c.push(e),c.length==this.maxBufferSize&&(o=s)}o&&this.onBufferFull(o)},t.prototype._error=function(e){this.contexts.length=0,r.prototype._error.call(this,e)},t.prototype._complete=function(){for(var e=this,n=e.contexts,i=e.destination;n.length>0;){var o=n.shift();i.next(o.buffer)}r.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.contexts=null},t.prototype.onBufferFull=function(e){this.closeContext(e);var n=e.closeAction;if(n.unsubscribe(),this.remove(n),!this.closed&&this.timespanOnly){e=this.openContext();var i=this.bufferTimeSpan,o={subscriber:this,context:e,bufferTimeSpan:i};this.add(e.closeAction=this.scheduler.schedule(Xd,i,o))}},t.prototype.openContext=function(){var e=new HA;return this.contexts.push(e),e},t.prototype.closeContext=function(e){this.destination.next(e.buffer);var n=this.contexts,i=n?n.indexOf(e):-1;i>=0&&n.splice(n.indexOf(e),1)},t}(FA.Subscriber);function Xd(r){var t=r.subscriber,e=r.context;e&&t.closeContext(e),t.closed||(r.context=t.openContext(),r.context.closeAction=this.schedule(r,r.bufferTimeSpan))}function YA(r){var t=r.bufferCreationInterval,e=r.bufferTimeSpan,n=r.subscriber,i=r.scheduler,o=n.openContext(),u=this;n.closed||(n.add(o.closeAction=i.schedule(Jd,e,{subscriber:n,context:o})),u.schedule(r,t))}function Jd(r){var t=r.subscriber,e=r.context;t.closeContext(e)}});var tv=f(ti=>{"use strict";var ZA=ti&&ti.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(ti,"__esModule",{value:!0});var KA=Y(),ev=pt(),GA=ht();function QA(r,t){return function(n){return n.lift(new XA(r,t))}}ti.bufferToggle=QA;var XA=function(){function r(t,e){this.openings=t,this.closingSelector=e}return r.prototype.call=function(t,e){return e.subscribe(new JA(t,this.openings,this.closingSelector))},r}(),JA=function(r){ZA(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.closingSelector=i,o.contexts=[],o.add(ev.subscribeToResult(o,n)),o}return t.prototype._next=function(e){for(var n=this.contexts,i=n.length,o=0;o<i;o++)n[o].buffer.push(e)},t.prototype._error=function(e){for(var n=this.contexts;n.length>0;){var i=n.shift();i.subscription.unsubscribe(),i.buffer=null,i.subscription=null}this.contexts=null,r.prototype._error.call(this,e)},t.prototype._complete=function(){for(var e=this.contexts;e.length>0;){var n=e.shift();this.destination.next(n.buffer),n.subscription.unsubscribe(),n.buffer=null,n.subscription=null}this.contexts=null,r.prototype._complete.call(this)},t.prototype.notifyNext=function(e,n){e?this.closeBuffer(e):this.openBuffer(n)},t.prototype.notifyComplete=function(e){this.closeBuffer(e.context)},t.prototype.openBuffer=function(e){try{var n=this.closingSelector,i=n.call(this,e);i&&this.trySubscribe(i)}catch(o){this._error(o)}},t.prototype.closeBuffer=function(e){var n=this.contexts;if(n&&e){var i=e.buffer,o=e.subscription;this.destination.next(i),n.splice(n.indexOf(e),1),this.remove(o),o.unsubscribe()}},t.prototype.trySubscribe=function(e){var n=this.contexts,i=[],o=new KA.Subscription,u={buffer:i,subscription:o};n.push(u);var s=ev.subscribeToResult(this,e,u);!s||s.closed?this.closeBuffer(u):(s.context=u,this.add(s),o.add(s))},t}(GA.OuterSubscriber)});var rv=f(ri=>{"use strict";var $A=ri&&ri.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(ri,"__esModule",{value:!0});var ej=Y(),zc=k();function tj(r){return function(t){return t.lift(new rj(r))}}ri.bufferWhen=tj;var rj=function(){function r(t){this.closingSelector=t}return r.prototype.call=function(t,e){return e.subscribe(new nj(t,this.closingSelector))},r}(),nj=function(r){$A(t,r);function t(e,n){var i=r.call(this,e)||this;return i.closingSelector=n,i.subscribing=!1,i.openBuffer(),i}return t.prototype._next=function(e){this.buffer.push(e)},t.prototype._complete=function(){var e=this.buffer;e&&this.destination.next(e),r.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.buffer=void 0,this.subscribing=!1},t.prototype.notifyNext=function(){this.openBuffer()},t.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},t.prototype.openBuffer=function(){var e=this.closingSubscription;e&&(this.remove(e),e.unsubscribe());var n=this.buffer;this.buffer&&this.destination.next(n),this.buffer=[];var i;try{var o=this.closingSelector;i=o()}catch(u){return this.error(u)}e=new ej.Subscription,this.closingSubscription=e,this.add(e),this.subscribing=!0,e.add(zc.innerSubscribe(i,new zc.SimpleInnerSubscriber(this))),this.subscribing=!1},t}(zc.SimpleOuterSubscriber)});var nv=f(ni=>{"use strict";var ij=ni&&ni.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(ni,"__esModule",{value:!0});var Yc=k();function oj(r){return function(e){var n=new uj(r),i=e.lift(n);return n.caught=i}}ni.catchError=oj;var uj=function(){function r(t){this.selector=t}return r.prototype.call=function(t,e){return e.subscribe(new sj(t,this.selector,this.caught))},r}(),sj=function(r){ij(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.selector=n,o.caught=i,o}return t.prototype.error=function(e){if(!this.isStopped){var n=void 0;try{n=this.selector(e,this.caught)}catch(u){r.prototype.error.call(this,u);return}this._unsubscribeAndRecycle();var i=new Yc.SimpleInnerSubscriber(this);this.add(i);var o=Yc.innerSubscribe(n,i);o!==i&&this.add(o)}},t}(Yc.SimpleOuterSubscriber)});var iv=f(Zc=>{"use strict";Object.defineProperty(Zc,"__esModule",{value:!0});var aj=ru();function cj(r){return function(t){return t.lift(new aj.CombineLatestOperator(r))}}Zc.combineAll=cj});var ov=f(Kc=>{"use strict";Object.defineProperty(Kc,"__esModule",{value:!0});var fj=$(),lj=ru(),hj=Ae();function pj(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=null;return typeof r[r.length-1]=="function"&&(e=r.pop()),r.length===1&&fj.isArray(r[0])&&(r=r[0].slice()),function(n){return n.lift.call(hj.from([n].concat(r)),new lj.CombineLatestOperator(e))}}Kc.combineLatest=pj});var uv=f(Gc=>{"use strict";Object.defineProperty(Gc,"__esModule",{value:!0});var _j=Yn();function dj(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return function(e){return e.lift.call(_j.concat.apply(void 0,[e].concat(r)))}}Gc.concat=dj});var Xc=f(Qc=>{"use strict";Object.defineProperty(Qc,"__esModule",{value:!0});var vj=zn();function bj(r,t){return vj.mergeMap(r,t,1)}Qc.concatMap=bj});var sv=f(Jc=>{"use strict";Object.defineProperty(Jc,"__esModule",{value:!0});var yj=Xc();function mj(r,t){return yj.concatMap(function(){return r},t)}Jc.concatMapTo=mj});var av=f(ii=>{"use strict";var Oj=ii&&ii.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(ii,"__esModule",{value:!0});var gj=g();function Sj(r){return function(t){return t.lift(new Ej(r,t))}}ii.count=Sj;var Ej=function(){function r(t,e){this.predicate=t,this.source=e}return r.prototype.call=function(t,e){return e.subscribe(new wj(t,this.predicate,this.source))},r}(),wj=function(r){Oj(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.predicate=n,o.source=i,o.count=0,o.index=0,o}return t.prototype._next=function(e){this.predicate?this._tryPredicate(e):this.count++},t.prototype._tryPredicate=function(e){var n;try{n=this.predicate(e,this.index++,this.source)}catch(i){this.destination.error(i);return}n&&this.count++},t.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},t}(gj.Subscriber)});var cv=f(oi=>{"use strict";var Tj=oi&&oi.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(oi,"__esModule",{value:!0});var $c=k();function Pj(r){return function(t){return t.lift(new Cj(r))}}oi.debounce=Pj;var Cj=function(){function r(t){this.durationSelector=t}return r.prototype.call=function(t,e){return e.subscribe(new Ij(t,this.durationSelector))},r}(),Ij=function(r){Tj(t,r);function t(e,n){var i=r.call(this,e)||this;return i.durationSelector=n,i.hasValue=!1,i}return t.prototype._next=function(e){try{var n=this.durationSelector.call(this,e);n&&this._tryNext(e,n)}catch(i){this.destination.error(i)}},t.prototype._complete=function(){this.emitValue(),this.destination.complete()},t.prototype._tryNext=function(e,n){var i=this.durationSubscription;this.value=e,this.hasValue=!0,i&&(i.unsubscribe(),this.remove(i)),i=$c.innerSubscribe(n,new $c.SimpleInnerSubscriber(this)),i&&!i.closed&&this.add(this.durationSubscription=i)},t.prototype.notifyNext=function(){this.emitValue()},t.prototype.notifyComplete=function(){this.emitValue()},t.prototype.emitValue=function(){if(this.hasValue){var e=this.value,n=this.durationSubscription;n&&(this.durationSubscription=void 0,n.unsubscribe(),this.remove(n)),this.value=void 0,this.hasValue=!1,r.prototype._next.call(this,e)}},t}($c.SimpleOuterSubscriber)});var fv=f(ui=>{"use strict";var Rj=ui&&ui.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(ui,"__esModule",{value:!0});var Aj=g(),jj=ee();function qj(r,t){return t===void 0&&(t=jj.async),function(e){return e.lift(new Nj(r,t))}}ui.debounceTime=qj;var Nj=function(){function r(t,e){this.dueTime=t,this.scheduler=e}return r.prototype.call=function(t,e){return e.subscribe(new xj(t,this.dueTime,this.scheduler))},r}(),xj=function(r){Rj(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.dueTime=n,o.scheduler=i,o.debouncedSubscription=null,o.lastValue=null,o.hasValue=!1,o}return t.prototype._next=function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Dj,this.dueTime,this))},t.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},t.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var e=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}},t.prototype.clearDebounce=function(){var e=this.debouncedSubscription;e!==null&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)},t}(Aj.Subscriber);function Dj(r){r.debouncedNext()}});var Dr=f(si=>{"use strict";var Mj=si&&si.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(si,"__esModule",{value:!0});var kj=g();function Uj(r){return r===void 0&&(r=null),function(t){return t.lift(new Lj(r))}}si.defaultIfEmpty=Uj;var Lj=function(){function r(t){this.defaultValue=t}return r.prototype.call=function(t,e){return e.subscribe(new Fj(t,this.defaultValue))},r}(),Fj=function(r){Mj(t,r);function t(e,n){var i=r.call(this,e)||this;return i.defaultValue=n,i.isEmpty=!0,i}return t.prototype._next=function(e){this.isEmpty=!1,this.destination.next(e)},t.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},t}(kj.Subscriber)});var tf=f(ef=>{"use strict";Object.defineProperty(ef,"__esModule",{value:!0});function Bj(r){return r instanceof Date&&!isNaN(+r)}ef.isDate=Bj});var hv=f(ai=>{"use strict";var Vj=ai&&ai.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(ai,"__esModule",{value:!0});var Wj=ee(),Hj=tf(),zj=g(),lv=jn();function Yj(r,t){t===void 0&&(t=Wj.async);var e=Hj.isDate(r),n=e?+r-t.now():Math.abs(r);return function(i){return i.lift(new Zj(n,t))}}ai.delay=Yj;var Zj=function(){function r(t,e){this.delay=t,this.scheduler=e}return r.prototype.call=function(t,e){return e.subscribe(new Kj(t,this.delay,this.scheduler))},r}(),Kj=function(r){Vj(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.delay=n,o.scheduler=i,o.queue=[],o.active=!1,o.errored=!1,o}return t.dispatch=function(e){for(var n=e.source,i=n.queue,o=e.scheduler,u=e.destination;i.length>0&&i[0].time-o.now()<=0;)i.shift().notification.observe(u);if(i.length>0){var s=Math.max(0,i[0].time-o.now());this.schedule(e,s)}else this.unsubscribe(),n.active=!1},t.prototype._schedule=function(e){this.active=!0;var n=this.destination;n.add(e.schedule(t.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))},t.prototype.scheduleNotification=function(e){if(this.errored!==!0){var n=this.scheduler,i=new Gj(n.now()+this.delay,e);this.queue.push(i),this.active===!1&&this._schedule(n)}},t.prototype._next=function(e){this.scheduleNotification(lv.Notification.createNext(e))},t.prototype._error=function(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.scheduleNotification(lv.Notification.createComplete()),this.unsubscribe()},t}(zj.Subscriber),Gj=function(){function r(t,e){this.time=t,this.notification=e}return r}()});var _v=f(ci=>{"use strict";var rf=ci&&ci.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(ci,"__esModule",{value:!0});var Qj=g(),Xj=I(),Jj=ht(),$j=pt();function eq(r,t){return t?function(e){return new rq(e,t).lift(new pv(r))}:function(e){return e.lift(new pv(r))}}ci.delayWhen=eq;var pv=function(){function r(t){this.delayDurationSelector=t}return r.prototype.call=function(t,e){return e.subscribe(new tq(t,this.delayDurationSelector))},r}(),tq=function(r){rf(t,r);function t(e,n){var i=r.call(this,e)||this;return i.delayDurationSelector=n,i.completed=!1,i.delayNotifierSubscriptions=[],i.index=0,i}return t.prototype.notifyNext=function(e,n,i,o,u){this.destination.next(e),this.removeSubscription(u),this.tryComplete()},t.prototype.notifyError=function(e,n){this._error(e)},t.prototype.notifyComplete=function(e){var n=this.removeSubscription(e);n&&this.destination.next(n),this.tryComplete()},t.prototype._next=function(e){var n=this.index++;try{var i=this.delayDurationSelector(e,n);i&&this.tryDelay(i,e)}catch(o){this.destination.error(o)}},t.prototype._complete=function(){this.completed=!0,this.tryComplete(),this.unsubscribe()},t.prototype.removeSubscription=function(e){e.unsubscribe();var n=this.delayNotifierSubscriptions.indexOf(e);return n!==-1&&this.delayNotifierSubscriptions.splice(n,1),e.outerValue},t.prototype.tryDelay=function(e,n){var i=$j.subscribeToResult(this,e,n);if(i&&!i.closed){var o=this.destination;o.add(i),this.delayNotifierSubscriptions.push(i)}},t.prototype.tryComplete=function(){this.completed&&this.delayNotifierSubscriptions.length===0&&this.destination.complete()},t}(Jj.OuterSubscriber),rq=function(r){rf(t,r);function t(e,n){var i=r.call(this)||this;return i.source=e,i.subscriptionDelay=n,i}return t.prototype._subscribe=function(e){this.subscriptionDelay.subscribe(new nq(e,this.source))},t}(Xj.Observable),nq=function(r){rf(t,r);function t(e,n){var i=r.call(this)||this;return i.parent=e,i.source=n,i.sourceSubscribed=!1,i}return t.prototype._next=function(e){this.subscribeToSource()},t.prototype._error=function(e){this.unsubscribe(),this.parent.error(e)},t.prototype._complete=function(){this.unsubscribe(),this.subscribeToSource()},t.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},t}(Qj.Subscriber)});var dv=f(fi=>{"use strict";var iq=fi&&fi.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(fi,"__esModule",{value:!0});var oq=g();function uq(){return function(t){return t.lift(new sq)}}fi.dematerialize=uq;var sq=function(){function r(){}return r.prototype.call=function(t,e){return e.subscribe(new aq(t))},r}(),aq=function(r){iq(t,r);function t(e){return r.call(this,e)||this}return t.prototype._next=function(e){e.observe(this.destination)},t}(oq.Subscriber)});var bv=f(Mr=>{"use strict";var cq=Mr&&Mr.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Mr,"__esModule",{value:!0});var nf=k();function fq(r,t){return function(e){return e.lift(new lq(r,t))}}Mr.distinct=fq;var lq=function(){function r(t,e){this.keySelector=t,this.flushes=e}return r.prototype.call=function(t,e){return e.subscribe(new vv(t,this.keySelector,this.flushes))},r}(),vv=function(r){cq(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.keySelector=n,o.values=new Set,i&&o.add(nf.innerSubscribe(i,new nf.SimpleInnerSubscriber(o))),o}return t.prototype.notifyNext=function(){this.values.clear()},t.prototype.notifyError=function(e){this._error(e)},t.prototype._next=function(e){this.keySelector?this._useKeySelector(e):this._finalizeNext(e,e)},t.prototype._useKeySelector=function(e){var n,i=this.destination;try{n=this.keySelector(e)}catch(o){i.error(o);return}this._finalizeNext(n,e)},t.prototype._finalizeNext=function(e,n){var i=this.values;i.has(e)||(i.add(e),this.destination.next(n))},t}(nf.SimpleOuterSubscriber);Mr.DistinctSubscriber=vv});var of=f(li=>{"use strict";var hq=li&&li.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(li,"__esModule",{value:!0});var pq=g();function _q(r,t){return function(e){return e.lift(new dq(r,t))}}li.distinctUntilChanged=_q;var dq=function(){function r(t,e){this.compare=t,this.keySelector=e}return r.prototype.call=function(t,e){return e.subscribe(new vq(t,this.compare,this.keySelector))},r}(),vq=function(r){hq(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.keySelector=i,o.hasKey=!1,typeof n=="function"&&(o.compare=n),o}return t.prototype.compare=function(e,n){return e===n},t.prototype._next=function(e){var n;try{var i=this.keySelector;n=i?i(e):e}catch(s){return this.destination.error(s)}var o=!1;if(this.hasKey)try{var u=this.compare;o=u(this.key,n)}catch(s){return this.destination.error(s)}else this.hasKey=!0;o||(this.key=n,this.destination.next(e))},t}(pq.Subscriber)});var yv=f(uf=>{"use strict";Object.defineProperty(uf,"__esModule",{value:!0});var bq=of();function yq(r,t){return bq.distinctUntilChanged(function(e,n){return t?t(e[r],n[r]):e[r]===n[r]})}uf.distinctUntilKeyChanged=yq});var pi=f(hi=>{"use strict";var mq=hi&&hi.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(hi,"__esModule",{value:!0});var Oq=jr(),gq=g();function Sq(r){return r===void 0&&(r=Tq),function(t){return t.lift(new Eq(r))}}hi.throwIfEmpty=Sq;var Eq=function(){function r(t){this.errorFactory=t}return r.prototype.call=function(t,e){return e.subscribe(new wq(t,this.errorFactory))},r}(),wq=function(r){mq(t,r);function t(e,n){var i=r.call(this,e)||this;return i.errorFactory=n,i.hasValue=!1,i}return t.prototype._next=function(e){this.hasValue=!0,this.destination.next(e)},t.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var e=void 0;try{e=this.errorFactory()}catch(n){e=n}this.destination.error(e)},t}(gq.Subscriber);function Tq(){return new Oq.EmptyError}});var hu=f(_i=>{"use strict";var Pq=_i&&_i.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(_i,"__esModule",{value:!0});var Cq=g(),Iq=Ar(),Rq=Ie();function Aq(r){return function(t){return r===0?Rq.empty():t.lift(new jq(r))}}_i.take=Aq;var jq=function(){function r(t){if(this.total=t,this.total<0)throw new Iq.ArgumentOutOfRangeError}return r.prototype.call=function(t,e){return e.subscribe(new qq(t,this.total))},r}(),qq=function(r){Pq(t,r);function t(e,n){var i=r.call(this,e)||this;return i.total=n,i.count=0,i}return t.prototype._next=function(e){var n=this.total,i=++this.count;i<=n&&(this.destination.next(e),i===n&&(this.destination.complete(),this.unsubscribe()))},t}(Cq.Subscriber)});var Ov=f(sf=>{"use strict";Object.defineProperty(sf,"__esModule",{value:!0});var mv=Ar(),Nq=qt(),xq=pi(),Dq=Dr(),Mq=hu();function kq(r,t){if(r<0)throw new mv.ArgumentOutOfRangeError;var e=arguments.length>=2;return function(n){return n.pipe(Nq.filter(function(i,o){return o===r}),Mq.take(1),e?Dq.defaultIfEmpty(t):xq.throwIfEmpty(function(){return new mv.ArgumentOutOfRangeError}))}}sf.elementAt=kq});var gv=f(af=>{"use strict";Object.defineProperty(af,"__esModule",{value:!0});var Uq=Yn(),Lq=Rn();function Fq(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return function(e){return Uq.concat(e,Lq.of.apply(void 0,r))}}af.endWith=Fq});var Sv=f(di=>{"use strict";var Bq=di&&di.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(di,"__esModule",{value:!0});var Vq=g();function Wq(r,t){return function(e){return e.lift(new Hq(r,t,e))}}di.every=Wq;var Hq=function(){function r(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}return r.prototype.call=function(t,e){return e.subscribe(new zq(t,this.predicate,this.thisArg,this.source))},r}(),zq=function(r){Bq(t,r);function t(e,n,i,o){var u=r.call(this,e)||this;return u.predicate=n,u.thisArg=i,u.source=o,u.index=0,u.thisArg=i||u,u}return t.prototype.notifyComplete=function(e){this.destination.next(e),this.destination.complete()},t.prototype._next=function(e){var n=!1;try{n=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(i){this.destination.error(i);return}n||this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(Vq.Subscriber)});var Ev=f(vi=>{"use strict";var Yq=vi&&vi.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(vi,"__esModule",{value:!0});var cf=k();function Zq(){return function(r){return r.lift(new Kq)}}vi.exhaust=Zq;var Kq=function(){function r(){}return r.prototype.call=function(t,e){return e.subscribe(new Gq(t))},r}(),Gq=function(r){Yq(t,r);function t(e){var n=r.call(this,e)||this;return n.hasCompleted=!1,n.hasSubscription=!1,n}return t.prototype._next=function(e){this.hasSubscription||(this.hasSubscription=!0,this.add(cf.innerSubscribe(e,new cf.SimpleInnerSubscriber(this))))},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},t.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(cf.SimpleOuterSubscriber)});var Tv=f(bi=>{"use strict";var Qq=bi&&bi.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(bi,"__esModule",{value:!0});var Xq=_e(),Jq=Ae(),ff=k();function wv(r,t){return t?function(e){return e.pipe(wv(function(n,i){return Jq.from(r(n,i)).pipe(Xq.map(function(o,u){return t(n,o,i,u)}))}))}:function(e){return e.lift(new $q(r))}}bi.exhaustMap=wv;var $q=function(){function r(t){this.project=t}return r.prototype.call=function(t,e){return e.subscribe(new eN(t,this.project))},r}(),eN=function(r){Qq(t,r);function t(e,n){var i=r.call(this,e)||this;return i.project=n,i.hasSubscription=!1,i.hasCompleted=!1,i.index=0,i}return t.prototype._next=function(e){this.hasSubscription||this.tryNext(e)},t.prototype.tryNext=function(e){var n,i=this.index++;try{n=this.project(e,i)}catch(o){this.destination.error(o);return}this.hasSubscription=!0,this._innerSub(n)},t.prototype._innerSub=function(e){var n=new ff.SimpleInnerSubscriber(this),i=this.destination;i.add(n);var o=ff.innerSubscribe(e,n);o!==n&&i.add(o)},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(ff.SimpleOuterSubscriber)});var Iv=f(Dt=>{"use strict";var tN=Dt&&Dt.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Dt,"__esModule",{value:!0});var lf=k();function rN(r,t,e){return t===void 0&&(t=Number.POSITIVE_INFINITY),t=(t||0)<1?Number.POSITIVE_INFINITY:t,function(n){return n.lift(new Pv(r,t,e))}}Dt.expand=rN;var Pv=function(){function r(t,e,n){this.project=t,this.concurrent=e,this.scheduler=n}return r.prototype.call=function(t,e){return e.subscribe(new Cv(t,this.project,this.concurrent,this.scheduler))},r}();Dt.ExpandOperator=Pv;var Cv=function(r){tN(t,r);function t(e,n,i,o){var u=r.call(this,e)||this;return u.project=n,u.concurrent=i,u.scheduler=o,u.index=0,u.active=0,u.hasCompleted=!1,i<Number.POSITIVE_INFINITY&&(u.buffer=[]),u}return t.dispatch=function(e){var n=e.subscriber,i=e.result,o=e.value,u=e.index;n.subscribeToProjection(i,o,u)},t.prototype._next=function(e){var n=this.destination;if(n.closed){this._complete();return}var i=this.index++;if(this.active<this.concurrent){n.next(e);try{var o=this.project,u=o(e,i);if(!this.scheduler)this.subscribeToProjection(u,e,i);else{var s={subscriber:this,result:u,value:e,index:i},c=this.destination;c.add(this.scheduler.schedule(t.dispatch,0,s))}}catch(a){n.error(a)}}else this.buffer.push(e)},t.prototype.subscribeToProjection=function(e,n,i){this.active++;var o=this.destination;o.add(lf.innerSubscribe(e,new lf.SimpleInnerSubscriber(this)))},t.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&this.active===0&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this._next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e&&e.length>0&&this._next(e.shift()),this.hasCompleted&&this.active===0&&this.destination.complete()},t}(lf.SimpleOuterSubscriber);Dt.ExpandSubscriber=Cv});var Rv=f(yi=>{"use strict";var nN=yi&&yi.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(yi,"__esModule",{value:!0});var iN=g(),oN=Y();function uN(r){return function(t){return t.lift(new sN(r))}}yi.finalize=uN;var sN=function(){function r(t){this.callback=t}return r.prototype.call=function(t,e){return e.subscribe(new aN(t,this.callback))},r}(),aN=function(r){nN(t,r);function t(e,n){var i=r.call(this,e)||this;return i.add(new oN.Subscription(n)),i}return t}(iN.Subscriber)});var hf=f(Mt=>{"use strict";var cN=Mt&&Mt.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Mt,"__esModule",{value:!0});var fN=g();function lN(r,t){if(typeof r!="function")throw new TypeError("predicate is not a function");return function(e){return e.lift(new Av(r,e,!1,t))}}Mt.find=lN;var Av=function(){function r(t,e,n,i){this.predicate=t,this.source=e,this.yieldIndex=n,this.thisArg=i}return r.prototype.call=function(t,e){return e.subscribe(new jv(t,this.predicate,this.source,this.yieldIndex,this.thisArg))},r}();Mt.FindValueOperator=Av;var jv=function(r){cN(t,r);function t(e,n,i,o,u){var s=r.call(this,e)||this;return s.predicate=n,s.source=i,s.yieldIndex=o,s.thisArg=u,s.index=0,s}return t.prototype.notifyComplete=function(e){var n=this.destination;n.next(e),n.complete(),this.unsubscribe()},t.prototype._next=function(e){var n=this,i=n.predicate,o=n.thisArg,u=this.index++;try{var s=i.call(o||this,e,u,this.source);s&&this.notifyComplete(this.yieldIndex?u:e)}catch(c){this.destination.error(c)}},t.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},t}(fN.Subscriber);Mt.FindValueSubscriber=jv});var qv=f(pf=>{"use strict";Object.defineProperty(pf,"__esModule",{value:!0});var hN=hf();function pN(r,t){return function(e){return e.lift(new hN.FindValueOperator(r,e,!0,t))}}pf.findIndex=pN});var Nv=f(_f=>{"use strict";Object.defineProperty(_f,"__esModule",{value:!0});var _N=jr(),dN=qt(),vN=hu(),bN=Dr(),yN=pi(),mN=ft();function ON(r,t){var e=arguments.length>=2;return function(n){return n.pipe(r?dN.filter(function(i,o){return r(i,o,n)}):mN.identity,vN.take(1),e?bN.defaultIfEmpty(t):yN.throwIfEmpty(function(){return new _N.EmptyError}))}}_f.first=ON});var xv=f(mi=>{"use strict";var gN=mi&&mi.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(mi,"__esModule",{value:!0});var SN=g();function EN(){return function(t){return t.lift(new wN)}}mi.ignoreElements=EN;var wN=function(){function r(){}return r.prototype.call=function(t,e){return e.subscribe(new TN(t))},r}(),TN=function(r){gN(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype._next=function(e){},t}(SN.Subscriber)});var Dv=f(Oi=>{"use strict";var PN=Oi&&Oi.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Oi,"__esModule",{value:!0});var CN=g();function IN(){return function(r){return r.lift(new RN)}}Oi.isEmpty=IN;var RN=function(){function r(){}return r.prototype.call=function(t,e){return e.subscribe(new AN(t))},r}(),AN=function(r){PN(t,r);function t(e){return r.call(this,e)||this}return t.prototype.notifyComplete=function(e){var n=this.destination;n.next(e),n.complete()},t.prototype._next=function(e){this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(CN.Subscriber)});var pu=f(gi=>{"use strict";var jN=gi&&gi.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(gi,"__esModule",{value:!0});var qN=g(),NN=Ar(),xN=Ie();function DN(r){return function(e){return r===0?xN.empty():e.lift(new MN(r))}}gi.takeLast=DN;var MN=function(){function r(t){if(this.total=t,this.total<0)throw new NN.ArgumentOutOfRangeError}return r.prototype.call=function(t,e){return e.subscribe(new kN(t,this.total))},r}(),kN=function(r){jN(t,r);function t(e,n){var i=r.call(this,e)||this;return i.total=n,i.ring=new Array,i.count=0,i}return t.prototype._next=function(e){var n=this.ring,i=this.total,o=this.count++;if(n.length<i)n.push(e);else{var u=o%i;n[u]=e}},t.prototype._complete=function(){var e=this.destination,n=this.count;if(n>0)for(var i=this.count>=this.total?this.total:this.count,o=this.ring,u=0;u<i;u++){var s=n++%i;e.next(o[s])}e.complete()},t}(qN.Subscriber)});var Mv=f(df=>{"use strict";Object.defineProperty(df,"__esModule",{value:!0});var UN=jr(),LN=qt(),FN=pu(),BN=pi(),VN=Dr(),WN=ft();function HN(r,t){var e=arguments.length>=2;return function(n){return n.pipe(r?LN.filter(function(i,o){return r(i,o,n)}):WN.identity,FN.takeLast(1),e?VN.defaultIfEmpty(t):BN.throwIfEmpty(function(){return new UN.EmptyError}))}}df.last=HN});var kv=f(Si=>{"use strict";var zN=Si&&Si.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Si,"__esModule",{value:!0});var YN=g();function ZN(r){return function(t){return t.lift(new KN(r))}}Si.mapTo=ZN;var KN=function(){function r(t){this.value=t}return r.prototype.call=function(t,e){return e.subscribe(new GN(t,this.value))},r}(),GN=function(r){zN(t,r);function t(e,n){var i=r.call(this,e)||this;return i.value=n,i}return t.prototype._next=function(e){this.destination.next(this.value)},t}(YN.Subscriber)});var Uv=f(Ei=>{"use strict";var QN=Ei&&Ei.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ei,"__esModule",{value:!0});var XN=g(),vf=jn();function JN(){return function(t){return t.lift(new $N)}}Ei.materialize=JN;var $N=function(){function r(){}return r.prototype.call=function(t,e){return e.subscribe(new ex(t))},r}(),ex=function(r){QN(t,r);function t(e){return r.call(this,e)||this}return t.prototype._next=function(e){this.destination.next(vf.Notification.createNext(e))},t.prototype._error=function(e){var n=this.destination;n.next(vf.Notification.createError(e)),n.complete()},t.prototype._complete=function(){var e=this.destination;e.next(vf.Notification.createComplete()),e.complete()},t}(XN.Subscriber)});var _u=f(wi=>{"use strict";var tx=wi&&wi.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(wi,"__esModule",{value:!0});var rx=g();function nx(r,t){var e=!1;return arguments.length>=2&&(e=!0),function(i){return i.lift(new ix(r,t,e))}}wi.scan=nx;var ix=function(){function r(t,e,n){n===void 0&&(n=!1),this.accumulator=t,this.seed=e,this.hasSeed=n}return r.prototype.call=function(t,e){return e.subscribe(new ox(t,this.accumulator,this.seed,this.hasSeed))},r}(),ox=function(r){tx(t,r);function t(e,n,i,o){var u=r.call(this,e)||this;return u.accumulator=n,u._seed=i,u.hasSeed=o,u.index=0,u}return Object.defineProperty(t.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e},enumerable:!0,configurable:!0}),t.prototype._next=function(e){if(!this.hasSeed)this.seed=e,this.destination.next(e);else return this._tryNext(e)},t.prototype._tryNext=function(e){var n=this.index++,i;try{i=this.accumulator(this.seed,e,n)}catch(o){this.destination.error(o)}this.seed=i,this.destination.next(i)},t}(rx.Subscriber)});var Ti=f(bf=>{"use strict";Object.defineProperty(bf,"__esModule",{value:!0});var Lv=_u(),Fv=pu(),ux=Dr(),Bv=Yo();function sx(r,t){return arguments.length>=2?function(n){return Bv.pipe(Lv.scan(r,t),Fv.takeLast(1),ux.defaultIfEmpty(t))(n)}:function(n){return Bv.pipe(Lv.scan(function(i,o,u){return r(i,o,u+1)}),Fv.takeLast(1))(n)}}bf.reduce=sx});var Vv=f(yf=>{"use strict";Object.defineProperty(yf,"__esModule",{value:!0});var ax=Ti();function cx(r){var t=typeof r=="function"?function(e,n){return r(e,n)>0?e:n}:function(e,n){return e>n?e:n};return ax.reduce(t)}yf.max=cx});var Wv=f(mf=>{"use strict";Object.defineProperty(mf,"__esModule",{value:!0});var fx=Rc();function lx(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return function(e){return e.lift.call(fx.merge.apply(void 0,[e].concat(r)))}}mf.merge=lx});var zv=f(Of=>{"use strict";Object.defineProperty(Of,"__esModule",{value:!0});var Hv=zn();function hx(r,t,e){return e===void 0&&(e=Number.POSITIVE_INFINITY),typeof t=="function"?Hv.mergeMap(function(){return r},t,e):(typeof t=="number"&&(e=t),Hv.mergeMap(function(){return r},e))}Of.mergeMapTo=hx});var Kv=f(kt=>{"use strict";var px=kt&&kt.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(kt,"__esModule",{value:!0});var gf=k();function _x(r,t,e){return e===void 0&&(e=Number.POSITIVE_INFINITY),function(n){return n.lift(new Yv(r,t,e))}}kt.mergeScan=_x;var Yv=function(){function r(t,e,n){this.accumulator=t,this.seed=e,this.concurrent=n}return r.prototype.call=function(t,e){return e.subscribe(new Zv(t,this.accumulator,this.seed,this.concurrent))},r}();kt.MergeScanOperator=Yv;var Zv=function(r){px(t,r);function t(e,n,i,o){var u=r.call(this,e)||this;return u.accumulator=n,u.acc=i,u.concurrent=o,u.hasValue=!1,u.hasCompleted=!1,u.buffer=[],u.active=0,u.index=0,u}return t.prototype._next=function(e){if(this.active<this.concurrent){var n=this.index++,i=this.destination,o=void 0;try{var u=this.accumulator;o=u(this.acc,e,n)}catch(s){return i.error(s)}this.active++,this._innerSub(o)}else this.buffer.push(e)},t.prototype._innerSub=function(e){var n=new gf.SimpleInnerSubscriber(this),i=this.destination;i.add(n);var o=gf.innerSubscribe(e,n);o!==n&&i.add(o)},t.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&(this.hasValue===!1&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()},t.prototype.notifyNext=function(e){var n=this.destination;this.acc=e,this.hasValue=!0,n.next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):this.active===0&&this.hasCompleted&&(this.hasValue===!1&&this.destination.next(this.acc),this.destination.complete())},t}(gf.SimpleOuterSubscriber);kt.MergeScanSubscriber=Zv});var Gv=f(Sf=>{"use strict";Object.defineProperty(Sf,"__esModule",{value:!0});var dx=Ti();function vx(r){var t=typeof r=="function"?function(e,n){return r(e,n)<0?e:n}:function(e,n){return e<n?e:n};return dx.reduce(t)}Sf.min=vx});var Ut=f(du=>{"use strict";Object.defineProperty(du,"__esModule",{value:!0});var bx=Pa();function yx(r,t){return function(n){var i;if(typeof r=="function"?i=r:i=function(){return r},typeof t=="function")return n.lift(new Qv(i,t));var o=Object.create(n,bx.connectableObservableDescriptor);return o.source=n,o.subjectFactory=i,o}}du.multicast=yx;var Qv=function(){function r(t,e){this.subjectFactory=t,this.selector=e}return r.prototype.call=function(t,e){var n=this.selector,i=this.subjectFactory(),o=n(i).subscribe(t);return o.add(e.subscribe(i)),o},r}();du.MulticastOperator=Qv});var $v=f(kr=>{"use strict";var mx=kr&&kr.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(kr,"__esModule",{value:!0});var Ox=Ae(),Xv=$(),Ef=k();function gx(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return r.length===1&&Xv.isArray(r[0])&&(r=r[0]),function(e){return e.lift(new Jv(r))}}kr.onErrorResumeNext=gx;function Sx(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=void 0;return r.length===1&&Xv.isArray(r[0])&&(r=r[0]),e=r.shift(),Ox.from(e).lift(new Jv(r))}kr.onErrorResumeNextStatic=Sx;var Jv=function(){function r(t){this.nextSources=t}return r.prototype.call=function(t,e){return e.subscribe(new Ex(t,this.nextSources))},r}(),Ex=function(r){mx(t,r);function t(e,n){var i=r.call(this,e)||this;return i.destination=e,i.nextSources=n,i}return t.prototype.notifyError=function(){this.subscribeToNextSource()},t.prototype.notifyComplete=function(){this.subscribeToNextSource()},t.prototype._error=function(e){this.subscribeToNextSource(),this.unsubscribe()},t.prototype._complete=function(){this.subscribeToNextSource(),this.unsubscribe()},t.prototype.subscribeToNextSource=function(){var e=this.nextSources.shift();if(e){var n=new Ef.SimpleInnerSubscriber(this),i=this.destination;i.add(n);var o=Ef.innerSubscribe(e,n);o!==n&&i.add(o)}else this.destination.complete()},t}(Ef.SimpleOuterSubscriber)});var eb=f(Pi=>{"use strict";var wx=Pi&&Pi.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Pi,"__esModule",{value:!0});var Tx=g();function Px(){return function(r){return r.lift(new Cx)}}Pi.pairwise=Px;var Cx=function(){function r(){}return r.prototype.call=function(t,e){return e.subscribe(new Ix(t))},r}(),Ix=function(r){wx(t,r);function t(e){var n=r.call(this,e)||this;return n.hasPrev=!1,n}return t.prototype._next=function(e){var n;this.hasPrev?n=[this.prev,e]:this.hasPrev=!0,this.prev=e,n&&this.destination.next(n)},t}(Tx.Subscriber)});var rb=f(wf=>{"use strict";Object.defineProperty(wf,"__esModule",{value:!0});var Rx=xc(),tb=qt();function Ax(r,t){return function(e){return[tb.filter(r,t)(e),tb.filter(Rx.not(r,t))(e)]}}wf.partition=Ax});var nb=f(Tf=>{"use strict";Object.defineProperty(Tf,"__esModule",{value:!0});var jx=_e();function qx(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=r.length;if(e===0)throw new Error("list of properties cannot be empty.");return function(n){return jx.map(Nx(r,e))(n)}}Tf.pluck=qx;function Nx(r,t){var e=function(n){for(var i=n,o=0;o<t;o++){var u=i?.[r[o]];if(u!==void 0)i=u;else return}return i};return e}});var ub=f(Pf=>{"use strict";Object.defineProperty(Pf,"__esModule",{value:!0});var ib=Q(),ob=Ut();function xx(r){return r?ob.multicast(function(){return new ib.Subject},r):ob.multicast(new ib.Subject)}Pf.publish=xx});var sb=f(Cf=>{"use strict";Object.defineProperty(Cf,"__esModule",{value:!0});var Dx=Ra(),Mx=Ut();function kx(r){return function(t){return Mx.multicast(new Dx.BehaviorSubject(r))(t)}}Cf.publishBehavior=kx});var ab=f(If=>{"use strict";Object.defineProperty(If,"__esModule",{value:!0});var Ux=xn(),Lx=Ut();function Fx(){return function(r){return Lx.multicast(new Ux.AsyncSubject)(r)}}If.publishLast=Fx});var cb=f(Rf=>{"use strict";Object.defineProperty(Rf,"__esModule",{value:!0});var Bx=Jo(),Vx=Ut();function Wx(r,t,e,n){e&&typeof e!="function"&&(n=e);var i=typeof e=="function"?e:void 0,o=new Bx.ReplaySubject(r,t,n);return function(u){return Vx.multicast(function(){return o},i)(u)}}Rf.publishReplay=Wx});var fb=f(Af=>{"use strict";Object.defineProperty(Af,"__esModule",{value:!0});var Hx=$(),zx=Mc();function Yx(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return function(n){return r.length===1&&Hx.isArray(r[0])&&(r=r[0]),n.lift.call(zx.race.apply(void 0,[n].concat(r)))}}Af.race=Yx});var hb=f(Ci=>{"use strict";var Zx=Ci&&Ci.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ci,"__esModule",{value:!0});var Kx=g(),Gx=Ie();function Qx(r){return r===void 0&&(r=-1),function(t){return r===0?Gx.empty():r<0?t.lift(new lb(-1,t)):t.lift(new lb(r-1,t))}}Ci.repeat=Qx;var lb=function(){function r(t,e){this.count=t,this.source=e}return r.prototype.call=function(t,e){return e.subscribe(new Xx(t,this.count,this.source))},r}(),Xx=function(r){Zx(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.count=n,o.source=i,o}return t.prototype.complete=function(){if(!this.isStopped){var e=this,n=e.source,i=e.count;if(i===0)return r.prototype.complete.call(this);i>-1&&(this.count=i-1),n.subscribe(this._unsubscribeAndRecycle())}},t}(Kx.Subscriber)});var pb=f(Ii=>{"use strict";var Jx=Ii&&Ii.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ii,"__esModule",{value:!0});var $x=Q(),jf=k();function eD(r){return function(t){return t.lift(new tD(r))}}Ii.repeatWhen=eD;var tD=function(){function r(t){this.notifier=t}return r.prototype.call=function(t,e){return e.subscribe(new rD(t,this.notifier,e))},r}(),rD=function(r){Jx(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.notifier=n,o.source=i,o.sourceIsBeingSubscribedTo=!0,o}return t.prototype.notifyNext=function(){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},t.prototype.notifyComplete=function(){if(this.sourceIsBeingSubscribedTo===!1)return r.prototype.complete.call(this)},t.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return r.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next(void 0)}},t.prototype._unsubscribe=function(){var e=this,n=e.notifications,i=e.retriesSubscription;n&&(n.unsubscribe(),this.notifications=void 0),i&&(i.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},t.prototype._unsubscribeAndRecycle=function(){var e=this._unsubscribe;return this._unsubscribe=null,r.prototype._unsubscribeAndRecycle.call(this),this._unsubscribe=e,this},t.prototype.subscribeToRetries=function(){this.notifications=new $x.Subject;var e;try{var n=this.notifier;e=n(this.notifications)}catch{return r.prototype.complete.call(this)}this.retries=e,this.retriesSubscription=jf.innerSubscribe(e,new jf.SimpleInnerSubscriber(this))},t}(jf.SimpleOuterSubscriber)});var _b=f(Ri=>{"use strict";var nD=Ri&&Ri.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ri,"__esModule",{value:!0});var iD=g();function oD(r){return r===void 0&&(r=-1),function(t){return t.lift(new uD(r,t))}}Ri.retry=oD;var uD=function(){function r(t,e){this.count=t,this.source=e}return r.prototype.call=function(t,e){return e.subscribe(new sD(t,this.count,this.source))},r}(),sD=function(r){nD(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.count=n,o.source=i,o}return t.prototype.error=function(e){if(!this.isStopped){var n=this,i=n.source,o=n.count;if(o===0)return r.prototype.error.call(this,e);o>-1&&(this.count=o-1),i.subscribe(this._unsubscribeAndRecycle())}},t}(iD.Subscriber)});var db=f(Ai=>{"use strict";var aD=Ai&&Ai.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ai,"__esModule",{value:!0});var cD=Q(),qf=k();function fD(r){return function(t){return t.lift(new lD(r,t))}}Ai.retryWhen=fD;var lD=function(){function r(t,e){this.notifier=t,this.source=e}return r.prototype.call=function(t,e){return e.subscribe(new hD(t,this.notifier,this.source))},r}(),hD=function(r){aD(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.notifier=n,o.source=i,o}return t.prototype.error=function(e){if(!this.isStopped){var n=this.errors,i=this.retries,o=this.retriesSubscription;if(i)this.errors=void 0,this.retriesSubscription=void 0;else{n=new cD.Subject;try{var u=this.notifier;i=u(n)}catch(s){return r.prototype.error.call(this,s)}o=qf.innerSubscribe(i,new qf.SimpleInnerSubscriber(this))}this._unsubscribeAndRecycle(),this.errors=n,this.retries=i,this.retriesSubscription=o,n.next(e)}},t.prototype._unsubscribe=function(){var e=this,n=e.errors,i=e.retriesSubscription;n&&(n.unsubscribe(),this.errors=void 0),i&&(i.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},t.prototype.notifyNext=function(){var e=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=e,this.source.subscribe(this)},t}(qf.SimpleOuterSubscriber)});var vb=f(ji=>{"use strict";var pD=ji&&ji.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(ji,"__esModule",{value:!0});var Nf=k();function _D(r){return function(t){return t.lift(new dD(r))}}ji.sample=_D;var dD=function(){function r(t){this.notifier=t}return r.prototype.call=function(t,e){var n=new vD(t),i=e.subscribe(n);return i.add(Nf.innerSubscribe(this.notifier,new Nf.SimpleInnerSubscriber(n))),i},r}(),vD=function(r){pD(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.hasValue=!1,e}return t.prototype._next=function(e){this.value=e,this.hasValue=!0},t.prototype.notifyNext=function(){this.emitValue()},t.prototype.notifyComplete=function(){this.emitValue()},t.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},t}(Nf.SimpleOuterSubscriber)});var bb=f(qi=>{"use strict";var bD=qi&&qi.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(qi,"__esModule",{value:!0});var yD=g(),mD=ee();function OD(r,t){return t===void 0&&(t=mD.async),function(e){return e.lift(new gD(r,t))}}qi.sampleTime=OD;var gD=function(){function r(t,e){this.period=t,this.scheduler=e}return r.prototype.call=function(t,e){return e.subscribe(new SD(t,this.period,this.scheduler))},r}(),SD=function(r){bD(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.period=n,o.scheduler=i,o.hasValue=!1,o.add(i.schedule(ED,n,{subscriber:o,period:n})),o}return t.prototype._next=function(e){this.lastValue=e,this.hasValue=!0},t.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},t}(yD.Subscriber);function ED(r){var t=r.subscriber,e=r.period;t.notifyNext(),this.schedule(r,e)}});var Sb=f(Lt=>{"use strict";var yb=Lt&&Lt.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Lt,"__esModule",{value:!0});var mb=g();function wD(r,t){return function(e){return e.lift(new Ob(r,t))}}Lt.sequenceEqual=wD;var Ob=function(){function r(t,e){this.compareTo=t,this.comparator=e}return r.prototype.call=function(t,e){return e.subscribe(new gb(t,this.compareTo,this.comparator))},r}();Lt.SequenceEqualOperator=Ob;var gb=function(r){yb(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.compareTo=n,o.comparator=i,o._a=[],o._b=[],o._oneComplete=!1,o.destination.add(n.subscribe(new TD(e,o))),o}return t.prototype._next=function(e){this._oneComplete&&this._b.length===0?this.emit(!1):(this._a.push(e),this.checkValues())},t.prototype._complete=function(){this._oneComplete?this.emit(this._a.length===0&&this._b.length===0):this._oneComplete=!0,this.unsubscribe()},t.prototype.checkValues=function(){for(var e=this,n=e._a,i=e._b,o=e.comparator;n.length>0&&i.length>0;){var u=n.shift(),s=i.shift(),c=!1;try{c=o?o(u,s):u===s}catch(a){this.destination.error(a)}c||this.emit(!1)}},t.prototype.emit=function(e){var n=this.destination;n.next(e),n.complete()},t.prototype.nextB=function(e){this._oneComplete&&this._a.length===0?this.emit(!1):(this._b.push(e),this.checkValues())},t.prototype.completeB=function(){this._oneComplete?this.emit(this._a.length===0&&this._b.length===0):this._oneComplete=!0},t}(mb.Subscriber);Lt.SequenceEqualSubscriber=gb;var TD=function(r){yb(t,r);function t(e,n){var i=r.call(this,e)||this;return i.parent=n,i}return t.prototype._next=function(e){this.parent.nextB(e)},t.prototype._error=function(e){this.parent.error(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.completeB(),this.unsubscribe()},t}(mb.Subscriber)});var Eb=f(xf=>{"use strict";Object.defineProperty(xf,"__esModule",{value:!0});var PD=Ut(),CD=Ko(),ID=Q();function RD(){return new ID.Subject}function AD(){return function(r){return CD.refCount()(PD.multicast(RD)(r))}}xf.share=AD});var wb=f(Df=>{"use strict";Object.defineProperty(Df,"__esModule",{value:!0});var jD=Jo();function qD(r,t,e){var n;return r&&typeof r=="object"?n=r:n={bufferSize:r,windowTime:t,refCount:!1,scheduler:e},function(i){return i.lift(ND(n))}}Df.shareReplay=qD;function ND(r){var t=r.bufferSize,e=t===void 0?Number.POSITIVE_INFINITY:t,n=r.windowTime,i=n===void 0?Number.POSITIVE_INFINITY:n,o=r.refCount,u=r.scheduler,s,c=0,a,l=!1,h=!1;return function(y){c++;var O;!s||l?(l=!1,s=new jD.ReplaySubject(e,i,u),O=s.subscribe(this),a=y.subscribe({next:function(w){s.next(w)},error:function(w){l=!0,s.error(w)},complete:function(){h=!0,a=void 0,s.complete()}}),h&&(a=void 0)):O=s.subscribe(this),this.add(function(){c--,O.unsubscribe(),O=void 0,a&&!h&&o&&c===0&&(a.unsubscribe(),a=void 0,s=void 0)})}}});var Tb=f(Ni=>{"use strict";var xD=Ni&&Ni.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ni,"__esModule",{value:!0});var DD=g(),MD=jr();function kD(r){return function(t){return t.lift(new UD(r,t))}}Ni.single=kD;var UD=function(){function r(t,e){this.predicate=t,this.source=e}return r.prototype.call=function(t,e){return e.subscribe(new LD(t,this.predicate,this.source))},r}(),LD=function(r){xD(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.predicate=n,o.source=i,o.seenValue=!1,o.index=0,o}return t.prototype.applySingleValue=function(e){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=e)},t.prototype._next=function(e){var n=this.index++;this.predicate?this.tryNext(e,n):this.applySingleValue(e)},t.prototype.tryNext=function(e,n){try{this.predicate(e,n,this.source)&&this.applySingleValue(e)}catch(i){this.destination.error(i)}},t.prototype._complete=function(){var e=this.destination;this.index>0?(e.next(this.seenValue?this.singleValue:void 0),e.complete()):e.error(new MD.EmptyError)},t}(DD.Subscriber)});var Pb=f(xi=>{"use strict";var FD=xi&&xi.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(xi,"__esModule",{value:!0});var BD=g();function VD(r){return function(t){return t.lift(new WD(r))}}xi.skip=VD;var WD=function(){function r(t){this.total=t}return r.prototype.call=function(t,e){return e.subscribe(new HD(t,this.total))},r}(),HD=function(r){FD(t,r);function t(e,n){var i=r.call(this,e)||this;return i.total=n,i.count=0,i}return t.prototype._next=function(e){++this.count>this.total&&this.destination.next(e)},t}(BD.Subscriber)});var Ib=f(Di=>{"use strict";var zD=Di&&Di.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Di,"__esModule",{value:!0});var Cb=g(),YD=Ar();function ZD(r){return function(t){return t.lift(new KD(r))}}Di.skipLast=ZD;var KD=function(){function r(t){if(this._skipCount=t,this._skipCount<0)throw new YD.ArgumentOutOfRangeError}return r.prototype.call=function(t,e){return this._skipCount===0?e.subscribe(new Cb.Subscriber(t)):e.subscribe(new GD(t,this._skipCount))},r}(),GD=function(r){zD(t,r);function t(e,n){var i=r.call(this,e)||this;return i._skipCount=n,i._count=0,i._ring=new Array(n),i}return t.prototype._next=function(e){var n=this._skipCount,i=this._count++;if(i<n)this._ring[i]=e;else{var o=i%n,u=this._ring,s=u[o];u[o]=e,this.destination.next(s)}},t}(Cb.Subscriber)});var Rb=f(Mi=>{"use strict";var QD=Mi&&Mi.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Mi,"__esModule",{value:!0});var Mf=k();function XD(r){return function(t){return t.lift(new JD(r))}}Mi.skipUntil=XD;var JD=function(){function r(t){this.notifier=t}return r.prototype.call=function(t,e){return e.subscribe(new $D(t,this.notifier))},r}(),$D=function(r){QD(t,r);function t(e,n){var i=r.call(this,e)||this;i.hasValue=!1;var o=new Mf.SimpleInnerSubscriber(i);i.add(o),i.innerSubscription=o;var u=Mf.innerSubscribe(n,o);return u!==o&&(i.add(u),i.innerSubscription=u),i}return t.prototype._next=function(e){this.hasValue&&r.prototype._next.call(this,e)},t.prototype.notifyNext=function(){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},t.prototype.notifyComplete=function(){},t}(Mf.SimpleOuterSubscriber)});var Ab=f(ki=>{"use strict";var eM=ki&&ki.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(ki,"__esModule",{value:!0});var tM=g();function rM(r){return function(t){return t.lift(new nM(r))}}ki.skipWhile=rM;var nM=function(){function r(t){this.predicate=t}return r.prototype.call=function(t,e){return e.subscribe(new iM(t,this.predicate))},r}(),iM=function(r){eM(t,r);function t(e,n){var i=r.call(this,e)||this;return i.predicate=n,i.skipping=!0,i.index=0,i}return t.prototype._next=function(e){var n=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||n.next(e)},t.prototype.tryCallPredicate=function(e){try{var n=this.predicate(e,this.index++);this.skipping=Boolean(n)}catch(i){this.destination.error(i)}},t}(tM.Subscriber)});var qb=f(kf=>{"use strict";Object.defineProperty(kf,"__esModule",{value:!0});var jb=Yn(),oM=Re();function uM(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=r[r.length-1];return oM.isScheduler(e)?(r.pop(),function(n){return jb.concat(r,n,e)}):function(n){return jb.concat(r,n)}}kf.startWith=uM});var Nb=f(Ui=>{"use strict";var sM=Ui&&Ui.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ui,"__esModule",{value:!0});var aM=I(),Uf=Va(),cM=Zn(),fM=function(r){sM(t,r);function t(e,n,i){n===void 0&&(n=0),i===void 0&&(i=Uf.asap);var o=r.call(this)||this;return o.source=e,o.delayTime=n,o.scheduler=i,(!cM.isNumeric(n)||n<0)&&(o.delayTime=0),(!i||typeof i.schedule!="function")&&(o.scheduler=Uf.asap),o}return t.create=function(e,n,i){return n===void 0&&(n=0),i===void 0&&(i=Uf.asap),new t(e,n,i)},t.dispatch=function(e){var n=e.source,i=e.subscriber;return this.add(n.subscribe(i))},t.prototype._subscribe=function(e){var n=this.delayTime,i=this.source,o=this.scheduler;return o.schedule(t.dispatch,n,{source:i,subscriber:e})},t}(aM.Observable);Ui.SubscribeOnObservable=fM});var xb=f(Lf=>{"use strict";Object.defineProperty(Lf,"__esModule",{value:!0});var lM=Nb();function hM(r,t){return t===void 0&&(t=0),function(n){return n.lift(new pM(r,t))}}Lf.subscribeOn=hM;var pM=function(){function r(t,e){this.scheduler=t,this.delay=e}return r.prototype.call=function(t,e){return new lM.SubscribeOnObservable(e,this.delay,this.scheduler).subscribe(t)},r}()});var vu=f(Li=>{"use strict";var _M=Li&&Li.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Li,"__esModule",{value:!0});var dM=_e(),vM=Ae(),Ff=k();function Db(r,t){return typeof t=="function"?function(e){return e.pipe(Db(function(n,i){return vM.from(r(n,i)).pipe(dM.map(function(o,u){return t(n,o,i,u)}))}))}:function(e){return e.lift(new bM(r))}}Li.switchMap=Db;var bM=function(){function r(t){this.project=t}return r.prototype.call=function(t,e){return e.subscribe(new yM(t,this.project))},r}(),yM=function(r){_M(t,r);function t(e,n){var i=r.call(this,e)||this;return i.project=n,i.index=0,i}return t.prototype._next=function(e){var n,i=this.index++;try{n=this.project(e,i)}catch(o){this.destination.error(o);return}this._innerSub(n)},t.prototype._innerSub=function(e){var n=this.innerSubscription;n&&n.unsubscribe();var i=new Ff.SimpleInnerSubscriber(this),o=this.destination;o.add(i),this.innerSubscription=Ff.innerSubscribe(e,i),this.innerSubscription!==i&&o.add(this.innerSubscription)},t.prototype._complete=function(){var e=this.innerSubscription;(!e||e.closed)&&r.prototype._complete.call(this),this.unsubscribe()},t.prototype._unsubscribe=function(){this.innerSubscription=void 0},t.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&r.prototype._complete.call(this)},t.prototype.notifyNext=function(e){this.destination.next(e)},t}(Ff.SimpleOuterSubscriber)});var Mb=f(Bf=>{"use strict";Object.defineProperty(Bf,"__esModule",{value:!0});var mM=vu(),OM=ft();function gM(){return mM.switchMap(OM.identity)}Bf.switchAll=gM});var Ub=f(Vf=>{"use strict";Object.defineProperty(Vf,"__esModule",{value:!0});var kb=vu();function SM(r,t){return t?kb.switchMap(function(){return r},t):kb.switchMap(function(){return r})}Vf.switchMapTo=SM});var Lb=f(Fi=>{"use strict";var EM=Fi&&Fi.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Fi,"__esModule",{value:!0});var Wf=k();function wM(r){return function(t){return t.lift(new TM(r))}}Fi.takeUntil=wM;var TM=function(){function r(t){this.notifier=t}return r.prototype.call=function(t,e){var n=new PM(t),i=Wf.innerSubscribe(this.notifier,new Wf.SimpleInnerSubscriber(n));return i&&!n.seenValue?(n.add(i),e.subscribe(n)):n},r}(),PM=function(r){EM(t,r);function t(e){var n=r.call(this,e)||this;return n.seenValue=!1,n}return t.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},t.prototype.notifyComplete=function(){},t}(Wf.SimpleOuterSubscriber)});var Fb=f(Bi=>{"use strict";var CM=Bi&&Bi.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Bi,"__esModule",{value:!0});var IM=g();function RM(r,t){return t===void 0&&(t=!1),function(e){return e.lift(new AM(r,t))}}Bi.takeWhile=RM;var AM=function(){function r(t,e){this.predicate=t,this.inclusive=e}return r.prototype.call=function(t,e){return e.subscribe(new jM(t,this.predicate,this.inclusive))},r}(),jM=function(r){CM(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.predicate=n,o.inclusive=i,o.index=0,o}return t.prototype._next=function(e){var n=this.destination,i;try{i=this.predicate(e,this.index++)}catch(o){n.error(o);return}this.nextOrComplete(e,i)},t.prototype.nextOrComplete=function(e,n){var i=this.destination;Boolean(n)?i.next(e):(this.inclusive&&i.next(e),i.complete())},t}(IM.Subscriber)});var Bb=f(Vi=>{"use strict";var qM=Vi&&Vi.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Vi,"__esModule",{value:!0});var NM=g(),dt=tu(),xM=gr();function DM(r,t,e){return function(i){return i.lift(new MM(r,t,e))}}Vi.tap=DM;var MM=function(){function r(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}return r.prototype.call=function(t,e){return e.subscribe(new kM(t,this.nextOrObserver,this.error,this.complete))},r}(),kM=function(r){qM(t,r);function t(e,n,i,o){var u=r.call(this,e)||this;return u._tapNext=dt.noop,u._tapError=dt.noop,u._tapComplete=dt.noop,u._tapError=i||dt.noop,u._tapComplete=o||dt.noop,xM.isFunction(n)?(u._context=u,u._tapNext=n):n&&(u._context=n,u._tapNext=n.next||dt.noop,u._tapError=n.error||dt.noop,u._tapComplete=n.complete||dt.noop),u}return t.prototype._next=function(e){try{this._tapNext.call(this._context,e)}catch(n){this.destination.error(n);return}this.destination.next(e)},t.prototype._error=function(e){try{this._tapError.call(this._context,e)}catch(n){this.destination.error(n);return}this.destination.error(e)},t.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(e){this.destination.error(e);return}return this.destination.complete()},t}(NM.Subscriber)});var zf=f(Ft=>{"use strict";var UM=Ft&&Ft.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ft,"__esModule",{value:!0});var Hf=k();Ft.defaultThrottleConfig={leading:!0,trailing:!1};function LM(r,t){return t===void 0&&(t=Ft.defaultThrottleConfig),function(e){return e.lift(new FM(r,!!t.leading,!!t.trailing))}}Ft.throttle=LM;var FM=function(){function r(t,e,n){this.durationSelector=t,this.leading=e,this.trailing=n}return r.prototype.call=function(t,e){return e.subscribe(new BM(t,this.durationSelector,this.leading,this.trailing))},r}(),BM=function(r){UM(t,r);function t(e,n,i,o){var u=r.call(this,e)||this;return u.destination=e,u.durationSelector=n,u._leading=i,u._trailing=o,u._hasValue=!1,u}return t.prototype._next=function(e){this._hasValue=!0,this._sendValue=e,this._throttled||(this._leading?this.send():this.throttle(e))},t.prototype.send=function(){var e=this,n=e._hasValue,i=e._sendValue;n&&(this.destination.next(i),this.throttle(i)),this._hasValue=!1,this._sendValue=void 0},t.prototype.throttle=function(e){var n=this.tryDurationSelector(e);n&&this.add(this._throttled=Hf.innerSubscribe(n,new Hf.SimpleInnerSubscriber(this)))},t.prototype.tryDurationSelector=function(e){try{return this.durationSelector(e)}catch(n){return this.destination.error(n),null}},t.prototype.throttlingDone=function(){var e=this,n=e._throttled,i=e._trailing;n&&n.unsubscribe(),this._throttled=void 0,i&&this.send()},t.prototype.notifyNext=function(){this.throttlingDone()},t.prototype.notifyComplete=function(){this.throttlingDone()},t}(Hf.SimpleOuterSubscriber)});var Vb=f(Wi=>{"use strict";var VM=Wi&&Wi.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Wi,"__esModule",{value:!0});var WM=g(),HM=ee(),zM=zf();function YM(r,t,e){return t===void 0&&(t=HM.async),e===void 0&&(e=zM.defaultThrottleConfig),function(n){return n.lift(new ZM(r,t,e.leading,e.trailing))}}Wi.throttleTime=YM;var ZM=function(){function r(t,e,n,i){this.duration=t,this.scheduler=e,this.leading=n,this.trailing=i}return r.prototype.call=function(t,e){return e.subscribe(new KM(t,this.duration,this.scheduler,this.leading,this.trailing))},r}(),KM=function(r){VM(t,r);function t(e,n,i,o,u){var s=r.call(this,e)||this;return s.duration=n,s.scheduler=i,s.leading=o,s.trailing=u,s._hasTrailingValue=!1,s._trailingValue=null,s}return t.prototype._next=function(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(GM,this.duration,{subscriber:this})),this.leading?this.destination.next(e):this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0))},t.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},t.prototype.clearThrottle=function(){var e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)},t}(WM.Subscriber);function GM(r){var t=r.subscriber;t.clearThrottle()}});var Hb=f(bu=>{"use strict";Object.defineProperty(bu,"__esModule",{value:!0});var QM=ee(),XM=_u(),JM=uu(),$M=_e();function ek(r){return r===void 0&&(r=QM.async),function(t){return JM.defer(function(){return t.pipe(XM.scan(function(e,n){var i=e.current;return{value:n,current:r.now(),last:i}},{current:r.now(),value:void 0,last:void 0}),$M.map(function(e){var n=e.current,i=e.last,o=e.value;return new Wb(o,n-i)}))})}}bu.timeInterval=ek;var Wb=function(){function r(t,e){this.value=t,this.interval=e}return r}();bu.TimeInterval=Wb});var Zf=f(Hi=>{"use strict";var tk=Hi&&Hi.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Hi,"__esModule",{value:!0});var rk=ee(),nk=tf(),Yf=k();function ik(r,t,e){return e===void 0&&(e=rk.async),function(n){var i=nk.isDate(r),o=i?+r-e.now():Math.abs(r);return n.lift(new ok(o,i,t,e))}}Hi.timeoutWith=ik;var ok=function(){function r(t,e,n,i){this.waitFor=t,this.absoluteTimeout=e,this.withObservable=n,this.scheduler=i}return r.prototype.call=function(t,e){return e.subscribe(new uk(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},r}(),uk=function(r){tk(t,r);function t(e,n,i,o,u){var s=r.call(this,e)||this;return s.absoluteTimeout=n,s.waitFor=i,s.withObservable=o,s.scheduler=u,s.scheduleTimeout(),s}return t.dispatchTimeout=function(e){var n=e.withObservable;e._unsubscribeAndRecycle(),e.add(Yf.innerSubscribe(n,new Yf.SimpleInnerSubscriber(e)))},t.prototype.scheduleTimeout=function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))},t.prototype._next=function(e){this.absoluteTimeout||this.scheduleTimeout(),r.prototype._next.call(this,e)},t.prototype._unsubscribe=function(){this.action=void 0,this.scheduler=null,this.withObservable=null},t}(Yf.SimpleOuterSubscriber)});var zb=f(Kf=>{"use strict";Object.defineProperty(Kf,"__esModule",{value:!0});var sk=ee(),ak=Ka(),ck=Zf(),fk=Xo();function lk(r,t){return t===void 0&&(t=sk.async),ck.timeoutWith(r,fk.throwError(new ak.TimeoutError),t)}Kf.timeout=lk});var Zb=f(yu=>{"use strict";Object.defineProperty(yu,"__esModule",{value:!0});var hk=ee(),pk=_e();function _k(r){return r===void 0&&(r=hk.async),pk.map(function(t){return new Yb(t,r.now())})}yu.timestamp=_k;var Yb=function(){function r(t,e){this.value=t,this.timestamp=e}return r}();yu.Timestamp=Yb});var Kb=f(Gf=>{"use strict";Object.defineProperty(Gf,"__esModule",{value:!0});var dk=Ti();function vk(r,t,e){return e===0?[t]:(r.push(t),r)}function bk(){return dk.reduce(vk,[])}Gf.toArray=bk});var Qb=f(zi=>{"use strict";var yk=zi&&zi.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(zi,"__esModule",{value:!0});var Gb=Q(),Qf=k();function mk(r){return function(e){return e.lift(new Ok(r))}}zi.window=mk;var Ok=function(){function r(t){this.windowBoundaries=t}return r.prototype.call=function(t,e){var n=new gk(t),i=e.subscribe(n);return i.closed||n.add(Qf.innerSubscribe(this.windowBoundaries,new Qf.SimpleInnerSubscriber(n))),i},r}(),gk=function(r){yk(t,r);function t(e){var n=r.call(this,e)||this;return n.window=new Gb.Subject,e.next(n.window),n}return t.prototype.notifyNext=function(){this.openWindow()},t.prototype.notifyError=function(e){this._error(e)},t.prototype.notifyComplete=function(){this._complete()},t.prototype._next=function(e){this.window.next(e)},t.prototype._error=function(e){this.window.error(e),this.destination.error(e)},t.prototype._complete=function(){this.window.complete(),this.destination.complete()},t.prototype._unsubscribe=function(){this.window=null},t.prototype.openWindow=function(){var e=this.window;e&&e.complete();var n=this.destination,i=this.window=new Gb.Subject;n.next(i)},t}(Qf.SimpleOuterSubscriber)});var Jb=f(Yi=>{"use strict";var Sk=Yi&&Yi.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Yi,"__esModule",{value:!0});var Ek=g(),Xb=Q();function wk(r,t){return t===void 0&&(t=0),function(n){return n.lift(new Tk(r,t))}}Yi.windowCount=wk;var Tk=function(){function r(t,e){this.windowSize=t,this.startWindowEvery=e}return r.prototype.call=function(t,e){return e.subscribe(new Pk(t,this.windowSize,this.startWindowEvery))},r}(),Pk=function(r){Sk(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.destination=e,o.windowSize=n,o.startWindowEvery=i,o.windows=[new Xb.Subject],o.count=0,e.next(o.windows[0]),o}return t.prototype._next=function(e){for(var n=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,i=this.destination,o=this.windowSize,u=this.windows,s=u.length,c=0;c<s&&!this.closed;c++)u[c].next(e);var a=this.count-o+1;if(a>=0&&a%n===0&&!this.closed&&u.shift().complete(),++this.count%n===0&&!this.closed){var l=new Xb.Subject;u.push(l),i.next(l)}},t.prototype._error=function(e){var n=this.windows;if(n)for(;n.length>0&&!this.closed;)n.shift().error(e);this.destination.error(e)},t.prototype._complete=function(){var e=this.windows;if(e)for(;e.length>0&&!this.closed;)e.shift().complete();this.destination.complete()},t.prototype._unsubscribe=function(){this.count=0,this.windows=null},t}(Ek.Subscriber)});var ry=f(Zi=>{"use strict";var ey=Zi&&Zi.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Zi,"__esModule",{value:!0});var Ck=Q(),Ik=ee(),Rk=g(),$b=Zn(),Xf=Re();function Ak(r){var t=Ik.async,e=null,n=Number.POSITIVE_INFINITY;return Xf.isScheduler(arguments[3])&&(t=arguments[3]),Xf.isScheduler(arguments[2])?t=arguments[2]:$b.isNumeric(arguments[2])&&(n=Number(arguments[2])),Xf.isScheduler(arguments[1])?t=arguments[1]:$b.isNumeric(arguments[1])&&(e=Number(arguments[1])),function(o){return o.lift(new jk(r,e,n,t))}}Zi.windowTime=Ak;var jk=function(){function r(t,e,n,i){this.windowTimeSpan=t,this.windowCreationInterval=e,this.maxWindowSize=n,this.scheduler=i}return r.prototype.call=function(t,e){return e.subscribe(new Nk(t,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},r}(),qk=function(r){ey(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e._numberOfNextedValues=0,e}return t.prototype.next=function(e){this._numberOfNextedValues++,r.prototype.next.call(this,e)},Object.defineProperty(t.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),t}(Ck.Subject),Nk=function(r){ey(t,r);function t(e,n,i,o,u){var s=r.call(this,e)||this;s.destination=e,s.windowTimeSpan=n,s.windowCreationInterval=i,s.maxWindowSize=o,s.scheduler=u,s.windows=[];var c=s.openWindow();if(i!==null&&i>=0){var a={subscriber:s,window:c,context:null},l={windowTimeSpan:n,windowCreationInterval:i,subscriber:s,scheduler:u};s.add(u.schedule(ty,n,a)),s.add(u.schedule(Dk,i,l))}else{var h={subscriber:s,window:c,windowTimeSpan:n};s.add(u.schedule(xk,n,h))}return s}return t.prototype._next=function(e){for(var n=this.windows,i=n.length,o=0;o<i;o++){var u=n[o];u.closed||(u.next(e),u.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(u))}},t.prototype._error=function(e){for(var n=this.windows;n.length>0;)n.shift().error(e);this.destination.error(e)},t.prototype._complete=function(){for(var e=this.windows;e.length>0;){var n=e.shift();n.closed||n.complete()}this.destination.complete()},t.prototype.openWindow=function(){var e=new qk;this.windows.push(e);var n=this.destination;return n.next(e),e},t.prototype.closeWindow=function(e){e.complete();var n=this.windows;n.splice(n.indexOf(e),1)},t}(Rk.Subscriber);function xk(r){var t=r.subscriber,e=r.windowTimeSpan,n=r.window;n&&t.closeWindow(n),r.window=t.openWindow(),this.schedule(r,e)}function Dk(r){var t=r.windowTimeSpan,e=r.subscriber,n=r.scheduler,i=r.windowCreationInterval,o=e.openWindow(),u=this,s={action:u,subscription:null},c={subscriber:e,window:o,context:s};s.subscription=n.schedule(ty,t,c),u.add(s.subscription),u.schedule(r,i)}function ty(r){var t=r.subscriber,e=r.window,n=r.context;n&&n.action&&n.subscription&&n.action.remove(n.subscription),t.closeWindow(e)}});var iy=f(Ki=>{"use strict";var Mk=Ki&&Ki.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Ki,"__esModule",{value:!0});var kk=Q(),Uk=Y(),Lk=ht(),ny=pt();function Fk(r,t){return function(e){return e.lift(new Bk(r,t))}}Ki.windowToggle=Fk;var Bk=function(){function r(t,e){this.openings=t,this.closingSelector=e}return r.prototype.call=function(t,e){return e.subscribe(new Vk(t,this.openings,this.closingSelector))},r}(),Vk=function(r){Mk(t,r);function t(e,n,i){var o=r.call(this,e)||this;return o.openings=n,o.closingSelector=i,o.contexts=[],o.add(o.openSubscription=ny.subscribeToResult(o,n,n)),o}return t.prototype._next=function(e){var n=this.contexts;if(n)for(var i=n.length,o=0;o<i;o++)n[o].window.next(e)},t.prototype._error=function(e){var n=this.contexts;if(this.contexts=null,n)for(var i=n.length,o=-1;++o<i;){var u=n[o];u.window.error(e),u.subscription.unsubscribe()}r.prototype._error.call(this,e)},t.prototype._complete=function(){var e=this.contexts;if(this.contexts=null,e)for(var n=e.length,i=-1;++i<n;){var o=e[i];o.window.complete(),o.subscription.unsubscribe()}r.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.contexts;if(this.contexts=null,e)for(var n=e.length,i=-1;++i<n;){var o=e[i];o.window.unsubscribe(),o.subscription.unsubscribe()}},t.prototype.notifyNext=function(e,n,i,o,u){if(e===this.openings){var s=void 0;try{var c=this.closingSelector;s=c(n)}catch(y){return this.error(y)}var a=new kk.Subject,l=new Uk.Subscription,h={window:a,subscription:l};this.contexts.push(h);var p=ny.subscribeToResult(this,s,h);p.closed?this.closeWindow(this.contexts.length-1):(p.context=h,l.add(p)),this.destination.next(a)}else this.closeWindow(this.contexts.indexOf(e))},t.prototype.notifyError=function(e){this.error(e)},t.prototype.notifyComplete=function(e){e!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(e.context))},t.prototype.closeWindow=function(e){if(e!==-1){var n=this.contexts,i=n[e],o=i.window,u=i.subscription;n.splice(e,1),o.complete(),u.unsubscribe()}},t}(Lk.OuterSubscriber)});var oy=f(Gi=>{"use strict";var Wk=Gi&&Gi.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Gi,"__esModule",{value:!0});var Hk=Q(),zk=ht(),Yk=pt();function Zk(r){return function(e){return e.lift(new Kk(r))}}Gi.windowWhen=Zk;var Kk=function(){function r(t){this.closingSelector=t}return r.prototype.call=function(t,e){return e.subscribe(new Gk(t,this.closingSelector))},r}(),Gk=function(r){Wk(t,r);function t(e,n){var i=r.call(this,e)||this;return i.destination=e,i.closingSelector=n,i.openWindow(),i}return t.prototype.notifyNext=function(e,n,i,o,u){this.openWindow(u)},t.prototype.notifyError=function(e){this._error(e)},t.prototype.notifyComplete=function(e){this.openWindow(e)},t.prototype._next=function(e){this.window.next(e)},t.prototype._error=function(e){this.window.error(e),this.destination.error(e),this.unsubscribeClosingNotification()},t.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},t.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},t.prototype.openWindow=function(e){e===void 0&&(e=null),e&&(this.remove(e),e.unsubscribe());var n=this.window;n&&n.complete();var i=this.window=new Hk.Subject;this.destination.next(i);var o;try{var u=this.closingSelector;o=u()}catch(s){this.destination.error(s),this.window.error(s);return}this.add(this.closingNotification=Yk.subscribeToResult(this,o))},t}(zk.OuterSubscriber)});var uy=f(Qi=>{"use strict";var Qk=Qi&&Qi.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(t,e)};return function(t,e){r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Qi,"__esModule",{value:!0});var Xk=ht(),Jk=pt();function $k(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return function(e){var n;typeof r[r.length-1]=="function"&&(n=r.pop());var i=r;return e.lift(new eU(i,n))}}Qi.withLatestFrom=$k;var eU=function(){function r(t,e){this.observables=t,this.project=e}return r.prototype.call=function(t,e){return e.subscribe(new tU(t,this.observables,this.project))},r}(),tU=function(r){Qk(t,r);function t(e,n,i){var o=r.call(this,e)||this;o.observables=n,o.project=i,o.toRespond=[];var u=n.length;o.values=new Array(u);for(var s=0;s<u;s++)o.toRespond.push(s);for(var s=0;s<u;s++){var c=n[s];o.add(Jk.subscribeToResult(o,c,void 0,s))}return o}return t.prototype.notifyNext=function(e,n,i){this.values[i]=n;var o=this.toRespond;if(o.length>0){var u=o.indexOf(i);u!==-1&&o.splice(u,1)}},t.prototype.notifyComplete=function(){},t.prototype._next=function(e){if(this.toRespond.length===0){var n=[e].concat(this.values);this.project?this._tryProject(n):this.destination.next(n)}},t.prototype._tryProject=function(e){var n;try{n=this.project.apply(this,e)}catch(i){this.destination.error(i);return}this.destination.next(n)},t}(Xk.OuterSubscriber)});var sy=f(Jf=>{"use strict";Object.defineProperty(Jf,"__esModule",{value:!0});var rU=lu();function nU(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return function(n){return n.lift.call(rU.zip.apply(void 0,[n].concat(r)))}}Jf.zip=nU});var ay=f($f=>{"use strict";Object.defineProperty($f,"__esModule",{value:!0});var iU=lu();function oU(r){return function(t){return t.lift(new iU.ZipOperator(r))}}$f.zipAll=oU});var mu=f(v=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0});var uU=Vc();v.audit=uU.audit;var sU=Yd();v.auditTime=sU.auditTime;var aU=Zd();v.buffer=aU.buffer;var cU=Qd();v.bufferCount=cU.bufferCount;var fU=$d();v.bufferTime=fU.bufferTime;var lU=tv();v.bufferToggle=lU.bufferToggle;var hU=rv();v.bufferWhen=hU.bufferWhen;var pU=nv();v.catchError=pU.catchError;var _U=iv();v.combineAll=_U.combineAll;var dU=ov();v.combineLatest=dU.combineLatest;var vU=uv();v.concat=vU.concat;var bU=yc();v.concatAll=bU.concatAll;var yU=Xc();v.concatMap=yU.concatMap;var mU=sv();v.concatMapTo=mU.concatMapTo;var OU=av();v.count=OU.count;var gU=cv();v.debounce=gU.debounce;var SU=fv();v.debounceTime=SU.debounceTime;var EU=Dr();v.defaultIfEmpty=EU.defaultIfEmpty;var wU=hv();v.delay=wU.delay;var TU=_v();v.delayWhen=TU.delayWhen;var PU=dv();v.dematerialize=PU.dematerialize;var CU=bv();v.distinct=CU.distinct;var IU=of();v.distinctUntilChanged=IU.distinctUntilChanged;var RU=yv();v.distinctUntilKeyChanged=RU.distinctUntilKeyChanged;var AU=Ov();v.elementAt=AU.elementAt;var jU=gv();v.endWith=jU.endWith;var qU=Sv();v.every=qU.every;var NU=Ev();v.exhaust=NU.exhaust;var xU=Tv();v.exhaustMap=xU.exhaustMap;var DU=Iv();v.expand=DU.expand;var MU=qt();v.filter=MU.filter;var kU=Rv();v.finalize=kU.finalize;var UU=hf();v.find=UU.find;var LU=qv();v.findIndex=LU.findIndex;var FU=Nv();v.first=FU.first;var BU=Ia();v.groupBy=BU.groupBy;var VU=xv();v.ignoreElements=VU.ignoreElements;var WU=Dv();v.isEmpty=WU.isEmpty;var HU=Mv();v.last=HU.last;var zU=_e();v.map=zU.map;var YU=kv();v.mapTo=YU.mapTo;var ZU=Uv();v.materialize=ZU.materialize;var KU=Vv();v.max=KU.max;var GU=Wv();v.merge=GU.merge;var QU=ou();v.mergeAll=QU.mergeAll;var cy=zn();v.mergeMap=cy.mergeMap;v.flatMap=cy.flatMap;var XU=zv();v.mergeMapTo=XU.mergeMapTo;var JU=Kv();v.mergeScan=JU.mergeScan;var $U=Gv();v.min=$U.min;var eL=Ut();v.multicast=eL.multicast;var tL=Ba();v.observeOn=tL.observeOn;var rL=$v();v.onErrorResumeNext=rL.onErrorResumeNext;var nL=eb();v.pairwise=nL.pairwise;var iL=rb();v.partition=iL.partition;var oL=nb();v.pluck=oL.pluck;var uL=ub();v.publish=uL.publish;var sL=sb();v.publishBehavior=sL.publishBehavior;var aL=ab();v.publishLast=aL.publishLast;var cL=cb();v.publishReplay=cL.publishReplay;var fL=fb();v.race=fL.race;var lL=Ti();v.reduce=lL.reduce;var hL=hb();v.repeat=hL.repeat;var pL=pb();v.repeatWhen=pL.repeatWhen;var _L=_b();v.retry=_L.retry;var dL=db();v.retryWhen=dL.retryWhen;var vL=Ko();v.refCount=vL.refCount;var bL=vb();v.sample=bL.sample;var yL=bb();v.sampleTime=yL.sampleTime;var mL=_u();v.scan=mL.scan;var OL=Sb();v.sequenceEqual=OL.sequenceEqual;var gL=Eb();v.share=gL.share;var SL=wb();v.shareReplay=SL.shareReplay;var EL=Tb();v.single=EL.single;var wL=Pb();v.skip=wL.skip;var TL=Ib();v.skipLast=TL.skipLast;var PL=Rb();v.skipUntil=PL.skipUntil;var CL=Ab();v.skipWhile=CL.skipWhile;var IL=qb();v.startWith=IL.startWith;var RL=xb();v.subscribeOn=RL.subscribeOn;var AL=Mb();v.switchAll=AL.switchAll;var jL=vu();v.switchMap=jL.switchMap;var qL=Ub();v.switchMapTo=qL.switchMapTo;var NL=hu();v.take=NL.take;var xL=pu();v.takeLast=xL.takeLast;var DL=Lb();v.takeUntil=DL.takeUntil;var ML=Fb();v.takeWhile=ML.takeWhile;var kL=Bb();v.tap=kL.tap;var UL=zf();v.throttle=UL.throttle;var LL=Vb();v.throttleTime=LL.throttleTime;var FL=pi();v.throwIfEmpty=FL.throwIfEmpty;var BL=Hb();v.timeInterval=BL.timeInterval;var VL=zb();v.timeout=VL.timeout;var WL=Zf();v.timeoutWith=WL.timeoutWith;var HL=Zb();v.timestamp=HL.timestamp;var zL=Kb();v.toArray=zL.toArray;var YL=Qb();v.window=YL.window;var ZL=Jb();v.windowCount=ZL.windowCount;var KL=ry();v.windowTime=KL.windowTime;var GL=iy();v.windowToggle=GL.windowToggle;var QL=oy();v.windowWhen=QL.windowWhen;var XL=uy();v.withLatestFrom=XL.withLatestFrom;var JL=sy();v.zip=JL.zip;var $L=ay();v.zipAll=$L.zipAll});var gu=f(Ou=>{"use strict";var fy=gt();Object.defineProperty(Ou,"__esModule",{value:!0});Ou.default=void 0;var eF=fy(or()),tF=fy(ur()),rF=P(),Xi=Qn(),Bt=mu(),Ji={READY:0,STREAMING:1,COMPLETED:2},nF=function(){function r(t){(0,eF.default)(this,r);var e=t.pipe((0,Bt.publishReplay)(1),(0,Bt.refCount)());this._result=e,this._keys=e.pipe((0,Bt.flatMap)(function(n){return(0,Xi.from)(n.keys())}),(0,Bt.publishReplay)(1),(0,Bt.refCount)()),this._records=new Xi.Subject,this._summary=new Xi.ReplaySubject,this._state=Ji.READY}return(0,tF.default)(r,[{key:"keys",value:function(){return this._keys}},{key:"records",value:function(){var e=this;return this._result.pipe((0,Bt.flatMap)(function(n){return new Xi.Observable(function(i){return e._startStreaming({result:n,recordsObserver:i})})}))}},{key:"consume",value:function(){var e=this;return this._result.pipe((0,Bt.flatMap)(function(n){return new Xi.Observable(function(i){return e._startStreaming({result:n,summaryObserver:i})})}))}},{key:"_startStreaming",value:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.result,o=n.recordsObserver,u=o===void 0?null:o,s=n.summaryObserver,c=s===void 0?null:s,a=[];return c&&a.push(this._summary.subscribe(c)),this._state<Ji.STREAMING?(this._state=Ji.STREAMING,u&&a.push(this._records.subscribe(u)),a.push({unsubscribe:function(){i._cancel&&i._cancel()}}),this._records.observers.length===0&&i._cancel(),i.subscribe({onNext:function(h){e._records.next(h)},onCompleted:function(h){e._records.complete(),e._summary.next(h),e._summary.complete(),e._state=Ji.COMPLETED},onError:function(h){e._records.error(h),e._summary.error(h),e._state=Ji.COMPLETED}})):u&&u.error((0,rF.newError)("Streaming has already started/consumed with a previous records or summary subscription.")),function(){a.forEach(function(l){return l.unsubscribe()})}}}]),r}();Ou.default=nF});var el=f(wu=>{"use strict";var Eu=gt();Object.defineProperty(wu,"__esModule",{value:!0});wu.default=void 0;var iF=Eu(or()),oF=Eu(ur()),Su=Qn(),uF=Eu(gu()),TY=Eu(P()),sF=function(){function r(t){(0,iF.default)(this,r),this._txc=t}return(0,oF.default)(r,[{key:"run",value:function(e,n){var i=this;return new uF.default(new Su.Observable(function(o){try{o.next(i._txc.run(e,n)),o.complete()}catch(u){o.error(u)}return function(){}}))}},{key:"commit",value:function(){var e=this;return new Su.Observable(function(n){e._txc.commit().then(function(){n.complete()}).catch(function(i){return n.error(i)})})}},{key:"rollback",value:function(){var e=this;return new Su.Observable(function(n){e._txc.rollback().then(function(){n.complete()}).catch(function(i){return n.error(i)})})}},{key:"close",value:function(){var e=this;return new Su.Observable(function(n){e._txc.close().then(function(){n.complete()}).catch(function(i){return n.error(i)})})}}]),r}();wu.default=sF});var vy=f(Pu=>{"use strict";var dy=gt();Object.defineProperty(Pu,"__esModule",{value:!0});Pu.default=void 0;var aF=dy(or()),cF=dy(ur()),$i=P(),tl=Qn(),rl=mu(),CY=$i.internal.logger.Logger,fF=$i.internal.retryStrategy.canRetryOn,lF=$i.error.SERVICE_UNAVAILABLE,IY=$i.error.SESSION_EXPIRED,ly=30*1e3,hy=1e3,py=2,_y=.2,hF=function(){function r(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.maxRetryTimeout,n=e===void 0?ly:e,i=t.initialDelay,o=i===void 0?hy:i,u=t.delayMultiplier,s=u===void 0?py:u,c=t.delayJitter,a=c===void 0?_y:c,l=t.logger,h=l===void 0?null:l;(0,aF.default)(this,r),this._maxRetryTimeout=Tu(n,ly),this._initialDelay=Tu(o,hy),this._delayMultiplier=Tu(s,py),this._delayJitter=Tu(a,_y),this._logger=h}return(0,cF.default)(r,[{key:"retry",value:function(e){var n=this;return e.pipe((0,rl.retryWhen)(function(i){var o=[],u=Date.now(),s=1,c=n._initialDelay;return i.pipe((0,rl.flatMap)(function(a){if(!fF(a))return(0,tl.throwError)(a);if(o.push(a),s>=2&&Date.now()-u>=n._maxRetryTimeout){var l=(0,$i.newError)("Failed after retried for ".concat(s," times in ").concat(n._maxRetryTimeout," ms. Make sure that your database is online and retry again."),lF);return l.seenErrors=o,(0,tl.throwError)(l)}var h=n._computeNextDelay(c);return c=c*n._delayMultiplier,s++,n._logger&&n._logger.warn("Transaction failed and will be retried in ".concat(h)),(0,tl.of)(1).pipe((0,rl.delay)(h))}))}))}},{key:"_computeNextDelay",value:function(e){var n=e*this._delayJitter;return e-n+2*n*Math.random()}}]),r}();Pu.default=hF;function Tu(r,t){return r||r===0?r:t}});var nl=f(Ru=>{"use strict";var eo=gt();Object.defineProperty(Ru,"__esModule",{value:!0});Ru.default=void 0;var pF=eo(or()),_F=eo(ur()),Ur=Qn(),Cu=mu(),dF=eo(gu()),by=P(),vF=eo(el()),bF=eo(vy()),yy=by.internal.constants,yF=yy.ACCESS_MODE_READ,mF=yy.ACCESS_MODE_WRITE,Iu=by.internal.txConfig.TxConfig,OF=function(){function r(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.session,n=t.config;(0,pF.default)(this,r),this._session=e,this._retryLogic=gF(n)}return(0,_F.default)(r,[{key:"run",value:function(e,n,i){var o=this;return new dF.default(new Ur.Observable(function(u){try{u.next(o._session.run(e,n,i)),u.complete()}catch(s){u.error(s)}return function(){}}))}},{key:"beginTransaction",value:function(e){return this._beginTransaction(this._session._mode,e)}},{key:"readTransaction",value:function(e,n){return this._runTransaction(yF,e,n)}},{key:"writeTransaction",value:function(e,n){return this._runTransaction(mF,e,n)}},{key:"close",value:function(){var e=this;return new Ur.Observable(function(n){e._session.close().then(function(){n.complete()}).catch(function(i){return n.error(i)})})}},{key:"lastBookmark",value:function(){return this._session.lastBookmark()}},{key:"_beginTransaction",value:function(e,n){var i=this,o=Iu.empty();return n&&(o=new Iu(n)),new Ur.Observable(function(u){try{u.next(new vF.default(i._session._beginTransaction(e,o))),u.complete()}catch(s){u.error(s)}return function(){}})}},{key:"_runTransaction",value:function(e,n,i){var o=Iu.empty();return i&&(o=new Iu(i)),this._retryLogic.retry(this._beginTransaction(e,i).pipe((0,Cu.flatMap)(function(u){return(0,Ur.defer)(function(){try{return n(u)}catch(s){return(0,Ur.throwError)(s)}}).pipe((0,Cu.catchError)(function(s){return u.rollback().pipe((0,Cu.concat)((0,Ur.throwError)(s)))}),(0,Cu.concat)(u.commit()))})))}}]),r}();Ru.default=OF;function gF(r){var t=r&&r.maxTransactionRetryTime?r.maxTransactionRetryTime:null;return new bF.default({maxRetryTimeout:t})}});var Ey=f(Ue=>{"use strict";var Lr=gt();Object.defineProperty(Ue,"__esModule",{value:!0});Ue.default=Ue.WRITE=Ue.READ=Ue.Driver=void 0;var SF=Lr(or()),EF=Lr(ur()),wF=Lr(lh()),TF=Lr(ph()),my=Lr(_h()),Au=P(),PF=Lr(nl());function CF(r){var t=IF();return function(){var n=(0,my.default)(r),i;if(t){var o=(0,my.default)(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return(0,TF.default)(this,i)}}function IF(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Oy=Au.internal.constants.FETCH_ALL,RF=Au.driver.READ,gy=Au.driver.WRITE;Ue.WRITE=gy;Ue.READ=RF;var Sy=function(r){(0,wF.default)(e,r);var t=CF(e);function e(){return(0,SF.default)(this,e),t.apply(this,arguments)}return(0,EF.default)(e,[{key:"rxSession",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=i.defaultAccessMode,u=o===void 0?gy:o,s=i.bookmarks,c=i.database,a=c===void 0?"":c,l=i.fetchSize,h=i.impersonatedUser;return new PF.default({session:this._newSession({defaultAccessMode:u,bookmarkOrBookmarks:s,database:a,impersonatedUser:h,reactive:!0,fetchSize:AF(l,this._config.fetchSize)}),config:this._config})}}]),e}(Au.Driver);Ue.Driver=Sy;function AF(r,t){var e=parseInt(r,10);if(e>0||e===Oy)return e;if(e===0||e<0)throw new Error("The fetch size can only be a positive value or ".concat(Oy," for ALL. However fetchSize = ").concat(e));return t}var jF=Sy;Ue.default=jF});var wy=f(ju=>{"use strict";Object.defineProperty(ju,"__esModule",{value:!0});ju.default=void 0;var qF="4.4.11";ju.default=qF});var ol=f(il=>{"use strict";Object.defineProperty(il,"__esModule",{value:!0});var NF=function(){function r(){}return r.prototype.selectReader=function(t){throw new Error("Abstract function")},r.prototype.selectWriter=function(t){throw new Error("Abstract function")},r}();il.default=NF});var Ty=f(ul=>{"use strict";Object.defineProperty(ul,"__esModule",{value:!0});var xF=function(){function r(t){this._offset=t||0}return r.prototype.next=function(t){if(t===0)return-1;var e=this._offset;return this._offset+=1,this._offset===Number.MAX_SAFE_INTEGER&&(this._offset=0),e%t},r}();ul.default=xF});var Iy=f(Vt=>{"use strict";var DF=Vt&&Vt.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Cy=Vt&&Vt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Vt,"__esModule",{value:!0});var Py=Cy(Ty()),MF=Cy(ol()),kF=function(r){DF(t,r);function t(e){var n=r.call(this)||this;return n._readersIndex=new Py.default,n._writersIndex=new Py.default,n._connectionPool=e,n}return t.prototype.selectReader=function(e){return this._select(e,this._readersIndex)},t.prototype.selectWriter=function(e){return this._select(e,this._writersIndex)},t.prototype._select=function(e,n){var i=e.length;if(i===0)return null;var o=n.next(i),u=o,s=null,c=Number.MAX_SAFE_INTEGER;do{var a=e[u],l=this._connectionPool.activeResourceCount(a);l<c&&(s=a,c=l),u===i-1?u=0:u++}while(u!==o);return s},t}(MF.default);Vt.default=kF});var sl=f(Qe=>{"use strict";var Ry=Qe&&Qe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Qe,"__esModule",{value:!0});Qe.LeastConnectedLoadBalancingStrategy=Qe.LoadBalancingStrategy=void 0;var UF=Ry(ol());Qe.LoadBalancingStrategy=UF.default;var Ay=Ry(Iy());Qe.LeastConnectedLoadBalancingStrategy=Ay.default;Qe.default=Ay.default});var al=f(to=>{"use strict";var LF=to&&to.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(to,"__esModule",{value:!0});var jy=function(){function r(t){this.position=0,this.length=t}return r.prototype.getUInt8=function(t){throw new Error("Not implemented")},r.prototype.getInt8=function(t){throw new Error("Not implemented")},r.prototype.getFloat64=function(t){throw new Error("Not implemented")},r.prototype.putUInt8=function(t,e){throw new Error("Not implemented")},r.prototype.putInt8=function(t,e){throw new Error("Not implemented")},r.prototype.putFloat64=function(t,e){throw new Error("Not implemented")},r.prototype.getInt16=function(t){return this.getInt8(t)<<8|this.getUInt8(t+1)},r.prototype.getUInt16=function(t){return this.getUInt8(t)<<8|this.getUInt8(t+1)},r.prototype.getInt32=function(t){return this.getInt8(t)<<24|this.getUInt8(t+1)<<16|this.getUInt8(t+2)<<8|this.getUInt8(t+3)},r.prototype.getUInt32=function(t){return this.getUInt8(t)<<24|this.getUInt8(t+1)<<16|this.getUInt8(t+2)<<8|this.getUInt8(t+3)},r.prototype.getInt64=function(t){return this.getInt8(t)<<56|this.getUInt8(t+1)<<48|this.getUInt8(t+2)<<40|this.getUInt8(t+3)<<32|this.getUInt8(t+4)<<24|this.getUInt8(t+5)<<16|this.getUInt8(t+6)<<8|this.getUInt8(t+7)},r.prototype.getSlice=function(t,e){return new FF(t,e,this)},r.prototype.putInt16=function(t,e){this.putInt8(t,e>>8),this.putUInt8(t+1,e&255)},r.prototype.putUInt16=function(t,e){this.putUInt8(t,e>>8&255),this.putUInt8(t+1,e&255)},r.prototype.putInt32=function(t,e){this.putInt8(t,e>>24),this.putUInt8(t+1,e>>16&255),this.putUInt8(t+2,e>>8&255),this.putUInt8(t+3,e&255)},r.prototype.putUInt32=function(t,e){this.putUInt8(t,e>>24&255),this.putUInt8(t+1,e>>16&255),this.putUInt8(t+2,e>>8&255),this.putUInt8(t+3,e&255)},r.prototype.putInt64=function(t,e){this.putInt8(t,e>>48),this.putUInt8(t+1,e>>42&255),this.putUInt8(t+2,e>>36&255),this.putUInt8(t+3,e>>30&255),this.putUInt8(t+4,e>>24&255),this.putUInt8(t+5,e>>16&255),this.putUInt8(t+6,e>>8&255),this.putUInt8(t+7,e&255)},r.prototype.putBytes=function(t,e){for(var n=0,i=e.remaining();n<i;n++)this.putUInt8(t+n,e.readUInt8())},r.prototype.readUInt8=function(){return this.getUInt8(this._updatePos(1))},r.prototype.readInt8=function(){return this.getInt8(this._updatePos(1))},r.prototype.readUInt16=function(){return this.getUInt16(this._updatePos(2))},r.prototype.readUInt32=function(){return this.getUInt32(this._updatePos(4))},r.prototype.readInt16=function(){return this.getInt16(this._updatePos(2))},r.prototype.readInt32=function(){return this.getInt32(this._updatePos(4))},r.prototype.readInt64=function(){return this.getInt32(this._updatePos(8))},r.prototype.readFloat64=function(){return this.getFloat64(this._updatePos(8))},r.prototype.writeUInt8=function(t){this.putUInt8(this._updatePos(1),t)},r.prototype.writeInt8=function(t){this.putInt8(this._updatePos(1),t)},r.prototype.writeInt16=function(t){this.putInt16(this._updatePos(2),t)},r.prototype.writeInt32=function(t){this.putInt32(this._updatePos(4),t)},r.prototype.writeUInt32=function(t){this.putUInt32(this._updatePos(4),t)},r.prototype.writeInt64=function(t){this.putInt64(this._updatePos(8),t)},r.prototype.writeFloat64=function(t){this.putFloat64(this._updatePos(8),t)},r.prototype.writeBytes=function(t){this.putBytes(this._updatePos(t.remaining()),t)},r.prototype.readSlice=function(t){return this.getSlice(this._updatePos(t),t)},r.prototype._updatePos=function(t){var e=this.position;return this.position+=t,e},r.prototype.remaining=function(){return this.length-this.position},r.prototype.hasRemaining=function(){return this.remaining()>0},r.prototype.reset=function(){this.position=0},r.prototype.toString=function(){return this.constructor.name+"( position="+this.position+` )
  `+this.toHex()},r.prototype.toHex=function(){for(var t="",e=0;e<this.length;e++){var n=this.getUInt8(e).toString(16);n.length===1&&(n="0"+n),t+=n,e!==this.length-1&&(t+=" ")}return t},r}();to.default=jy;var FF=function(r){LF(t,r);function t(e,n,i){var o=r.call(this,n)||this;return o._start=e,o._inner=i,o}return t.prototype.putUInt8=function(e,n){this._inner.putUInt8(this._start+e,n)},t.prototype.getUInt8=function(e){return this._inner.getUInt8(this._start+e)},t.prototype.putInt8=function(e,n){this._inner.putInt8(this._start+e,n)},t.prototype.putFloat64=function(e,n){this._inner.putFloat64(this._start+e,n)},t.prototype.getInt8=function(e){return this._inner.getInt8(this._start+e)},t.prototype.getFloat64=function(e){return this._inner.getFloat64(this._start+e)},t}(jy)});var qu=f(Wt=>{"use strict";var BF=Wt&&Wt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Wt,"__esModule",{value:!0});Wt.BaseBuffer=void 0;var qy=BF(al());Wt.BaseBuffer=qy.default;Wt.default=qy.default});var Fr=f(Xe=>{"use strict";var VF=Xe&&Xe.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Ny=Xe&&Xe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Xe,"__esModule",{value:!0});Xe.alloc=void 0;var Nu=Ny(require("buffer")),WF=Ny(qu()),xy=function(r){VF(t,r);function t(e){var n=this,i=zF(e);return n=r.call(this,i.length)||this,n._buffer=i,n}return t.prototype.getUInt8=function(e){return this._buffer.readUInt8(e)},t.prototype.getInt8=function(e){return this._buffer.readInt8(e)},t.prototype.getFloat64=function(e){return this._buffer.readDoubleBE(e)},t.prototype.putUInt8=function(e,n){this._buffer.writeUInt8(n,e)},t.prototype.putInt8=function(e,n){this._buffer.writeInt8(n,e)},t.prototype.putFloat64=function(e,n){this._buffer.writeDoubleBE(n,e)},t.prototype.putBytes=function(e,n){if(n instanceof t){var i=Math.min(n.length-n.position,this.length-e);n._buffer.copy(this._buffer,e,n.position,n.position+i),n.position+=i}else r.prototype.putBytes.call(this,e,n)},t.prototype.getSlice=function(e,n){return new t(this._buffer.slice(e,e+n))},t}(WF.default);Xe.default=xy;function HF(r){return new xy(r)}Xe.alloc=HF;function zF(r){return r instanceof Nu.default.Buffer?r:typeof r=="number"&&typeof Nu.default.Buffer.alloc=="function"?Nu.default.Buffer.alloc(r):new Nu.default.Buffer(r)}});var ky=f(no=>{"use strict";var Du=no&&no.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(no,"__esModule",{value:!0});var YF=Du(require("net")),cl=Du(require("tls")),ZF=Du(require("fs")),Dy=Du(Fr()),je=P(),ll=je.internal.util,ro=ll.ENCRYPTION_OFF,KF=ll.ENCRYPTION_ON,GF=ll.isEmptyObjectOrNull,QF=0,My={TRUST_CUSTOM_CA_SIGNED_CERTIFICATES:function(r,t,e){if(!r.trustedCertificates||r.trustedCertificates.length===0){e((0,je.newError)('You are using TRUST_CUSTOM_CA_SIGNED_CERTIFICATES as the method to verify trust for encrypted  connections, but have not configured any trustedCertificates. You  must specify the path to at least one trusted X.509 certificate for this to work. Two other alternatives is to use TRUST_ALL_CERTIFICATES or to disable encryption by setting encrypted="'+ro+'"in your driver configuration.'));return}var n=fl(r.address.host(),r.trustedCertificates.map(function(o){return ZF.default.readFileSync(o)})),i=cl.default.connect(r.address.port(),r.address.resolvedHost(),n,function(){i.authorized?t():e((0,je.newError)("Server certificate is not trusted. If you trust the database you are connecting to, add the signing certificate, or the server certificate, to the list of certificates trusted by this driver using `neo4j.driver(.., { trustedCertificates:['path/to/certificate.crt']}). This  is a security measure to protect against man-in-the-middle attacks. If you are just trying  Neo4j out and are not concerned about encryption, simply disable it using `encrypted=\""+ro+'"` in the driver options. Socket responded with: '+i.authorizationError))});return i.on("error",e),xu(i)},TRUST_SYSTEM_CA_SIGNED_CERTIFICATES:function(r,t,e){var n=fl(r.address.host()),i=cl.default.connect(r.address.port(),r.address.resolvedHost(),n,function(){i.authorized?t():e((0,je.newError)("Server certificate is not trusted. If you trust the database you are connecting to, use TRUST_CUSTOM_CA_SIGNED_CERTIFICATES and add the signing certificate, or the server certificate, to the list of certificates trusted by this driver using `neo4j.driver(.., { trustedCertificates:['path/to/certificate.crt']}). This  is a security measure to protect against man-in-the-middle attacks. If you are just trying  Neo4j out and are not concerned about encryption, simply disable it using `encrypted=\""+ro+'"` in the driver options. Socket responded with: '+i.authorizationError))});return i.on("error",e),xu(i)},TRUST_ALL_CERTIFICATES:function(r,t,e){var n=fl(r.address.host()),i=cl.default.connect(r.address.port(),r.address.resolvedHost(),n,function(){var o=i.getPeerCertificate();GF(o)?e((0,je.newError)('Secure connection was successful but server did not return any valid certificates. Such connection can not be trusted. If you are just trying  Neo4j out and are not concerned about encryption, simply disable it using `encrypted="'+ro+'"` in the driver options. Socket responded with: '+i.authorizationError)):t()});return i.on("error",e),xu(i)}};function XF(r,t,e){e===void 0&&(e=function(){return null});var n=$F(r);if(JF(r)){if(My[n])return My[n](r,t,e);e((0,je.newError)("Unknown trust strategy: "+r.trust+". Please use either trust:'TRUST_CUSTOM_CA_SIGNED_CERTIFICATES' or trust:'TRUST_ALL_CERTIFICATES' in your driver configuration. Alternatively, you can disable encryption by setting `encrypted:\""+ro+'"`. There is no mechanism to use encryption without trust verification, because this incurs the overhead of encryption without improving security. If the driver does not verify that the peer it is connected to is really Neo4j, it is very easy for an attacker to bypass the encryption by pretending to be Neo4j.'))}else{var i=YF.default.connect(r.address.port(),r.address.resolvedHost(),t);return i.on("error",e),xu(i)}}function JF(r){var t=r.encrypted==null||r.encrypted===void 0;return t?!1:r.encrypted===!0||r.encrypted===KF}function $F(r){return r.trust?r.trust:"TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"}function fl(r,t){return t===void 0&&(t=void 0),{rejectUnauthorized:!1,servername:r,ca:t}}function xu(r){return r.setKeepAlive(!0),r}var eB=function(){function r(t,e){e===void 0&&(e=XF);var n=this;this.id=QF++,this._pending=[],this._open=!0,this._error=null,this._handleConnectionError=this._handleConnectionError.bind(this),this._handleConnectionTerminated=this._handleConnectionTerminated.bind(this),this._connectionErrorCode=t.connectionErrorCode,this._receiveTimeout=null,this._receiveTimeoutStarted=!1,this._conn=e(t,function(){if(!!n._open){n._conn.on("data",function(u){n.onmessage&&n.onmessage(new Dy.default(u))}),n._conn.on("error",n._handleConnectionError),n._conn.on("end",n._handleConnectionTerminated);var i=n._pending;n._pending=null;for(var o=0;o<i.length;o++)n.write(i[o])}},this._handleConnectionError),this._setupConnectionTimeout(t,this._conn)}return r.prototype._handleConnectionError=function(t){var e="Failed to connect to server. Please ensure that your database is listening on the correct host and port and that you have compatible encryption settings both on Neo4j server and driver. Note that the default encryption setting has changed in Neo4j 4.0.";t.message&&(e+=" Caused by: "+t.message),this._error=(0,je.newError)(e,this._connectionErrorCode),this.onerror&&this.onerror(this._error)},r.prototype._handleConnectionTerminated=function(){this._open=!1,this._error=(0,je.newError)("Connection was closed by server",this._connectionErrorCode),this.onerror&&this.onerror(this._error)},r.prototype._setupConnectionTimeout=function(t,e){var n=this,i=t.connectionTimeout;if(i){var o=function(){e.setTimeout(0)},u=function(){e.setTimeout(0),e.destroy((0,je.newError)("Failed to establish connection in "+i+"ms",t.connectionErrorCode))};e.on("connect",o),e.on("timeout",u),this._removeConnectionTimeoutListeners=function(){n._conn.off("connect",o),n._conn.off("timeout",u)},e.setTimeout(i)}},r.prototype.setupReceiveTimeout=function(t){var e=this;this._removeConnectionTimeoutListeners&&this._removeConnectionTimeoutListeners(),this._conn.on("timeout",function(){e._conn.destroy((0,je.newError)("Connection lost. Server didn't respond in "+t+"ms",e._connectionErrorCode))}),this._receiveTimeout=t},r.prototype.stopReceiveTimeout=function(){this._receiveTimeout!==null&&this._receiveTimeoutStarted&&(this._receiveTimeoutStarted=!1,this._conn.setTimeout(0))},r.prototype.startReceiveTimeout=function(){this._receiveTimeout!==null&&!this._receiveTimeoutStarted&&(this._receiveTimeoutStarted=!0,this._conn.setTimeout(this._receiveTimeout))},r.prototype.write=function(t){if(this._pending!==null)this._pending.push(t);else if(t instanceof Dy.default)this._conn.write(t._buffer);else throw(0,je.newError)("Don't know how to write: "+t)},r.prototype.close=function(){var t=this;return new Promise(function(e,n){var i=function(){t._conn.destroyed||t._conn.destroy(),e()};t._open?(t._open=!1,t._conn.removeListener("end",t._handleConnectionTerminated),t._conn.on("end",function(){return i()}),t._conn.on("close",function(){return i()}),t._conn.end(),t._conn.destroy()):i()})},r}();no.default=eB});var Uy=f(Ht=>{"use strict";var tB=Ht&&Ht.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),rB=Ht&&Ht.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ht,"__esModule",{value:!0});var nB=rB(require("dns")),iB=P(),oB=iB.internal.resolver.BaseHostNameResolver,uB=function(r){tB(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.resolve=function(e){return new Promise(function(n){nB.default.lookup(e.host(),{all:!0},function(i,o){if(i)n([e]);else{var u=o.map(function(s){return e.resolveWith(s.address)});n(u)}})})},t}(oB);Ht.default=uB});var Fy=f(vt=>{"use strict";var Ly=vt&&vt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(vt,"__esModule",{value:!0});vt.HostNameResolver=vt.Channel=void 0;var sB=Ly(ky()),aB=Ly(Uy());vt.Channel=sB.default;vt.HostNameResolver=aB.default});var By=f(io=>{"use strict";var cB=io&&io.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(io,"__esModule",{value:!0});var fB=qu(),lB=Fr(),hB=function(r){cB(t,r);function t(e){for(var n=this,i=0,o=0;o<e.length;o++)i+=e[o].length;return n=r.call(this,i)||this,n._buffers=e,n}return t.prototype.getUInt8=function(e){for(var n=0;n<this._buffers.length;n++){var i=this._buffers[n];if(e>=i.length)e-=i.length;else return i.getUInt8(e)}},t.prototype.getInt8=function(e){for(var n=0;n<this._buffers.length;n++){var i=this._buffers[n];if(e>=i.length)e-=i.length;else return i.getInt8(e)}},t.prototype.getFloat64=function(e){for(var n=(0,lB.alloc)(8),i=0;i<8;i++)n.putUInt8(i,this.getUInt8(e+i));return n.getFloat64(0)},t}(fB.BaseBuffer);io.default=hB});var Hy=f(Le=>{"use strict";var pB=Le&&Le.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Wy=Le&&Le.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Le,"__esModule",{value:!0});Le.Dechunker=Le.Chunker=void 0;var _B=Wy(al()),Vy=Fr(),dB=Wy(By()),Mu=2,vB=0,bB=1400,yB=function(r){pB(t,r);function t(e,n){var i=r.call(this,0)||this;return i._bufferSize=n||bB,i._ch=e,i._buffer=(0,Vy.alloc)(i._bufferSize),i._currentChunkStart=0,i._chunkOpen=!1,i}return t.prototype.putUInt8=function(e,n){this._ensure(1),this._buffer.writeUInt8(n)},t.prototype.putInt8=function(e,n){this._ensure(1),this._buffer.writeInt8(n)},t.prototype.putFloat64=function(e,n){this._ensure(8),this._buffer.writeFloat64(n)},t.prototype.putBytes=function(e,n){for(;n.remaining()>0;)this._ensure(1),this._buffer.remaining()>n.remaining()?this._buffer.writeBytes(n):this._buffer.writeBytes(n.readSlice(this._buffer.remaining()));return this},t.prototype.flush=function(){if(this._buffer.position>0){this._closeChunkIfOpen();var e=this._buffer;this._buffer=null,this._ch.write(e.getSlice(0,e.position)),this._buffer=(0,Vy.alloc)(this._bufferSize),this._chunkOpen=!1}return this},t.prototype.messageBoundary=function(){this._closeChunkIfOpen(),this._buffer.remaining()<Mu&&this.flush(),this._buffer.writeInt16(vB)},t.prototype._ensure=function(e){var n=this._chunkOpen?e:e+Mu;this._buffer.remaining()<n&&this.flush(),this._chunkOpen||(this._currentChunkStart=this._buffer.position,this._buffer.position=this._buffer.position+Mu,this._chunkOpen=!0)},t.prototype._closeChunkIfOpen=function(){if(this._chunkOpen){var e=this._buffer.position-(this._currentChunkStart+Mu);this._buffer.putUInt16(this._currentChunkStart,e),this._chunkOpen=!1}},t}(_B.default);Le.Chunker=yB;var mB=function(){function r(){this._currentMessage=[],this._partialChunkHeader=0,this._state=this.AWAITING_CHUNK}return r.prototype.AWAITING_CHUNK=function(t){return t.remaining()>=2?this._onHeader(t.readUInt16()):(this._partialChunkHeader=t.readUInt8()<<8,this.IN_HEADER)},r.prototype.IN_HEADER=function(t){return this._onHeader((this._partialChunkHeader|t.readUInt8())&65535)},r.prototype.IN_CHUNK=function(t){return this._chunkSize<=t.remaining()?(this._currentMessage.push(t.readSlice(this._chunkSize)),this.AWAITING_CHUNK):(this._chunkSize-=t.remaining(),this._currentMessage.push(t.readSlice(t.remaining())),this.IN_CHUNK)},r.prototype.CLOSED=function(t){},r.prototype._onHeader=function(t){if(t===0){var e=void 0;switch(this._currentMessage.length){case 0:return this.AWAITING_CHUNK;case 1:e=this._currentMessage[0];break;default:e=new dB.default(this._currentMessage);break}return this._currentMessage=[],this.onmessage(e),this.AWAITING_CHUNK}else return this._chunkSize=t,this.IN_CHUNK},r.prototype.write=function(t){for(;t.hasRemaining();)this._state=this._state(t)},r}();Le.Dechunker=mB});var Ky=f(hl=>{"use strict";Object.defineProperty(hl,"__esModule",{value:!0});var ku=P(),Zy=ku.internal.util,OB=Zy.ENCRYPTION_OFF,gB=Zy.ENCRYPTION_ON,SB=ku.error.SERVICE_UNAVAILABLE,EB=3e4,zy=[null,void 0,!0,!1,gB,OB],Yy=[null,void 0,"TRUST_ALL_CERTIFICATES","TRUST_CUSTOM_CA_SIGNED_CERTIFICATES","TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"],wB=function(){function r(t,e,n){this.address=t,this.encrypted=TB(e),this.trust=PB(e),this.trustedCertificates=CB(e),this.knownHostsPath=IB(e),this.connectionErrorCode=n||SB,this.connectionTimeout=RB(e)}return r}();hl.default=wB;function TB(r){var t=r.encrypted;if(zy.indexOf(t)===-1)throw(0,ku.newError)("Illegal value of the encrypted setting "+t+". Expected one of "+zy);return t}function PB(r){var t=r.trust;if(Yy.indexOf(t)===-1)throw(0,ku.newError)("Illegal value of the trust setting "+t+". Expected one of "+Yy);return t}function CB(r){return r.trustedCertificates||[]}function IB(r){return r.knownHosts||null}function RB(r){var t=parseInt(r.connectionTimeout,10);return t===0||t&&t<0?null:t||EB}});var Xy=f(oo=>{"use strict";var Qy=oo&&oo.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(oo,"__esModule",{value:!0});var AB=Qy(Fr()),jB=P(),pl=Qy(require("buffer")),qB=require("string_decoder"),Gy=new qB.StringDecoder("utf8");function NB(r){return new AB.default(UB(r))}function xB(r,t){if(Object.prototype.hasOwnProperty.call(r,"_buffer"))return DB(r,t);if(Object.prototype.hasOwnProperty.call(r,"_buffers"))return MB(r,t);throw(0,jB.newError)("Don't know how to decode strings from '"+r+"'")}function DB(r,t){var e=r.position,n=e+t;return r.position=Math.min(n,r.length),r._buffer.toString("utf8",e,n)}function MB(r,t){return kB(r,t,function(e){return Gy.write(e._buffer)},function(){return Gy.end()})}function kB(r,t,e,n){var i=t,o=r.position;r._updatePos(Math.min(t,r.length-o));var u=r._buffers.reduce(function(s,c){if(i<=0)return s;if(o>=c.length)return o-=c.length,"";c._updatePos(o-c.position);var a=Math.min(c.length-o,i),l=c.readSlice(a);return c._updatePos(a),i=Math.max(i-l.length,0),o=0,s+e(l)},"");return u+n()}function UB(r){return typeof pl.default.Buffer.from=="function"?pl.default.Buffer.from(r,"utf8"):new pl.default.Buffer(r,"utf8")}oo.default={encode:NB,decode:xB}});var Br=f(X=>{"use strict";var LB=X&&X.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),Jy=X&&X.__exportStar||function(r,t){for(var e in r)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&LB(t,r,e)},$y=X&&X.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(X,"__esModule",{value:!0});X.utf8=X.alloc=X.ChannelConfig=void 0;Jy(Fy(),X);Jy(Hy(),X);var FB=Ky();Object.defineProperty(X,"ChannelConfig",{enumerable:!0,get:function(){return $y(FB).default}});var BB=Fr();Object.defineProperty(X,"alloc",{enumerable:!0,get:function(){return BB.alloc}});var VB=Xy();Object.defineProperty(X,"utf8",{enumerable:!0,get:function(){return $y(VB).default}})});var tm=f(_l=>{"use strict";Object.defineProperty(_l,"__esModule",{value:!0});var WB=Br(),em=P(),HB=1616949271;function uo(r,t){return{major:r,minor:t}}function zB(r){if(r.length>4)throw(0,em.newError)("It should not have more than 4 versions of the protocol");var t=(0,WB.alloc)(5*4);return t.writeInt32(HB),r.forEach(function(e){if(e instanceof Array){var n=e[0],i=n.major,o=n.minor,u=e[1].minor,s=o-u;t.writeInt32(s<<16|o<<8|i)}else{var i=e.major,o=e.minor;t.writeInt32(o<<8|i)}}),t.reset(),t}function YB(r){var t=[r.readUInt8(),r.readUInt8(),r.readUInt8(),r.readUInt8()];if(t[0]===72&&t[1]===84&&t[2]===84&&t[3]===80)throw(0,em.newError)("Server responded HTTP. Make sure you are not trying to connect to the http endpoint (HTTP defaults to port 7474 whereas BOLT defaults to port 7687)");return Number(t[3]+"."+t[2])}function ZB(){return zB([[uo(4,4),uo(4,2)],uo(4,1),uo(4,0),uo(3,0)])}function KB(r){var t=this;return new Promise(function(e,n){var i=function(o){n(o)};r.onerror=i.bind(t),r._error&&i(r._error),r.onmessage=function(o){try{var u=YB(o);e({protocolVersion:u,consumeRemainingBuffer:function(s){o.hasRemaining()&&s(o.readSlice(o.remaining()))}})}catch(s){n(s)}},r.write(ZB())})}_l.default=KB});var Uu=f(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.assertImpersonatedUserIsEmpty=bt.assertTxConfigIsEmpty=bt.assertDatabaseIsEmpty=void 0;var dl=P();function GB(r,t,e){if(t===void 0&&(t=function(){}),r&&!r.isEmpty()){var n=(0,dl.newError)("Driver is connected to the database that does not support transaction configuration. Please upgrade to neo4j 3.5.0 or later in order to use this functionality");throw t(n.message),e.onError(n),n}}bt.assertTxConfigIsEmpty=GB;function QB(r,t,e){if(t===void 0&&(t=function(){}),r){var n=(0,dl.newError)("Driver is connected to the database that does not support multiple databases. Please upgrade to neo4j 4.0.0 or later in order to use this functionality");throw t(n.message),e.onError(n),n}}bt.assertDatabaseIsEmpty=QB;function XB(r,t,e){if(t===void 0&&(t=function(){}),r){var n=(0,dl.newError)("Driver is connected to the database that does not support user impersonation. Please upgrade to neo4j 4.4.0 or later in order to use this functionality. "+("Trying to impersonate "+r+"."));throw t(n.message),e.onError(n),n}}bt.assertImpersonatedUserIsEmpty=XB});var bl=f(yt=>{"use strict";Object.defineProperty(yt,"__esModule",{value:!0});yt.Structure=yt.Unpacker=yt.Packer=void 0;var so=Br(),R=P(),JB=R.internal.objectUtil,rm=R.error.PROTOCOL_ERROR,nm=128,im=144,om=160,um=176,sm=192,am=193,cm=194,fm=195,lm=200,hm=201,pm=202,_m=203,dm=208,vm=209,bm=210,ym=212,mm=213,Om=214,gm=204,Sm=205,Em=206,wm=216,Tm=217,Pm=218,Cm=220,Im=221,$B=78,eV=3,tV=82,rV=5,nV=114,iV=3,oV=80,uV=3,vl=function(){function r(t,e){this.signature=t,this.fields=e}return r.prototype.toString=function(){for(var t="",e=0;e<this.fields.length;e++)e>0&&(t+=", "),t+=this.fields[e];return"Structure("+this.signature+", ["+t+"])"},r}();yt.Structure=vl;var sV=function(){function r(t){this._ch=t,this._byteArraysSupported=!0}return r.prototype.packable=function(t){var e=this;if(t===null)return function(){return e._ch.writeUInt8(sm)};if(t===!0)return function(){return e._ch.writeUInt8(fm)};if(t===!1)return function(){return e._ch.writeUInt8(cm)};if(typeof t=="number")return function(){return e.packFloat(t)};if(typeof t=="string")return function(){return e.packString(t)};if(typeof t=="bigint")return function(){return e.packInteger((0,R.int)(t))};if((0,R.isInt)(t))return function(){return e.packInteger(t)};if(t instanceof Int8Array)return function(){return e.packBytes(t)};if(t instanceof Array)return function(){e.packListHeader(t.length);for(var o=0;o<t.length;o++)e.packable(t[o]===void 0?null:t[o])()};if(cV(t))return this.packableIterable(t);if(t instanceof R.Node)return this._nonPackableValue("It is not allowed to pass nodes in query parameters, given: "+t);if(t instanceof R.Relationship)return this._nonPackableValue("It is not allowed to pass relationships in query parameters, given: "+t);if(t instanceof R.Path)return this._nonPackableValue("It is not allowed to pass paths in query parameters, given: "+t);if(t instanceof vl){for(var n=[],i=0;i<t.fields.length;i++)n[i]=this.packable(t.fields[i]);return function(){return e.packStruct(t.signature,n)}}else return typeof t=="object"?function(){for(var o=Object.keys(t),u=0,s=0;s<o.length;s++)t[o[s]]!==void 0&&u++;e.packMapHeader(u);for(var c=0;c<o.length;c++){var a=o[c];t[a]!==void 0&&(e.packString(a),e.packable(t[a])())}}:this._nonPackableValue("Unable to pack the given value: "+t)},r.prototype.packableIterable=function(t){try{var e=Array.from(t);return this.packable(e)}catch(n){throw(0,R.newError)("Cannot pack given iterable, "+n.message+": "+t)}},r.prototype.packStruct=function(t,e){e=e||[],this.packStructHeader(e.length,t);for(var n=0;n<e.length;n++)e[n]()},r.prototype.packInteger=function(t){var e=t.high,n=t.low;t.greaterThanOrEqual(-16)&&t.lessThan(128)?this._ch.writeInt8(n):t.greaterThanOrEqual(-128)&&t.lessThan(-16)?(this._ch.writeUInt8(lm),this._ch.writeInt8(n)):t.greaterThanOrEqual(-32768)&&t.lessThan(32768)?(this._ch.writeUInt8(hm),this._ch.writeInt16(n)):t.greaterThanOrEqual(-2147483648)&&t.lessThan(2147483648)?(this._ch.writeUInt8(pm),this._ch.writeInt32(n)):(this._ch.writeUInt8(_m),this._ch.writeInt32(e),this._ch.writeInt32(n))},r.prototype.packFloat=function(t){this._ch.writeUInt8(am),this._ch.writeFloat64(t)},r.prototype.packString=function(t){var e=so.utf8.encode(t),n=e.length;if(n<16)this._ch.writeUInt8(nm|n),this._ch.writeBytes(e);else if(n<256)this._ch.writeUInt8(dm),this._ch.writeUInt8(n),this._ch.writeBytes(e);else if(n<65536)this._ch.writeUInt8(vm),this._ch.writeUInt8(n/256>>0),this._ch.writeUInt8(n%256),this._ch.writeBytes(e);else if(n<4294967296)this._ch.writeUInt8(bm),this._ch.writeUInt8((n/16777216>>0)%256),this._ch.writeUInt8((n/65536>>0)%256),this._ch.writeUInt8((n/256>>0)%256),this._ch.writeUInt8(n%256),this._ch.writeBytes(e);else throw(0,R.newError)("UTF-8 strings of size "+n+" are not supported")},r.prototype.packListHeader=function(t){if(t<16)this._ch.writeUInt8(im|t);else if(t<256)this._ch.writeUInt8(ym),this._ch.writeUInt8(t);else if(t<65536)this._ch.writeUInt8(mm),this._ch.writeUInt8((t/256>>0)%256),this._ch.writeUInt8(t%256);else if(t<4294967296)this._ch.writeUInt8(Om),this._ch.writeUInt8((t/16777216>>0)%256),this._ch.writeUInt8((t/65536>>0)%256),this._ch.writeUInt8((t/256>>0)%256),this._ch.writeUInt8(t%256);else throw(0,R.newError)("Lists of size "+t+" are not supported")},r.prototype.packBytes=function(t){if(this._byteArraysSupported){this.packBytesHeader(t.length);for(var e=0;e<t.length;e++)this._ch.writeInt8(t[e])}else throw(0,R.newError)("Byte arrays are not supported by the database this driver is connected to")},r.prototype.packBytesHeader=function(t){if(t<256)this._ch.writeUInt8(gm),this._ch.writeUInt8(t);else if(t<65536)this._ch.writeUInt8(Sm),this._ch.writeUInt8((t/256>>0)%256),this._ch.writeUInt8(t%256);else if(t<4294967296)this._ch.writeUInt8(Em),this._ch.writeUInt8((t/16777216>>0)%256),this._ch.writeUInt8((t/65536>>0)%256),this._ch.writeUInt8((t/256>>0)%256),this._ch.writeUInt8(t%256);else throw(0,R.newError)("Byte arrays of size "+t+" are not supported")},r.prototype.packMapHeader=function(t){if(t<16)this._ch.writeUInt8(om|t);else if(t<256)this._ch.writeUInt8(wm),this._ch.writeUInt8(t);else if(t<65536)this._ch.writeUInt8(Tm),this._ch.writeUInt8(t/256>>0),this._ch.writeUInt8(t%256);else if(t<4294967296)this._ch.writeUInt8(Pm),this._ch.writeUInt8((t/16777216>>0)%256),this._ch.writeUInt8((t/65536>>0)%256),this._ch.writeUInt8((t/256>>0)%256),this._ch.writeUInt8(t%256);else throw(0,R.newError)("Maps of size "+t+" are not supported")},r.prototype.packStructHeader=function(t,e){if(t<16)this._ch.writeUInt8(um|t),this._ch.writeUInt8(e);else if(t<256)this._ch.writeUInt8(Cm),this._ch.writeUInt8(t),this._ch.writeUInt8(e);else if(t<65536)this._ch.writeUInt8(Im),this._ch.writeUInt8(t/256>>0),this._ch.writeUInt8(t%256);else throw(0,R.newError)("Structures of size "+t+" are not supported")},r.prototype.disableByteArrays=function(){this._byteArraysSupported=!1},r.prototype._nonPackableValue=function(t){return function(){throw(0,R.newError)(t,rm)}},r}();yt.Packer=sV;var aV=function(){function r(t,e){t===void 0&&(t=!1),e===void 0&&(e=!1),this._disableLosslessIntegers=t,this._useBigInt=e}return r.prototype.unpack=function(t){var e=t.readUInt8(),n=e&240,i=e&15;if(e===sm)return null;var o=this._unpackBoolean(e);if(o!==null)return o;var u=this._unpackNumberOrInteger(e,t);if(u!==null){if((0,R.isInt)(u)){if(this._useBigInt)return u.toBigInt();if(this._disableLosslessIntegers)return u.toNumberOrInfinity()}return u}var s=this._unpackString(e,n,i,t);if(s!==null)return s;var c=this._unpackList(e,n,i,t);if(c!==null)return c;var a=this._unpackByteArray(e,t);if(a!==null)return a;var l=this._unpackMap(e,n,i,t);if(l!==null)return l;var h=this._unpackStruct(e,n,i,t);if(h!==null)return h;throw(0,R.newError)("Unknown packed value with marker "+e.toString(16))},r.prototype.unpackInteger=function(t){var e=t.readUInt8(),n=this._unpackInteger(e,t);if(n==null)throw(0,R.newError)("Unable to unpack integer value with marker "+e.toString(16));return n},r.prototype._unpackBoolean=function(t){return t===fm?!0:t===cm?!1:null},r.prototype._unpackNumberOrInteger=function(t,e){return t===am?e.readFloat64():this._unpackInteger(t,e)},r.prototype._unpackInteger=function(t,e){if(t>=0&&t<128)return(0,R.int)(t);if(t>=240&&t<256)return(0,R.int)(t-256);if(t===lm)return(0,R.int)(e.readInt8());if(t===hm)return(0,R.int)(e.readInt16());if(t===pm){var n=e.readInt32();return(0,R.int)(n)}else if(t===_m){var i=e.readInt32(),o=e.readInt32();return new R.Integer(o,i)}else return null},r.prototype._unpackString=function(t,e,n,i){return e===nm?so.utf8.decode(i,n):t===dm?so.utf8.decode(i,i.readUInt8()):t===vm?so.utf8.decode(i,i.readUInt16()):t===bm?so.utf8.decode(i,i.readUInt32()):null},r.prototype._unpackList=function(t,e,n,i){return e===im?this._unpackListWithSize(n,i):t===ym?this._unpackListWithSize(i.readUInt8(),i):t===mm?this._unpackListWithSize(i.readUInt16(),i):t===Om?this._unpackListWithSize(i.readUInt32(),i):null},r.prototype._unpackListWithSize=function(t,e){for(var n=[],i=0;i<t;i++)n.push(this.unpack(e));return n},r.prototype._unpackByteArray=function(t,e){return t===gm?this._unpackByteArrayWithSize(e.readUInt8(),e):t===Sm?this._unpackByteArrayWithSize(e.readUInt16(),e):t===Em?this._unpackByteArrayWithSize(e.readUInt32(),e):null},r.prototype._unpackByteArrayWithSize=function(t,e){for(var n=new Int8Array(t),i=0;i<t;i++)n[i]=e.readInt8();return n},r.prototype._unpackMap=function(t,e,n,i){return e===om?this._unpackMapWithSize(n,i):t===wm?this._unpackMapWithSize(i.readUInt8(),i):t===Tm?this._unpackMapWithSize(i.readUInt16(),i):t===Pm?this._unpackMapWithSize(i.readUInt32(),i):null},r.prototype._unpackMapWithSize=function(t,e){for(var n={},i=0;i<t;i++){var o=this.unpack(e);n[o]=this.unpack(e)}return n},r.prototype._unpackStruct=function(t,e,n,i){try{return e===um?this._unpackStructWithSize(n,i):t===Cm?this._unpackStructWithSize(i.readUInt8(),i):t===Im?this._unpackStructWithSize(i.readUInt16(),i):null}catch(o){return JB.createBrokenObject(o)}},r.prototype._unpackStructWithSize=function(t,e){var n=e.readUInt8();return n===$B?this._unpackNode(t,e):n===tV?this._unpackRelationship(t,e):n===nV?this._unpackUnboundRelationship(t,e):n===oV?this._unpackPath(t,e):this._unpackUnknownStruct(n,t,e)},r.prototype._unpackNode=function(t,e){return this._verifyStructSize("Node",eV,t),new R.Node(this.unpack(e),this.unpack(e),this.unpack(e))},r.prototype._unpackRelationship=function(t,e){return this._verifyStructSize("Relationship",rV,t),new R.Relationship(this.unpack(e),this.unpack(e),this.unpack(e),this.unpack(e),this.unpack(e))},r.prototype._unpackUnboundRelationship=function(t,e){return this._verifyStructSize("UnboundRelationship",iV,t),new R.UnboundRelationship(this.unpack(e),this.unpack(e),this.unpack(e))},r.prototype._unpackPath=function(t,e){this._verifyStructSize("Path",uV,t);for(var n=this.unpack(e),i=this.unpack(e),o=this.unpack(e),u=[],s=n[0],c=0;c<o.length;c+=2){var a=n[o[c+1]],l=(0,R.toNumber)(o[c]),h=void 0;l>0?(h=i[l-1],h instanceof R.UnboundRelationship&&(i[l-1]=h=h.bind(s.identity,a.identity))):(h=i[-l-1],h instanceof R.UnboundRelationship&&(i[-l-1]=h=h.bind(a.identity,s.identity))),u.push(new R.PathSegment(s,h,a)),s=a}return new R.Path(n[0],n[n.length-1],u)},r.prototype._unpackUnknownStruct=function(t,e,n){for(var i=new vl(t,[]),o=0;o<e;o++)i.fields.push(this.unpack(n));return i},r.prototype._verifyStructSize=function(t,e,n){if(e!==n)throw(0,R.newError)("Wrong struct size for "+t+", expected "+e+" but was "+n,rm)},r}();yt.Unpacker=aV;function cV(r){return r==null?!1:typeof r[Symbol.iterator]=="function"}});var Ol=f(mt=>{"use strict";Object.defineProperty(mt,"__esModule",{value:!0});mt.epochSecondAndNanoToLocalDateTime=mt.nanoOfDayToLocalTime=mt.epochDayToDate=void 0;var zt=P(),Ot=zt.internal.temporalUtil,fV=Ot.DAYS_0000_TO_1970,yl=Ot.DAYS_PER_400_YEAR_CYCLE,Rm=Ot.NANOS_PER_HOUR,Am=Ot.NANOS_PER_MINUTE,ml=Ot.NANOS_PER_SECOND,jm=Ot.SECONDS_PER_DAY,lV=Ot.floorDiv,hV=Ot.floorMod;function qm(r){r=(0,zt.int)(r);var t=r.add(fV).subtract(60),e=(0,zt.int)(0);if(t.lessThan(0)){var n=t.add(1).div(yl).subtract(1);e=n.multiply(400),t=t.add(n.multiply(-yl))}var i=t.multiply(400).add(591).div(yl),o=t.subtract(i.multiply(365).add(i.div(4)).subtract(i.div(100)).add(i.div(400)));o.lessThan(0)&&(i=i.subtract(1),o=t.subtract(i.multiply(365).add(i.div(4)).subtract(i.div(100)).add(i.div(400)))),i=i.add(e);var u=o,s=u.multiply(5).add(2).div(153),c=s.add(2).modulo(12).add(1),a=u.subtract(s.multiply(306).add(5).div(10)).add(1);return i=i.add(s.div(10)),new zt.Date(i,c,a)}mt.epochDayToDate=qm;function Nm(r){r=(0,zt.int)(r);var t=r.div(Rm);r=r.subtract(t.multiply(Rm));var e=r.div(Am);r=r.subtract(e.multiply(Am));var n=r.div(ml),i=r.subtract(n.multiply(ml));return new zt.LocalTime(t,e,n,i)}mt.nanoOfDayToLocalTime=Nm;function pV(r,t){var e=lV(r,jm),n=hV(r,jm),i=n.multiply(ml).add(t),o=qm(e),u=Nm(i);return new zt.LocalDateTime(o.year,o.month,o.day,u.hour,u.minute,u.second,u.nanosecond)}mt.epochSecondAndNanoToLocalDateTime=pV});var Dm=f(oe=>{"use strict";Object.defineProperty(oe,"__esModule",{value:!0});oe.packDateTime=oe.unpackDateTimeWithZoneId=oe.unpackDateTimeWithZoneOffset=oe.DATE_TIME_WITH_ZONE_ID=oe.DATE_TIME_WITH_ZONE_OFFSET=void 0;var de=P(),_V=Ol(),ao=de.internal.temporalUtil.localDateTimeToEpochSecond;oe.DATE_TIME_WITH_ZONE_OFFSET=73;var dV=3;oe.DATE_TIME_WITH_ZONE_ID=105;var vV=3;function bV(r,t,e,n,i){r._verifyStructSize("DateTimeWithZoneOffset",dV,t);var o=r.unpackInteger(e),u=r.unpackInteger(e),s=r.unpackInteger(e),c=(0,de.int)(o).add(s),a=(0,_V.epochSecondAndNanoToLocalDateTime)(c,u),l=new de.DateTime(a.year,a.month,a.day,a.hour,a.minute,a.second,a.nanosecond,s,null);return xm(l,n,i)}oe.unpackDateTimeWithZoneOffset=bV;function yV(r,t,e,n,i){r._verifyStructSize("DateTimeWithZoneId",vV,t);var o=r.unpackInteger(e),u=r.unpackInteger(e),s=r.unpack(e),c=gl(s,o,u),a=new de.DateTime(c.year,c.month,c.day,c.hour,c.minute,c.second,(0,de.int)(u),c.timeZoneOffsetSeconds,s);return xm(a,n,i)}oe.unpackDateTimeWithZoneId=yV;function mV(r,t){r.timeZoneId?OV(r,t):gV(r,t)}oe.packDateTime=mV;function OV(r,t){var e=ao(r.year,r.month,r.day,r.hour,r.minute,r.second,r.nanosecond),n=r.timeZoneOffsetSeconds!=null?r.timeZoneOffsetSeconds:SV(r.timeZoneId,e,r.nanosecond),i=e.subtract(n),o=(0,de.int)(r.nanosecond),u=r.timeZoneId,s=[t.packable(i),t.packable(o),t.packable(u)];t.packStruct(oe.DATE_TIME_WITH_ZONE_ID,s)}function gV(r,t){var e=ao(r.year,r.month,r.day,r.hour,r.minute,r.second,r.nanosecond),n=(0,de.int)(r.nanosecond),i=(0,de.int)(r.timeZoneOffsetSeconds),o=e.subtract(i),u=[t.packable(o),t.packable(n),t.packable(i)];t.packStruct(oe.DATE_TIME_WITH_ZONE_OFFSET,u)}function SV(r,t,e){var n=gl(r,t,e),i=ao(n.year,n.month,n.day,n.hour,n.minute,n.second,e),o=i.subtract(t),u=t.subtract(o),s=gl(r,u,e),c=ao(s.year,s.month,s.day,s.hour,s.minute,s.second,e),a=c.subtract(u);return a}function gl(r,t,e){var n=new Intl.DateTimeFormat("en-US",{timeZone:r,year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1,era:"narrow"}),i=(0,de.int)(t).multiply(1e3).add((0,de.int)(e).div(1e6)).toNumber(),o=n.formatToParts(i),u=o.reduce(function(c,a){return a.type==="era"?c.adjustEra=a.value.toUpperCase()==="B"?function(l){return l.subtract(1).negate()}:function(l){return l}:a.type==="hour"?c.hour=(0,de.int)(a.value).modulo(24):a.type!=="literal"&&(c[a.type]=(0,de.int)(a.value)),c},{});u.year=u.adjustEra(u.year);var s=ao(u.year,u.month,u.day,u.hour,u.minute,u.second,u.nanosecond);return u.timeZoneOffsetSeconds=s.subtract(t),u.hour=u.hour.modulo(24),u}function xm(r,t,e){if(!t&&!e)return r;var n=function(s){return e?s.toBigInt():s.toNumberOrInfinity()},i=Object.create(Object.getPrototypeOf(r));for(var o in r)if(Object.prototype.hasOwnProperty.call(r,o)===!0){var u=r[o];i[o]=(0,de.isInt)(u)?n(u):u}return Object.freeze(i),i}});var Gm=f(ue=>{"use strict";var Mm=ue&&ue.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),EV=ue&&ue.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),wV=ue&&ue.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),km=ue&&ue.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&EV(t,r,e);return wV(t,r),t};Object.defineProperty(ue,"__esModule",{value:!0});ue.Unpacker=ue.Packer=void 0;var Um=km(bl()),co=km(Dm()),q=P(),Vr=Ol(),Sl=q.internal.temporalUtil,TV=Sl.dateToEpochDay,El=Sl.localDateTimeToEpochSecond,Lm=Sl.localTimeToNanoOfDay,Fm=88,PV=3,Bm=89,CV=4,Vm=69,IV=4,Wm=116,RV=1,Hm=84,AV=2,zm=68,jV=1,Ym=100,qV=2,Zm=70,NV=3,Km=102,xV=3,DV=function(r){Mm(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.disableByteArrays=function(){throw new Error("Bolt V2 should always support byte arrays")},t.prototype.packable=function(e){var n=this;return(0,q.isPoint)(e)?function(){return kV(e,n)}:(0,q.isDuration)(e)?function(){return VV(e,n)}:(0,q.isLocalTime)(e)?function(){return HV(e,n)}:(0,q.isTime)(e)?function(){return YV(e,n)}:(0,q.isDate)(e)?function(){return KV(e,n)}:(0,q.isLocalDateTime)(e)?function(){return QV(e,n)}:(0,q.isDateTime)(e)&&this.useUtc?function(){return co.packDateTime(e,n)}:(0,q.isDateTime)(e)&&!this.useUtc?function(){return JV(e,n)}:r.prototype.packable.call(this,e)},t}(Um.Packer);ue.Packer=DV;var MV=function(r){Mm(t,r);function t(e,n){return e===void 0&&(e=!1),n===void 0&&(n=!1),r.call(this,e,n)||this}return t.prototype._unpackUnknownStruct=function(e,n,i){return e===Fm?FV(this,n,i):e===Bm?BV(this,n,i):e===Vm?WV(this,n,i):e===Wm?zV(this,n,i,this._disableLosslessIntegers,this._useBigInt):e===Hm?ZV(this,n,i,this._disableLosslessIntegers,this._useBigInt):e===zm?GV(this,n,i,this._disableLosslessIntegers,this._useBigInt):e===Ym?XV(this,n,i,this._disableLosslessIntegers,this._useBigInt):e===co.DATE_TIME_WITH_ZONE_OFFSET&&this.useUtc?co.unpackDateTimeWithZoneOffset(this,n,i,this._disableLosslessIntegers,this._useBigInt):e===Zm&&!this.useUtc?e4(this,n,i,this._disableLosslessIntegers,this._useBigInt):e===co.DATE_TIME_WITH_ZONE_ID&&this.useUtc?co.unpackDateTimeWithZoneId(this,n,i,this._disableLosslessIntegers,this._useBigInt):e===Km&&!this.useUtc?r4(this,n,i,this._disableLosslessIntegers,this._useBigInt):r.prototype._unpackUnknownStruct.call(this,e,n,i,this._disableLosslessIntegers,this._useBigInt)},t}(Um.Unpacker);ue.Unpacker=MV;function kV(r,t){var e=r.z===null||r.z===void 0;e?UV(r,t):LV(r,t)}function UV(r,t){var e=[t.packable((0,q.int)(r.srid)),t.packable(r.x),t.packable(r.y)];t.packStruct(Fm,e)}function LV(r,t){var e=[t.packable((0,q.int)(r.srid)),t.packable(r.x),t.packable(r.y),t.packable(r.z)];t.packStruct(Bm,e)}function FV(r,t,e){return r._verifyStructSize("Point2D",PV,t),new q.Point(r.unpack(e),r.unpack(e),r.unpack(e),void 0)}function BV(r,t,e){return r._verifyStructSize("Point3D",CV,t),new q.Point(r.unpack(e),r.unpack(e),r.unpack(e),r.unpack(e))}function VV(r,t){var e=(0,q.int)(r.months),n=(0,q.int)(r.days),i=(0,q.int)(r.seconds),o=(0,q.int)(r.nanoseconds),u=[t.packable(e),t.packable(n),t.packable(i),t.packable(o)];t.packStruct(Vm,u)}function WV(r,t,e){r._verifyStructSize("Duration",IV,t);var n=r.unpack(e),i=r.unpack(e),o=r.unpack(e),u=r.unpack(e);return new q.Duration(n,i,o,u)}function HV(r,t){var e=Lm(r.hour,r.minute,r.second,r.nanosecond),n=[t.packable(e)];t.packStruct(Wm,n)}function zV(r,t,e,n){r._verifyStructSize("LocalTime",RV,t);var i=r.unpackInteger(e),o=(0,Vr.nanoOfDayToLocalTime)(i);return Wr(o,n)}function YV(r,t){var e=Lm(r.hour,r.minute,r.second,r.nanosecond),n=(0,q.int)(r.timeZoneOffsetSeconds),i=[t.packable(e),t.packable(n)];t.packStruct(Hm,i)}function ZV(r,t,e,n,i){r._verifyStructSize("Time",AV,t);var o=r.unpackInteger(e),u=r.unpackInteger(e),s=(0,Vr.nanoOfDayToLocalTime)(o),c=new q.Time(s.hour,s.minute,s.second,s.nanosecond,u);return Wr(c,n,i)}function KV(r,t){var e=TV(r.year,r.month,r.day),n=[t.packable(e)];t.packStruct(zm,n)}function GV(r,t,e,n,i){r._verifyStructSize("Date",jV,t);var o=r.unpackInteger(e),u=(0,Vr.epochDayToDate)(o);return Wr(u,n,i)}function QV(r,t){var e=El(r.year,r.month,r.day,r.hour,r.minute,r.second,r.nanosecond),n=(0,q.int)(r.nanosecond),i=[t.packable(e),t.packable(n)];t.packStruct(Ym,i)}function XV(r,t,e,n,i){r._verifyStructSize("LocalDateTime",qV,t);var o=r.unpackInteger(e),u=r.unpackInteger(e),s=(0,Vr.epochSecondAndNanoToLocalDateTime)(o,u);return Wr(s,n,i)}function JV(r,t){r.timeZoneId?t4(r,t):$V(r,t)}function $V(r,t){var e=El(r.year,r.month,r.day,r.hour,r.minute,r.second,r.nanosecond),n=(0,q.int)(r.nanosecond),i=(0,q.int)(r.timeZoneOffsetSeconds),o=[t.packable(e),t.packable(n),t.packable(i)];t.packStruct(Zm,o)}function e4(r,t,e,n,i){r._verifyStructSize("DateTimeWithZoneOffset",NV,t);var o=r.unpackInteger(e),u=r.unpackInteger(e),s=r.unpackInteger(e),c=(0,Vr.epochSecondAndNanoToLocalDateTime)(o,u),a=new q.DateTime(c.year,c.month,c.day,c.hour,c.minute,c.second,c.nanosecond,s,null);return Wr(a,n,i)}function t4(r,t){var e=El(r.year,r.month,r.day,r.hour,r.minute,r.second,r.nanosecond),n=(0,q.int)(r.nanosecond),i=r.timeZoneId,o=[t.packable(e),t.packable(n),t.packable(i)];t.packStruct(Km,o)}function r4(r,t,e,n,i){r._verifyStructSize("DateTimeWithZoneId",xV,t);var o=r.unpackInteger(e),u=r.unpackInteger(e),s=r.unpack(e),c=(0,Vr.epochSecondAndNanoToLocalDateTime)(o,u),a=new q.DateTime(c.year,c.month,c.day,c.hour,c.minute,c.second,c.nanosecond,null,s);return Wr(a,n,i)}function Wr(r,t,e){if(!t&&!e)return r;var n=function(s){return e?s.toBigInt():s.toNumberOrInfinity()},i=Object.create(Object.getPrototypeOf(r));for(var o in r)if(r.hasOwnProperty(o)){var u=r[o];i[o]=(0,q.isInt)(u)?n(u):u}return Object.freeze(i),i}});var Lu=f(ve=>{"use strict";var n4=ve&&ve.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),i4=ve&&ve.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),Qm=ve&&ve.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&n4(t,r,e);return i4(t,r),t};Object.defineProperty(ve,"__esModule",{value:!0});ve.v2=ve.v1=void 0;var o4=Qm(bl());ve.v1=o4;var Xm=Qm(Gm());ve.v2=Xm;ve.default=Xm});var Yt=f(wl=>{"use strict";Object.defineProperty(wl,"__esModule",{value:!0});var te=P(),nO=te.internal.constants,u4=nO.ACCESS_MODE_READ,Fu=nO.FETCH_ALL,Jm=te.internal.util.assertString,s4=1,a4=15,$m=16,c4=63,f4=1,l4=2,h4=17,p4=18,_4=19,eO=102,d4=47,v4=63,b4="r",fo=-1,Hr=function(){function r(t,e,n){this.signature=t,this.fields=e,this.toString=n}return r.init=function(t,e){return new r(s4,[t,e],function(){return"INIT "+t+" {...}"})},r.run=function(t,e){return new r($m,[t,e],function(){return"RUN "+t+" "+te.json.stringify(e)})},r.pullAll=function(){return y4},r.reset=function(){return m4},r.hello=function(t,e,n,i){n===void 0&&(n=null),i===void 0&&(i=null);var o=Object.assign({user_agent:t},e);return n&&(o.routing=n),i&&(o.patch_bolt=i),new r(f4,[o],function(){return"HELLO {user_agent: '"+t+"', ...}"})},r.begin=function(t){var e=t===void 0?{}:t,n=e.bookmark,i=e.txConfig,o=e.database,u=e.mode,s=e.impersonatedUser,c=tO(n,i,o,u,s);return new r(h4,[c],function(){return"BEGIN "+te.json.stringify(c)})},r.commit=function(){return O4},r.rollback=function(){return g4},r.runWithMetadata=function(t,e,n){var i=n===void 0?{}:n,o=i.bookmark,u=i.txConfig,s=i.database,c=i.mode,a=i.impersonatedUser,l=tO(o,u,s,c,a);return new r($m,[t,e,l],function(){return"RUN "+t+" "+te.json.stringify(e)+" "+te.json.stringify(l)})},r.goodbye=function(){return S4},r.pull=function(t){var e=t===void 0?{}:t,n=e.stmtId,i=n===void 0?fo:n,o=e.n,u=o===void 0?Fu:o,s=rO(i??fo,u||Fu);return new r(v4,[s],function(){return"PULL "+te.json.stringify(s)})},r.discard=function(t){var e=t===void 0?{}:t,n=e.stmtId,i=n===void 0?fo:n,o=e.n,u=o===void 0?Fu:o,s=rO(i??fo,u||Fu);return new r(d4,[s],function(){return"DISCARD "+te.json.stringify(s)})},r.route=function(t,e,n){return t===void 0&&(t={}),e===void 0&&(e=[]),n===void 0&&(n=null),new r(eO,[t,e,n],function(){return"ROUTE "+te.json.stringify(t)+" "+te.json.stringify(e)+" "+n})},r.routeV4x4=function(t,e,n){t===void 0&&(t={}),e===void 0&&(e=[]),n===void 0&&(n={});var i={};return n.databaseName&&(i.db=n.databaseName),n.impersonatedUser&&(i.imp_user=n.impersonatedUser),new r(eO,[t,e,i],function(){return"ROUTE "+te.json.stringify(t)+" "+te.json.stringify(e)+" "+te.json.stringify(i)})},r}();wl.default=Hr;function tO(r,t,e,n,i){var o={};return r.isEmpty()||(o.bookmarks=r.values()),t.timeout&&(o.tx_timeout=t.timeout),t.metadata&&(o.tx_metadata=t.metadata),e&&(o.db=Jm(e,"database")),i&&(o.imp_user=Jm(i,"impersonatedUser")),n===u4&&(o.mode=b4),o}function rO(r,t){var e={n:(0,te.int)(t)};return r!==fo&&(e.qid=(0,te.int)(r)),e}var y4=new Hr(c4,[],function(){return"PULL_ALL"}),m4=new Hr(a4,[],function(){return"RESET"}),O4=new Hr(p4,[],function(){return"COMMIT"}),g4=new Hr(_4,[],function(){return"ROLLBACK"}),S4=new Hr(l4,[],function(){return"GOODBYE"})});var Pl=f(lo=>{"use strict";var Tl=lo&&lo.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(lo,"__esModule",{value:!0});var Bu=function(){function r(){}return r.ofRecord=function(t){return t===null?r.ofNull():new T4(t)},r.ofMessageResponse=function(t){return t===null?r.ofNull():new E4(t)},r.ofNull=function(){return new w4},Object.defineProperty(r.prototype,"ttl",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"db",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"servers",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isNull",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),r}();lo.default=Bu;var E4=function(r){Tl(t,r);function t(e){var n=r.call(this)||this;return n._response=e,n}return Object.defineProperty(t.prototype,"ttl",{get:function(){return this._response.rt.ttl},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"servers",{get:function(){return this._response.rt.servers},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"db",{get:function(){return this._response.rt.db},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNull",{get:function(){return this._response===null},enumerable:!1,configurable:!0}),t}(Bu),w4=function(r){Tl(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"isNull",{get:function(){return!0},enumerable:!1,configurable:!0}),t}(Bu),T4=function(r){Tl(t,r);function t(e){var n=r.call(this)||this;return n._record=e,n}return Object.defineProperty(t.prototype,"ttl",{get:function(){return this._record.get("ttl")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"servers",{get:function(){return this._record.get("servers")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"db",{get:function(){return this._record.has("db")?this._record.get("db"):null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNull",{get:function(){return this._record===null},enumerable:!1,configurable:!0}),t}(Bu)});var Je=f(B=>{"use strict";var Zt=B&&B.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),P4=B&&B.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(B,"__esModule",{value:!0});B.ProcedureRouteObserver=B.RouteObserver=B.CompletedObserver=B.FailedObserver=B.ResetObserver=B.LoginObserver=B.ResultStreamObserver=B.StreamObserver=void 0;var qe=P(),oO=P4(Pl()),iO=qe.internal.constants.FETCH_ALL,zr=qe.error.PROTOCOL_ERROR,Yr=function(){function r(){}return r.prototype.onNext=function(t){},r.prototype.onError=function(t){},r.prototype.onCompleted=function(t){},r}();B.StreamObserver=Yr;var Cl=function(r){Zt(t,r);function t(e){var n=e===void 0?{}:e,i=n.reactive,o=i===void 0?!1:i,u=n.moreFunction,s=n.discardFunction,c=n.fetchSize,a=c===void 0?iO:c,l=n.beforeError,h=n.afterError,p=n.beforeKeys,y=n.afterKeys,O=n.beforeComplete,w=n.afterComplete,z=n.server,S=r.call(this)||this;return S._fieldKeys=null,S._fieldLookup=null,S._head=null,S._queuedRecords=[],S._tail=null,S._error=null,S._observers=[],S._meta={},S._server=z,S._beforeError=l,S._afterError=h,S._beforeKeys=p,S._afterKeys=y,S._beforeComplete=O,S._afterComplete=w,S._queryId=null,S._moreFunction=u,S._discardFunction=s,S._discard=!1,S._fetchSize=a,S._setState(o?me.READY:me.READY_STREAMING),S._setupAuoPull(a),S}return t.prototype.onNext=function(e){var n=new qe.Record(this._fieldKeys,e,this._fieldLookup);this._observers.some(function(i){return i.onNext})?this._observers.forEach(function(i){i.onNext&&i.onNext(n)}):(this._queuedRecords.push(n),this._queuedRecords.length>this._highRecordWatermark&&(this._autoPull=!1))},t.prototype.onCompleted=function(e){this._state.onSuccess(this,e)},t.prototype.onError=function(e){this._state.onError(this,e)},t.prototype.cancel=function(){this._discard=!0},t.prototype.prepareToHandleSingleResponse=function(){this._head=[],this._fieldKeys=[],this._setState(me.STREAMING)},t.prototype.markCompleted=function(){this._head=[],this._fieldKeys=[],this._tail={},this._setState(me.SUCCEEDED)},t.prototype.subscribe=function(e){if(this._error){e.onError(this._error);return}if(this._head&&e.onKeys&&e.onKeys(this._head),this._queuedRecords.length>0&&e.onNext)for(var n=0;n<this._queuedRecords.length;n++)e.onNext(this._queuedRecords[n]),this._queuedRecords.length-n-1<=this._lowRecordWatermark&&(this._autoPull=!0,this._state===me.READY&&this._handleStreaming());this._tail&&e.onCompleted&&e.onCompleted(this._tail),this._observers.push(e),this._state===me.READY&&this._handleStreaming()},t.prototype._handleHasMore=function(e){this._setState(me.READY),this._handleStreaming(),delete e.has_more},t.prototype._handlePullSuccess=function(e){var n=this;this._setState(me.SUCCEEDED);var i=Object.assign(this._server?{server:this._server}:{},this._meta,e),o=null;this._beforeComplete&&(o=this._beforeComplete(i));var u=function(){n._tail=i,n._observers.some(function(s){return s.onCompleted})&&n._observers.forEach(function(s){s.onCompleted&&s.onCompleted(i)}),n._afterComplete&&n._afterComplete(i)};o?Promise.resolve(o).then(function(){return u()}):u()},t.prototype._handleRunSuccess=function(e,n){var i=this;if(this._fieldKeys===null){if(this._fieldKeys=[],this._fieldLookup={},e.fields&&e.fields.length>0){this._fieldKeys=e.fields;for(var o=0;o<e.fields.length;o++)this._fieldLookup[e.fields[o]]=o;delete e.fields}e.qid!==null&&e.qid!==void 0&&(this._queryId=e.qid,delete e.qid),this._storeMetadataForCompletion(e);var u=null;this._beforeKeys&&(u=this._beforeKeys(this._fieldKeys));var s=function(){i._head=i._fieldKeys,i._observers.some(function(c){return c.onKeys})&&i._observers.forEach(function(c){c.onKeys&&c.onKeys(i._fieldKeys)}),i._afterKeys&&i._afterKeys(i._fieldKeys),n()};u?Promise.resolve(u).then(function(){return s()}):s()}},t.prototype._handleError=function(e){var n=this;this._setState(me.FAILED),this._error=e;var i=null;this._beforeError&&(i=this._beforeError(e));var o=function(){n._observers.some(function(u){return u.onError})&&n._observers.forEach(function(u){u.onError&&u.onError(e)}),n._afterError&&n._afterError(e)};i?Promise.resolve(i).then(function(){return o()}):o()},t.prototype._handleStreaming=function(){this._head&&this._observers.some(function(e){return e.onNext||e.onCompleted})&&(this._discard?(this._discardFunction(this._queryId,this),this._setState(me.STREAMING)):this._autoPull&&(this._moreFunction(this._queryId,this._fetchSize,this),this._setState(me.STREAMING)))},t.prototype._storeMetadataForCompletion=function(e){for(var n=Object.keys(e),i=n.length,o="";i--;)o=n[i],this._meta[o]=e[o]},t.prototype._setState=function(e){this._state=e},t.prototype._setupAuoPull=function(e){this._autoPull=!0,e===iO?(this._lowRecordWatermark=Number.MAX_VALUE,this._highRecordWatermark=Number.MAX_VALUE):(this._lowRecordWatermark=.3*e,this._highRecordWatermark=.7*e)},t}(Yr);B.ResultStreamObserver=Cl;var C4=function(r){Zt(t,r);function t(e){var n=e===void 0?{}:e,i=n.onError,o=n.onCompleted,u=r.call(this)||this;return u._onError=i,u._onCompleted=o,u}return t.prototype.onNext=function(e){this.onError((0,qe.newError)("Received RECORD when initializing "+qe.json.stringify(e)))},t.prototype.onError=function(e){this._onError&&this._onError(e)},t.prototype.onCompleted=function(e){this._onCompleted&&this._onCompleted(e)},t}(Yr);B.LoginObserver=C4;var I4=function(r){Zt(t,r);function t(e){var n=e===void 0?{}:e,i=n.onProtocolError,o=n.onError,u=n.onComplete,s=r.call(this)||this;return s._onProtocolError=i,s._onError=o,s._onComplete=u,s}return t.prototype.onNext=function(e){this.onError((0,qe.newError)("Received RECORD when resetting: received record is: "+qe.json.stringify(e),zr))},t.prototype.onError=function(e){e.code===zr&&this._onProtocolError&&this._onProtocolError(e.message),this._onError&&this._onError(e)},t.prototype.onCompleted=function(e){this._onComplete&&this._onComplete(e)},t}(Yr);B.ResetObserver=I4;var R4=function(r){Zt(t,r);function t(e){var n=e.error,i=e.onError,o=r.call(this,{beforeError:i})||this;return o.onError(n),o}return t}(Cl);B.FailedObserver=R4;var A4=function(r){Zt(t,r);function t(){var e=r.call(this)||this;return r.prototype.markCompleted.call(e),e}return t}(Cl);B.CompletedObserver=A4;var j4=function(r){Zt(t,r);function t(e){var n=e.resultObserver,i=e.onProtocolError,o=e.onError,u=e.onCompleted,s=r.call(this)||this;return s._resultObserver=n,s._onError=o,s._onCompleted=u,s._records=[],s._onProtocolError=i,n.subscribe(s),s}return t.prototype.onNext=function(e){this._records.push(e)},t.prototype.onError=function(e){e.code===zr&&this._onProtocolError&&this._onProtocolError(e.message),this._onError&&this._onError(e)},t.prototype.onCompleted=function(){if(this._records!==null&&this._records.length!==1){this.onError((0,qe.newError)("Illegal response from router. Received "+this._records.length+` records but expected only one.
`+qe.json.stringify(this._records),zr));return}this._onCompleted&&this._onCompleted(oO.default.ofRecord(this._records[0]))},t}(Yr);B.ProcedureRouteObserver=j4;var q4=function(r){Zt(t,r);function t(e){var n=e===void 0?{}:e,i=n.onProtocolError,o=n.onError,u=n.onCompleted,s=r.call(this)||this;return s._onProtocolError=i,s._onError=o,s._onCompleted=u,s}return t.prototype.onNext=function(e){this.onError((0,qe.newError)("Received RECORD when resetting: received record is: "+qe.json.stringify(e),zr))},t.prototype.onError=function(e){e.code===zr&&this._onProtocolError&&this._onProtocolError(e.message),this._onError&&this._onError(e)},t.prototype.onCompleted=function(e){this._onCompleted&&this._onCompleted(oO.default.ofMessageResponse(e))},t}(Yr);B.RouteObserver=q4;var me={READY_STREAMING:{onSuccess:function(r,t){r._handleRunSuccess(t,function(){r._setState(me.STREAMING)})},onError:function(r,t){r._handleError(t)},name:function(){return"READY_STREAMING"}},READY:{onSuccess:function(r,t){r._handleRunSuccess(t,function(){return r._handleStreaming()})},onError:function(r,t){r._handleError(t)},name:function(){return"READY"}},STREAMING:{onSuccess:function(r,t){t.has_more?r._handleHasMore(t):r._handlePullSuccess(t)},onError:function(r,t){r._handleError(t)},name:function(){return"STREAMING"}},FAILED:{onError:function(r){},name:function(){return"FAILED"}},SUCCEEDED:{name:function(){return"SUCCEEDED"}}}});var Al=f(ho=>{"use strict";var N4=ho&&ho.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ho,"__esModule",{value:!0});var Il=Uu(),uO=Lu(),Vu=N4(Yt()),Rl=Je(),Wu=P(),sO=Wu.internal.bookmark.Bookmark,fO=Wu.internal.constants,aO=fO.ACCESS_MODE_WRITE,x4=fO.BOLT_PROTOCOL_V1,iZ=Wu.internal.logger.Logger,cO=Wu.internal.txConfig.TxConfig,D4=function(){function r(t,e,n,i,o,u){var s=n===void 0?{}:n,c=s.disableLosslessIntegers,a=s.useBigInt;i===void 0&&(i=function(){return null}),this._server=t||{},this._chunker=e,this._packer=this._createPacker(e),this._unpacker=this._createUnpacker(c,a),this._responseHandler=i(this),this._log=o,this._onProtocolError=u,this._fatalError=null}return Object.defineProperty(r.prototype,"version",{get:function(){return x4},enumerable:!1,configurable:!0}),r.prototype.packer=function(){return this._packer},r.prototype.unpacker=function(){return this._unpacker},r.prototype.transformMetadata=function(t){return t},r.prototype.initialize=function(t){var e=this,n=t===void 0?{}:t,i=n.userAgent,o=n.authToken,u=n.onError,s=n.onComplete,c=new Rl.LoginObserver({onError:function(a){return e._onLoginError(a,u)},onCompleted:function(a){return e._onLoginCompleted(a,s)}});return this.write(Vu.default.init(i,o),c,!0),c},r.prototype.prepareToClose=function(){},r.prototype.beginTransaction=function(t){var e=t===void 0?{}:t,n=e.bookmark,i=e.txConfig,o=e.database,u=e.mode,s=e.impersonatedUser,c=e.beforeError,a=e.afterError,l=e.beforeComplete,h=e.afterComplete;return this.run("BEGIN",n?n.asBeginTransactionParameters():{},{bookmark:n,txConfig:i,database:o,mode:u,impersonatedUser:s,beforeError:c,afterError:a,beforeComplete:l,afterComplete:h,flush:!1})},r.prototype.commitTransaction=function(t){var e=t===void 0?{}:t,n=e.beforeError,i=e.afterError,o=e.beforeComplete,u=e.afterComplete;return this.run("COMMIT",{},{bookmark:sO.empty(),txConfig:cO.empty(),mode:aO,beforeError:n,afterError:i,beforeComplete:o,afterComplete:u})},r.prototype.rollbackTransaction=function(t){var e=t===void 0?{}:t,n=e.beforeError,i=e.afterError,o=e.beforeComplete,u=e.afterComplete;return this.run("ROLLBACK",{},{bookmark:sO.empty(),txConfig:cO.empty(),mode:aO,beforeError:n,afterError:i,beforeComplete:o,afterComplete:u})},r.prototype.run=function(t,e,n){var i=n===void 0?{}:n,o=i.bookmark,u=i.txConfig,s=i.database,c=i.mode,a=i.impersonatedUser,l=i.beforeKeys,h=i.afterKeys,p=i.beforeError,y=i.afterError,O=i.beforeComplete,w=i.afterComplete,z=i.flush,S=z===void 0?!0:z,D=new Rl.ResultStreamObserver({server:this._server,beforeKeys:l,afterKeys:h,beforeError:p,afterError:y,beforeComplete:O,afterComplete:w});return(0,Il.assertTxConfigIsEmpty)(u,this._onProtocolError,D),(0,Il.assertDatabaseIsEmpty)(s,this._onProtocolError,D),(0,Il.assertImpersonatedUserIsEmpty)(a,this._onProtocolError,D),this.write(Vu.default.run(t,e),D,!1),this.write(Vu.default.pullAll(),D,S),D},Object.defineProperty(r.prototype,"currentFailure",{get:function(){return this._responseHandler.currentFailure},enumerable:!1,configurable:!0}),r.prototype.reset=function(t){var e=t===void 0?{}:t,n=e.onError,i=e.onComplete,o=new Rl.ResetObserver({onProtocolError:this._onProtocolError,onError:n,onComplete:i});return this.write(Vu.default.reset(),o,!0),o},r.prototype._createPacker=function(t){return new uO.v1.Packer(t)},r.prototype._createUnpacker=function(t,e){return new uO.v1.Unpacker(t,e)},r.prototype.write=function(t,e,n){var i=this,o=this.queueObserverIfProtocolIsNotBroken(e);o&&(this._log.isDebugEnabled()&&this._log.debug("C: "+t),this.packer().packStruct(t.signature,t.fields.map(function(u){return i.packer().packable(u)})),this._chunker.messageBoundary(),n&&this._chunker.flush())},r.prototype.notifyFatalError=function(t){return this._fatalError=t,this._responseHandler._notifyErrorToObservers(t)},r.prototype.updateCurrentObserver=function(){return this._responseHandler._updateCurrentObserver()},r.prototype.hasOngoingObservableRequests=function(){return this._responseHandler.hasOngoingObservableRequests()},r.prototype.queueObserverIfProtocolIsNotBroken=function(t){return this.isBroken()?(this.notifyFatalErrorToObserver(t),!1):this._responseHandler._queueObserver(t)},r.prototype.isBroken=function(){return!!this._fatalError},r.prototype.notifyFatalErrorToObserver=function(t){t&&t.onError&&t.onError(this._fatalError)},r.prototype.resetFailure=function(){this._responseHandler._resetFailure()},r.prototype._onLoginCompleted=function(t,e){if(t){var n=t.server;this._server.version||(this._server.version=n)}e&&e(t)},r.prototype._onLoginError=function(t,e){this._onProtocolError(t.message),e&&e(t)},r}();ho.default=D4});var jl=f(Kt=>{"use strict";var M4=Kt&&Kt.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),hO=Kt&&Kt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Kt,"__esModule",{value:!0});var k4=hO(Al()),lO=hO(Lu()),U4=P(),L4=U4.internal.constants.BOLT_PROTOCOL_V2,F4=function(r){M4(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype._createPacker=function(e){return new lO.default.Packer(e)},t.prototype._createUnpacker=function(e,n){return new lO.default.Unpacker(e,n)},Object.defineProperty(t.prototype,"version",{get:function(){return L4},enumerable:!1,configurable:!0}),t}(k4.default);Kt.default=F4});var Nl=f($e=>{"use strict";var B4=$e&&$e.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),zu=$e&&$e.__assign||function(){return zu=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},zu.apply(this,arguments)},pO=$e&&$e.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty($e,"__esModule",{value:!0});var V4=pO(jl()),Gt=pO(Yt()),Hu=Uu(),Qt=Je(),ql=P(),sZ=ql.internal.bookmark.Bookmark,W4=ql.internal.constants.BOLT_PROTOCOL_V3,H4=ql.internal.txConfig.TxConfig,_O="context",z4="CALL dbms.cluster.routing.getRoutingTable($"+_O+")",Y4=new Qt.StreamObserver,Z4=function(r){B4(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"version",{get:function(){return W4},enumerable:!1,configurable:!0}),t.prototype.transformMetadata=function(e){return"t_first"in e&&(e.result_available_after=e.t_first,delete e.t_first),"t_last"in e&&(e.result_consumed_after=e.t_last,delete e.t_last),e},t.prototype.initialize=function(e){var n=this,i=e===void 0?{}:e,o=i.userAgent,u=i.authToken,s=i.onError,c=i.onComplete,a=new Qt.LoginObserver({onError:function(l){return n._onLoginError(l,s)},onCompleted:function(l){return n._onLoginCompleted(l,c)}});return this.write(Gt.default.hello(o,u),a,!0),a},t.prototype.prepareToClose=function(){this.write(Gt.default.goodbye(),Y4,!0)},t.prototype.beginTransaction=function(e){var n=e===void 0?{}:e,i=n.bookmark,o=n.txConfig,u=n.database,s=n.impersonatedUser,c=n.mode,a=n.beforeError,l=n.afterError,h=n.beforeComplete,p=n.afterComplete,y=new Qt.ResultStreamObserver({server:this._server,beforeError:a,afterError:l,beforeComplete:h,afterComplete:p});return y.prepareToHandleSingleResponse(),(0,Hu.assertDatabaseIsEmpty)(u,this._onProtocolError,y),(0,Hu.assertImpersonatedUserIsEmpty)(s,this._onProtocolError,y),this.write(Gt.default.begin({bookmark:i,txConfig:o,mode:c}),y,!0),y},t.prototype.commitTransaction=function(e){var n=e===void 0?{}:e,i=n.beforeError,o=n.afterError,u=n.beforeComplete,s=n.afterComplete,c=new Qt.ResultStreamObserver({server:this._server,beforeError:i,afterError:o,beforeComplete:u,afterComplete:s});return c.prepareToHandleSingleResponse(),this.write(Gt.default.commit(),c,!0),c},t.prototype.rollbackTransaction=function(e){var n=e===void 0?{}:e,i=n.beforeError,o=n.afterError,u=n.beforeComplete,s=n.afterComplete,c=new Qt.ResultStreamObserver({server:this._server,beforeError:i,afterError:o,beforeComplete:u,afterComplete:s});return c.prepareToHandleSingleResponse(),this.write(Gt.default.rollback(),c,!0),c},t.prototype.run=function(e,n,i){var o=i===void 0?{}:i,u=o.bookmark,s=o.txConfig,c=o.database,a=o.impersonatedUser,l=o.mode,h=o.beforeKeys,p=o.afterKeys,y=o.beforeError,O=o.afterError,w=o.beforeComplete,z=o.afterComplete,S=o.flush,D=S===void 0?!0:S,W=new Qt.ResultStreamObserver({server:this._server,beforeKeys:h,afterKeys:p,beforeError:y,afterError:O,beforeComplete:w,afterComplete:z});return(0,Hu.assertDatabaseIsEmpty)(c,this._onProtocolError,W),(0,Hu.assertImpersonatedUserIsEmpty)(a,this._onProtocolError,W),this.write(Gt.default.runWithMetadata(e,n,{bookmark:u,txConfig:s,mode:l}),W,!1),this.write(Gt.default.pullAll(),W,D),W},t.prototype.requestRoutingInformation=function(e){var n,i=e.routingContext,o=i===void 0?{}:i,u=e.sessionContext,s=u===void 0?{}:u,c=e.onError,a=e.onCompleted,l=this.run(z4,(n={},n[_O]=o,n),zu(zu({},s),{txConfig:H4.empty()}));return new Qt.ProcedureRouteObserver({resultObserver:l,onProtocolError:this._onProtocolError,onError:c,onCompleted:a})},t}(V4.default);$e.default=Z4});var Ml=f(et=>{"use strict";var K4=et&&et.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Yu=et&&et.__assign||function(){return Yu=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Yu.apply(this,arguments)},vO=et&&et.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(et,"__esModule",{value:!0});var G4=vO(Nl()),po=vO(Yt()),dO=Uu(),xl=Je(),Dl=P(),cZ=Dl.internal.bookmark.Bookmark,bO=Dl.internal.constants,Q4=bO.BOLT_PROTOCOL_V4_0,X4=bO.FETCH_ALL,J4=Dl.internal.txConfig.TxConfig,yO="context",mO="database",$4="CALL dbms.routing.getRoutingTable($"+yO+", $"+mO+")",eW=function(r){K4(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"version",{get:function(){return Q4},enumerable:!1,configurable:!0}),t.prototype.beginTransaction=function(e){var n=e===void 0?{}:e,i=n.bookmark,o=n.txConfig,u=n.database,s=n.impersonatedUser,c=n.mode,a=n.beforeError,l=n.afterError,h=n.beforeComplete,p=n.afterComplete,y=new xl.ResultStreamObserver({server:this._server,beforeError:a,afterError:l,beforeComplete:h,afterComplete:p});return y.prepareToHandleSingleResponse(),(0,dO.assertImpersonatedUserIsEmpty)(s,this._onProtocolError,y),this.write(po.default.begin({bookmark:i,txConfig:o,database:u,mode:c}),y,!0),y},t.prototype.run=function(e,n,i){var o=i===void 0?{}:i,u=o.bookmark,s=o.txConfig,c=o.database,a=o.impersonatedUser,l=o.mode,h=o.beforeKeys,p=o.afterKeys,y=o.beforeError,O=o.afterError,w=o.beforeComplete,z=o.afterComplete,S=o.flush,D=S===void 0?!0:S,W=o.reactive,fe=W===void 0?!1:W,Kr=o.fetchSize,Gr=Kr===void 0?X4:Kr,ut=new xl.ResultStreamObserver({server:this._server,reactive:fe,fetchSize:Gr,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:h,afterKeys:p,beforeError:y,afterError:O,beforeComplete:w,afterComplete:z});(0,dO.assertImpersonatedUserIsEmpty)(a,this._onProtocolError,ut);var hs=fe;return this.write(po.default.runWithMetadata(e,n,{bookmark:u,txConfig:s,database:c,mode:l}),ut,hs&&D),fe||this.write(po.default.pull({n:Gr}),ut,D),ut},t.prototype._requestMore=function(e,n,i){this.write(po.default.pull({stmtId:e,n}),i,!0)},t.prototype._requestDiscard=function(e,n){this.write(po.default.discard({stmtId:e}),n,!0)},t.prototype._noOp=function(){},t.prototype.requestRoutingInformation=function(e){var n,i=e.routingContext,o=i===void 0?{}:i,u=e.databaseName,s=u===void 0?null:u,c=e.sessionContext,a=c===void 0?{}:c,l=e.onError,h=e.onCompleted,p=this.run($4,(n={},n[yO]=o,n[mO]=s,n),Yu(Yu({},a),{txConfig:J4.empty()}));return new xl.ProcedureRouteObserver({resultObserver:p,onProtocolError:this._onProtocolError,onError:l,onCompleted:h})},t}(G4.default);et.default=eW});var kl=f(Xt=>{"use strict";var tW=Xt&&Xt.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),OO=Xt&&Xt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Xt,"__esModule",{value:!0});var rW=OO(Ml()),nW=OO(Yt()),iW=Je(),oW=P(),uW=oW.internal.constants.BOLT_PROTOCOL_V4_1,sW=function(r){tW(t,r);function t(e,n,i,o,u,s,c){o===void 0&&(o=function(){return null});var a=r.call(this,e,n,i,o,u,s)||this;return a._serversideRouting=c,a}return Object.defineProperty(t.prototype,"version",{get:function(){return uW},enumerable:!1,configurable:!0}),t.prototype.initialize=function(e){var n=this,i=e===void 0?{}:e,o=i.userAgent,u=i.authToken,s=i.onError,c=i.onComplete,a=new iW.LoginObserver({onError:function(l){return n._onLoginError(l,s)},onCompleted:function(l){return n._onLoginCompleted(l,c)}});return this.write(nW.default.hello(o,u,this._serversideRouting),a,!0),a},t}(rW.default);Xt.default=sW});var Ul=f(Jt=>{"use strict";var aW=Jt&&Jt.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),cW=Jt&&Jt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Jt,"__esModule",{value:!0});var fW=cW(kl()),lW=P(),hW=lW.internal.constants.BOLT_PROTOCOL_V4_2,pW=function(r){aW(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"version",{get:function(){return hW},enumerable:!1,configurable:!0}),t}(fW.default);Jt.default=pW});var Zu=f($t=>{"use strict";var _W=$t&&$t.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),SO=$t&&$t.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty($t,"__esModule",{value:!0});var dW=SO(Ul()),gO=SO(Yt()),vW=Je(),bW=Je(),EO=P(),yW=EO.internal.bookmark.Bookmark,mW=EO.internal.constants.BOLT_PROTOCOL_V4_3,OW=function(r){_W(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"version",{get:function(){return mW},enumerable:!1,configurable:!0}),t.prototype.requestRoutingInformation=function(e){var n=e.routingContext,i=n===void 0?{}:n,o=e.databaseName,u=o===void 0?null:o,s=e.sessionContext,c=s===void 0?{}:s,a=e.onError,l=e.onCompleted,h=new vW.RouteObserver({onProtocolError:this._onProtocolError,onError:a,onCompleted:l}),p=c.bookmark||yW.empty();return this.write(gO.default.route(i,p.values(),u),h,!0),h},t.prototype.initialize=function(e){var n=this,i=e===void 0?{}:e,o=i.userAgent,u=i.authToken,s=i.onError,c=i.onComplete,a=new bW.LoginObserver({onError:function(l){return n._onLoginError(l,s)},onCompleted:function(l){return l.patch_bolt!==void 0&&n._applyPatches(l.patch_bolt),n._onLoginCompleted(l,c)}});return this.write(gO.default.hello(o,u,this._serversideRouting,["utc"]),a,!0),a},t.prototype._applyPatches=function(e){e.includes("utc")&&this._applyUtcPatch()},t.prototype._applyUtcPatch=function(){this._packer.useUtc=!0,this._unpacker.useUtc=!0},t}(dW.default);$t.default=OW});var CO=f(er=>{"use strict";var gW=er&&er.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),wO=er&&er.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(er,"__esModule",{value:!0});var SW=wO(Zu()),TO=P(),Ku=wO(Yt()),Ll=Je(),PO=TO.internal.constants,EW=PO.BOLT_PROTOCOL_V4_4,wW=PO.FETCH_ALL,TW=TO.internal.bookmark.Bookmark,PW=function(r){gW(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"version",{get:function(){return EW},enumerable:!1,configurable:!0}),t.prototype.requestRoutingInformation=function(e){var n=e.routingContext,i=n===void 0?{}:n,o=e.databaseName,u=o===void 0?null:o,s=e.impersonatedUser,c=s===void 0?null:s,a=e.sessionContext,l=a===void 0?{}:a,h=e.onError,p=e.onCompleted,y=new Ll.RouteObserver({onProtocolError:this._onProtocolError,onError:h,onCompleted:p}),O=l.bookmark||TW.empty();return this.write(Ku.default.routeV4x4(i,O.values(),{databaseName:u,impersonatedUser:c}),y,!0),y},t.prototype.run=function(e,n,i){var o=i===void 0?{}:i,u=o.bookmark,s=o.txConfig,c=o.database,a=o.mode,l=o.impersonatedUser,h=o.beforeKeys,p=o.afterKeys,y=o.beforeError,O=o.afterError,w=o.beforeComplete,z=o.afterComplete,S=o.flush,D=S===void 0?!0:S,W=o.reactive,fe=W===void 0?!1:W,Kr=o.fetchSize,Gr=Kr===void 0?wW:Kr,ut=new Ll.ResultStreamObserver({server:this._server,reactive:fe,fetchSize:Gr,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:h,afterKeys:p,beforeError:y,afterError:O,beforeComplete:w,afterComplete:z}),hs=fe;return this.write(Ku.default.runWithMetadata(e,n,{bookmark:u,txConfig:s,database:c,mode:a,impersonatedUser:l}),ut,hs&&D),fe||this.write(Ku.default.pull({n:Gr}),ut,D),ut},t.prototype.beginTransaction=function(e){var n=e===void 0?{}:e,i=n.bookmark,o=n.txConfig,u=n.database,s=n.mode,c=n.impersonatedUser,a=n.beforeError,l=n.afterError,h=n.beforeComplete,p=n.afterComplete,y=new Ll.ResultStreamObserver({server:this._server,beforeError:a,afterError:l,beforeComplete:h,afterComplete:p});return y.prepareToHandleSingleResponse(),this.write(Ku.default.begin({bookmark:i,txConfig:o,database:u,mode:s,impersonatedUser:c}),y,!0),y},t}(SW.default);er.default=PW});var RO=f(Fl=>{"use strict";Object.defineProperty(Fl,"__esModule",{value:!0});var tr=P(),CW=112,IW=113,RW=126,AW=127;function tt(){}function IO(r){return r}var jW={onNext:tt,onCompleted:tt,onError:tt},qW=function(){function r(t){var e=t===void 0?{}:t,n=e.transformMetadata,i=e.log,o=e.observer;this._pendingObservers=[],this._log=i,this._transformMetadata=n||IO,this._observer=Object.assign({onPendingObserversChange:tt,onError:tt,onFailure:tt,onErrorApplyTransformation:IO},o)}return Object.defineProperty(r.prototype,"currentFailure",{get:function(){return this._currentFailure},enumerable:!1,configurable:!0}),r.prototype.handleResponse=function(t){var e=t.fields[0];switch(t.signature){case IW:this._log.isDebugEnabled()&&this._log.debug("S: RECORD "+tr.json.stringify(t)),this._currentObserver.onNext(e);break;case CW:this._log.isDebugEnabled()&&this._log.debug("S: SUCCESS "+tr.json.stringify(t));try{var n=this._transformMetadata(e);this._currentObserver.onCompleted(n)}finally{this._updateCurrentObserver()}break;case AW:this._log.isDebugEnabled()&&this._log.debug("S: FAILURE "+tr.json.stringify(t));try{var i=(0,tr.newError)(e.message,e.code);this._currentFailure=this._observer.onErrorApplyTransformation(i),this._currentObserver.onError(this._currentFailure)}finally{this._updateCurrentObserver(),this._observer.onFailure(this._currentFailure)}break;case RW:this._log.isDebugEnabled()&&this._log.debug("S: IGNORED "+tr.json.stringify(t));try{this._currentFailure&&this._currentObserver.onError?this._currentObserver.onError(this._currentFailure):this._currentObserver.onError&&this._currentObserver.onError((0,tr.newError)("Ignored either because of an error or RESET"))}finally{this._updateCurrentObserver()}break;default:this._observer.onError((0,tr.newError)("Unknown Bolt protocol message: "+t))}},r.prototype._updateCurrentObserver=function(){this._currentObserver=this._pendingObservers.shift(),this._observer.onPendingObserversChange(this._pendingObservers.length)},r.prototype._queueObserver=function(t){return t=t||jW,t.onCompleted=t.onCompleted||tt,t.onError=t.onError||tt,t.onNext=t.onNext||tt,this._currentObserver===void 0?this._currentObserver=t:this._pendingObservers.push(t),this._observer.onPendingObserversChange(this._pendingObservers.length),!0},r.prototype._notifyErrorToObservers=function(t){for(this._currentObserver&&this._currentObserver.onError&&this._currentObserver.onError(t);this._pendingObservers.length>0;){var e=this._pendingObservers.shift();e&&e.onError&&e.onError(t)}},r.prototype.hasOngoingObservableRequests=function(){return this._currentObserver!=null||this._pendingObservers.length>0},r.prototype._resetFailure=function(){this._currentFailure=null},r}();Fl.default=qW});var AO=f(_o=>{"use strict";var rt=_o&&_o.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_o,"__esModule",{value:!0});var NW=P(),xW=rt(Al()),DW=rt(jl()),MW=rt(Nl()),kW=rt(Ml()),UW=rt(kl()),LW=rt(Ul()),FW=rt(Zu()),BW=rt(CO()),VW=rt(RO());function WW(r){var t=r===void 0?{}:r,e=t.version,n=t.chunker,i=t.dechunker,o=t.channel,u=t.disableLosslessIntegers,s=t.useBigInt,c=t.serversideRouting,a=t.server,l=t.log,h=t.observer,p=function(y){var O=new VW.default({transformMetadata:y.transformMetadata.bind(y),log:l,observer:h});return o.onerror=h.onError.bind(h),o.onmessage=function(w){return i.write(w)},i.onmessage=function(w){try{O.handleResponse(y.unpacker().unpack(w))}catch(z){return h.onError(z)}},O};return HW(e,a,n,{disableLosslessIntegers:u,useBigInt:s},c,p,h.onProtocolError.bind(h),l)}_o.default=WW;function HW(r,t,e,n,i,o,u,s){switch(r){case 1:return new xW.default(t,e,n,o,s,u);case 2:return new DW.default(t,e,n,o,s,u);case 3:return new MW.default(t,e,n,o,s,u);case 4:return new kW.default(t,e,n,o,s,u);case 4.1:return new UW.default(t,e,n,o,s,u,i);case 4.2:return new LW.default(t,e,n,o,s,u,i);case 4.3:return new FW.default(t,e,n,o,s,u,i);case 4.4:return new BW.default(t,e,n,o,s,u,i);default:throw(0,NW.newError)("Unknown Bolt protocol version: "+r)}}});var Qu=f(se=>{"use strict";var zW=se&&se.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),YW=se&&se.__exportStar||function(r,t){for(var e in r)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&zW(t,r,e)},Gu=se&&se.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(se,"__esModule",{value:!0});se.RawRoutingTable=se.BoltProtocol=void 0;var ZW=Gu(tm()),KW=Gu(AO()),GW=Gu(Zu()),QW=Gu(Pl());YW(Je(),se);se.BoltProtocol=GW.default;se.RawRoutingTable=QW.default;se.default={handshake:ZW.default,create:KW.default}});var Bl=f(rr=>{"use strict";Object.defineProperty(rr,"__esModule",{value:!0});rr.DEFAULT_ACQUISITION_TIMEOUT=rr.DEFAULT_MAX_SIZE=void 0;var Xu=100;rr.DEFAULT_MAX_SIZE=Xu;var Ju=60*1e3;rr.DEFAULT_ACQUISITION_TIMEOUT=Ju;var XW=function(){function r(t,e){this.maxSize=jO(t,Xu),this.acquisitionTimeout=jO(e,Ju)}return r.defaultConfig=function(){return new r(Xu,Ju)},r.fromDriverConfig=function(t){var e=qO(t.maxConnectionPoolSize),n=e?t.maxConnectionPoolSize:Xu,i=qO(t.connectionAcquisitionTimeout),o=i?t.connectionAcquisitionTimeout:Ju;return new r(n,o)},r}();rr.default=XW;function jO(r,t){return r===0||r?r:t}function qO(r){return r===0||r}});var DO=f(nt=>{"use strict";var $u=nt&&nt.__awaiter||function(r,t,e,n){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return new(e||(e=Promise))(function(o,u){function s(l){try{a(n.next(l))}catch(h){u(h)}}function c(l){try{a(n.throw(l))}catch(h){u(h)}}function a(l){l.done?o(l.value):i(l.value).then(s,c)}a((n=n.apply(r,t||[])).next())})},es=nt&&nt.__generator||function(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function s(a){return function(l){return c([a,l])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(o=a[0]&2?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[a[0]&2,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,i=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){e.label=a[1];break}if(a[0]===6&&e.label<o[1]){e.label=o[1],o=a;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(a);break}o[2]&&e.ops.pop(),e.trys.pop();continue}a=t.call(r,e)}catch(l){a=[6,l],i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},JW=nt&&nt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(nt,"__esModule",{value:!0});var $W=JW(Bl()),Vl=P(),e2=Vl.internal.logger.Logger,t2=function(){function r(t){var e=t===void 0?{}:t,n=e.create,i=n===void 0?function(S,D){return Promise.resolve()}:n,o=e.destroy,u=o===void 0?function(S){return Promise.resolve()}:o,s=e.validate,c=s===void 0?function(S){return!0}:s,a=e.installIdleObserver,l=a===void 0?function(S,D){}:a,h=e.removeIdleObserver,p=h===void 0?function(S){}:h,y=e.config,O=y===void 0?$W.default.defaultConfig():y,w=e.log,z=w===void 0?e2.noOp():w;this._create=i,this._destroy=u,this._validate=c,this._installIdleObserver=l,this._removeIdleObserver=p,this._maxSize=O.maxSize,this._acquisitionTimeout=O.acquisitionTimeout,this._pools={},this._pendingCreates={},this._acquireRequests={},this._activeResourceCounts={},this._poolState={},this._release=this._release.bind(this),this._log=z,this._closed=!1}return r.prototype.acquire=function(t){var e=this;return this._acquire(t).then(function(n){var i=t.asKey();if(n)return n;var o=e._acquireRequests,u=o[i];return u||(o[i]=[]),new Promise(function(s,c){var a,l=setTimeout(function(){var h=o[i];if(h&&(o[i]=h.filter(function(O){return O!==a})),!a.isCompleted()){var p=e.activeResourceCount(t),y=e.has(t)?e._pools[i].length:0;a.reject((0,Vl.newError)("Connection acquisition timed out in "+e._acquisitionTimeout+" ms. Pool status: Active conn count = "+p+", Idle conn count = "+y+"."))}},e._acquisitionTimeout);a=new n2(i,s,c,l,e._log),o[i].push(a)})})},r.prototype.purge=function(t){return this._purgeKey(t.asKey())},r.prototype.close=function(){return $u(this,void 0,void 0,function(){var t=this;return es(this,function(e){switch(e.label){case 0:return this._closed=!0,[4,Promise.all(Object.keys(this._pools).map(function(n){return t._purgeKey(n)}))];case 1:return[2,e.sent()]}})})},r.prototype.keepAll=function(t){var e=this,n=t.map(function(u){return u.asKey()}),i=Object.keys(this._pools),o=i.filter(function(u){return n.indexOf(u)===-1});return Promise.all(o.map(function(u){return e._purgeKey(u)}))},r.prototype.has=function(t){return t.asKey()in this._pools},r.prototype.activeResourceCount=function(t){return this._activeResourceCounts[t.asKey()]||0},r.prototype._acquire=function(t){return $u(this,void 0,void 0,function(){var e,n,i,o,u,s,c=this;return es(this,function(a){switch(a.label){case 0:if(this._closed)throw(0,Vl.newError)("Pool is closed, it is no more able to serve requests.");e=t.asKey(),n=this._pools[e],i=this._poolState[e],n||(n=[],i=new xO,this._pools[e]=n,this._pendingCreates[e]=0,this._poolState[e]=i),a.label=1;case 1:return n.length?(o=n.pop(),this._validate(o)?(this._removeIdleObserver&&this._removeIdleObserver(o),NO(e,this._activeResourceCounts),this._log.isDebugEnabled()&&this._log.debug(o+" acquired from the pool "+e),[2,o]):[3,2]):[3,5];case 2:return[4,this._destroy(o)];case 3:a.sent(),a.label=4;case 4:return[3,1];case 5:if(this._maxSize>0&&(u=this.activeResourceCount(t)+this._pendingCreates[e],u>=this._maxSize))return[2,null];this._pendingCreates[e]=this._pendingCreates[e]+1,a.label=6;case 6:return a.trys.push([6,,8,9]),[4,this._create(t,function(l,h){return c._release(i,l,h)})];case 7:return s=a.sent(),NO(e,this._activeResourceCounts),this._log.isDebugEnabled()&&this._log.debug(s+" created for the pool "+e),[3,9];case 8:return this._pendingCreates[e]=this._pendingCreates[e]-1,[7];case 9:return[2,s]}})})},r.prototype._release=function(t,e,n){return $u(this,void 0,void 0,function(){var i,o,u=this;return es(this,function(s){switch(s.label){case 0:return i=e.asKey(),o=this._pools[i],o&&t&&t.isActive()?this._validate(n)?[3,2]:(this._log.isDebugEnabled()&&this._log.debug(n+" destroyed and can't be released to the pool "+i+" because it is not functional"),[4,this._destroy(n)]):[3,4];case 1:return s.sent(),[3,3];case 2:this._installIdleObserver&&this._installIdleObserver(n,{onError:function(c){u._log.debug("Idle connection "+n+" destroyed because of error: "+c);var a=u._pools[i];a&&(u._pools[i]=a.filter(function(l){return l!==n})),u._destroy(n).catch(function(){})}}),o.push(n),this._log.isDebugEnabled()&&this._log.debug(n+" released to the pool "+i),s.label=3;case 3:return[3,6];case 4:return this._log.isDebugEnabled()&&this._log.debug(n+" destroyed and can't be released to the pool "+i+" because pool has been purged"),[4,this._destroy(n)];case 5:s.sent(),s.label=6;case 6:return r2(i,this._activeResourceCounts),this._processPendingAcquireRequests(e),[2]}})})},r.prototype._purgeKey=function(t){return $u(this,void 0,void 0,function(){var e,n,i,o;return es(this,function(u){switch(u.label){case 0:for(e=this._pools[t]||[],n=this._poolState[t]||new xO,i=[];e.length;)o=e.pop(),this._removeIdleObserver&&this._removeIdleObserver(o),i.push(this._destroy(o));return n.close(),delete this._pools[t],delete this._poolState[t],[4,Promise.all(i)];case 1:return u.sent(),[2]}})})},r.prototype._processPendingAcquireRequests=function(t){var e=this,n=t.asKey(),i=this._acquireRequests[n],o=this._poolState[n];if(i){var u=i.shift();u?this._acquire(t).catch(function(s){return u.reject(s),null}).then(function(s){s&&(u.isCompleted()?e._release(o,t,s):u.resolve(s))}):delete this._acquireRequests[n]}},r}();function NO(r,t){var e=t[r]||0;t[r]=e+1}function r2(r,t){var e=t[r]||0,n=e-1;n>0?t[r]=n:delete t[r]}var n2=function(){function r(t,e,n,i,o){this._key=t,this._resolve=e,this._reject=n,this._timeoutId=i,this._log=o,this._completed=!1}return r.prototype.isCompleted=function(){return this._completed},r.prototype.resolve=function(t){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._log.isDebugEnabled()&&this._log.debug(t+" acquired from the pool "+this._key),this._resolve(t))},r.prototype.reject=function(t){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._reject(t))},r}(),xO=function(){function r(){this._active=!0}return r.prototype.isActive=function(){return this._active},r.prototype.close=function(){this._active=!1},r}();nt.default=t2});var Hl=f(Z=>{"use strict";var i2=Z&&Z.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),o2=Z&&Z.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),u2=Z&&Z.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&i2(t,r,e);return o2(t,r),t},s2=Z&&Z.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Z,"__esModule",{value:!0});Z.DEFAULT_MAX_SIZE=Z.DEFAULT_ACQUISITION_TIMEOUT=Z.PoolConfig=Z.Pool=void 0;var Wl=u2(Bl());Z.PoolConfig=Wl.default;Object.defineProperty(Z,"DEFAULT_ACQUISITION_TIMEOUT",{enumerable:!0,get:function(){return Wl.DEFAULT_ACQUISITION_TIMEOUT}});Object.defineProperty(Z,"DEFAULT_MAX_SIZE",{enumerable:!0,get:function(){return Wl.DEFAULT_MAX_SIZE}});var MO=s2(DO());Z.Pool=MO.default;Z.default=MO.default});var zl=f(vo=>{"use strict";var a2=vo&&vo.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(vo,"__esModule",{value:!0});var c2=P(),f2=function(r){a2(t,r);function t(e){var n=r.call(this)||this;return n._connection=e,n}return t.prototype.acquireConnection=function(e){var n=e===void 0?{}:e,i=n.accessMode,o=n.database,u=n.bookmarks,s=this._connection;return this._connection=null,Promise.resolve(s)},t}(c2.ConnectionProvider);vo.default=f2});var ts=f(Yl=>{"use strict";Object.defineProperty(Yl,"__esModule",{value:!0});var l2=function(){function r(t){this._errorHandler=t}return Object.defineProperty(r.prototype,"id",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"databaseId",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),r.prototype.isOpen=function(){throw new Error("not implemented")},r.prototype.protocol=function(){throw new Error("not implemented")},Object.defineProperty(r.prototype,"address",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"version",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"server",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),r.prototype.connect=function(t,e){throw new Error("not implemented")},r.prototype.write=function(t,e,n){throw new Error("not implemented")},r.prototype.resetAndFlush=function(){throw new Error("not implemented")},r.prototype.close=function(){throw new Error("not implemented")},r.prototype.handleAndTransformError=function(t,e){return this._errorHandler?this._errorHandler.handleAndTransformError(t,e):t},r}();Yl.default=l2});var FO=f(be=>{"use strict";var h2=be&&be.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),p2=be&&be.__awaiter||function(r,t,e,n){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return new(e||(e=Promise))(function(o,u){function s(l){try{a(n.next(l))}catch(h){u(h)}}function c(l){try{a(n.throw(l))}catch(h){u(h)}}function a(l){l.done?o(l.value):i(l.value).then(s,c)}a((n=n.apply(r,t||[])).next())})},_2=be&&be.__generator||function(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function s(a){return function(l){return c([a,l])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(o=a[0]&2?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[a[0]&2,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,i=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){e.label=a[1];break}if(a[0]===6&&e.label<o[1]){e.label=o[1],o=a;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(a);break}o[2]&&e.ops.pop(),e.trys.pop();continue}a=t.call(r,e)}catch(l){a=[6,l],i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},UO=be&&be.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(be,"__esModule",{value:!0});be.createChannelConnection=void 0;var rs=Br(),bo=P(),d2=UO(ts()),kO=UO(Qu()),v2=bo.error.PROTOCOL_ERROR,b2=bo.internal.logger.Logger,y2=0;function m2(r,t,e,n,i,o){i===void 0&&(i=null),o===void 0&&(o=function(c){return new rs.Channel(c)});var u=new rs.ChannelConfig(r,t,e.errorCode()),s=o(u);return kO.default.handshake(s).then(function(c){var a=c.protocolVersion,l=c.consumeRemainingBuffer,h=new rs.Chunker(s),p=new rs.Dechunker,y=function(w){return kO.default.create({version:a,channel:s,chunker:h,dechunker:p,disableLosslessIntegers:t.disableLosslessIntegers,useBigInt:t.useBigInt,serversideRouting:i,server:w.server,log:w.logger,observer:{onPendingObserversChange:w._handleOngoingRequestsNumberChange.bind(w),onError:w._handleFatalError.bind(w),onFailure:w._resetOnFailure.bind(w),onProtocolError:w._handleProtocolError.bind(w),onErrorApplyTransformation:function(z){return w.handleAndTransformError(z,w._address)}}})},O=new LO(s,e,r,n,t.disableLosslessIntegers,i,h,y);return l(function(w){return p.write(w)}),O}).catch(function(c){return s.close().then(function(){throw c})})}be.createChannelConnection=m2;var LO=function(r){h2(t,r);function t(e,n,i,o,u,s,c,a){u===void 0&&(u=!1),s===void 0&&(s=null);var l=r.call(this,n)||this;return l._id=y2++,l._address=i,l._server={address:i.asHostPort()},l.creationTimestamp=Date.now(),l._disableLosslessIntegers=u,l._ch=e,l._chunker=c,l._log=O2(l,o),l._serversideRouting=s,l._dbConnectionId=null,l._protocol=a(l),l._isBroken=!1,l._log.isDebugEnabled()&&l._log.debug("created towards "+i),l}return Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"databaseId",{get:function(){return this._dbConnectionId},set:function(e){this._dbConnectionId=e},enumerable:!1,configurable:!0}),t.prototype.connect=function(e,n){return this._initialize(e,n)},t.prototype._initialize=function(e,n){var i=this,o=this;return new Promise(function(u,s){i._protocol.initialize({userAgent:e,authToken:n,onError:function(c){return s(c)},onComplete:function(c){if(c){var a=c.server;(!i.version||a)&&(i.version=a);var l=c.connection_id;if(i.databaseId||(i.databaseId=l),c.hints){var h=c.hints["connection.recv_timeout_seconds"];if(h!=null){var p=(0,bo.toNumber)(h);Number.isInteger(p)&&p>0?i._ch.setupReceiveTimeout(p*1e3):i._log.info("Server located at "+i._address+" supplied an invalid connection receive timeout value ("+p+"). Please, verify the server configuration and status because this can be the symptom of a bigger issue.")}}}u(o)}})})},t.prototype.protocol=function(){return this._protocol},Object.defineProperty(t.prototype,"address",{get:function(){return this._address},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this._server.version},set:function(e){this._server.version=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"server",{get:function(){return this._server},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"logger",{get:function(){return this._log},enumerable:!1,configurable:!0}),t.prototype._handleFatalError=function(e){this._isBroken=!0,this._error=this.handleAndTransformError(this._protocol.currentFailure||e,this._address),this._log.isErrorEnabled()&&this._log.error("experienced a fatal error caused by "+this._error+" ("+bo.json.stringify(this._error)+")"),this._protocol.notifyFatalError(this._error)},t.prototype._queueObserver=function(e){return this._protocol.queueObserverIfProtocolIsNotBroken(e)},t.prototype.hasOngoingObservableRequests=function(){return this._protocol.hasOngoingObservableRequests()},t.prototype.resetAndFlush=function(){var e=this;return new Promise(function(n,i){e._protocol.reset({onError:function(o){if(e._isBroken)i(o);else{var u=e._handleProtocolError("Received FAILURE as a response for RESET: "+o);i(u)}},onComplete:function(){n()}})})},t.prototype._resetOnFailure=function(){var e=this;!this.isOpen()||this._protocol.reset({onError:function(){e._protocol.resetFailure()},onComplete:function(){e._protocol.resetFailure()}})},t.prototype._updateCurrentObserver=function(){this._protocol.updateCurrentObserver()},t.prototype.isOpen=function(){return!this._isBroken&&this._ch._open},t.prototype._handleOngoingRequestsNumberChange=function(e){e===0?this._ch.stopReceiveTimeout():this._ch.startReceiveTimeout()},t.prototype.close=function(){return p2(this,void 0,void 0,function(){return _2(this,function(e){switch(e.label){case 0:return this._log.isDebugEnabled()&&this._log.debug("closing"),this._protocol&&this.isOpen()&&this._protocol.prepareToClose(),[4,this._ch.close()];case 1:return e.sent(),this._log.isDebugEnabled()&&this._log.debug("closed"),[2]}})})},t.prototype.toString=function(){return"Connection ["+this.id+"]["+(this.databaseId||"")+"]"},t.prototype._handleProtocolError=function(e){this._protocol.resetFailure(),this._updateCurrentObserver();var n=(0,bo.newError)(e,v2);return this._handleFatalError(n),n},t}(d2.default);be.default=LO;function O2(r,t){return new b2(t._level,function(e,n){return t._loggerFunction(e,r+" "+n)})}});var BO=f(nr=>{"use strict";var g2=nr&&nr.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),S2=nr&&nr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(nr,"__esModule",{value:!0});var E2=S2(ts()),w2=function(r){g2(t,r);function t(e,n){var i=r.call(this,n)||this;return n&&(i._originalErrorHandler=e._errorHandler,e._errorHandler=i._errorHandler),i._delegate=e,i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"databaseId",{get:function(){return this._delegate.databaseId},set:function(e){this._delegate.databaseId=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"server",{get:function(){return this._delegate.server},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"address",{get:function(){return this._delegate.address},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this._delegate.version},set:function(e){this._delegate.version=e},enumerable:!1,configurable:!0}),t.prototype.isOpen=function(){return this._delegate.isOpen()},t.prototype.protocol=function(){return this._delegate.protocol()},t.prototype.connect=function(e,n){return this._delegate.connect(e,n)},t.prototype.write=function(e,n,i){return this._delegate.write(e,n,i)},t.prototype.resetAndFlush=function(){return this._delegate.resetAndFlush()},t.prototype.close=function(){return this._delegate.close()},t.prototype._release=function(){return this._originalErrorHandler&&(this._delegate._errorHandler=this._originalErrorHandler),this._delegate._release()},t}(E2.default);nr.default=w2});var WO=f(Kl=>{"use strict";Object.defineProperty(Kl,"__esModule",{value:!0});var VO=P(),T2=VO.error.SERVICE_UNAVAILABLE,P2=VO.error.SESSION_EXPIRED,C2=function(){function r(t,e,n,i){this._errorCode=t,this._handleUnavailability=e||Zl,this._handleWriteFailure=n||Zl,this._handleAuthorizationExpired=i||Zl}return r.create=function(t){var e=t.errorCode,n=t.handleUnavailability,i=t.handleWriteFailure,o=t.handleAuthorizationExpired;return new r(e,n,i,o)},r.prototype.errorCode=function(){return this._errorCode},r.prototype.handleAndTransformError=function(t,e){return I2(t)?this._handleAuthorizationExpired(t,e):R2(t)?this._handleUnavailability(t,e):A2(t)?this._handleWriteFailure(t,e):t},r}();Kl.default=C2;function I2(r){return r&&(r.code==="Neo.ClientError.Security.AuthorizationExpired"||r.code==="Neo.ClientError.Security.TokenExpired")}function R2(r){return r?r.code===P2||r.code===T2||r.code==="Neo.TransientError.General.DatabaseUnavailable":!1}function A2(r){return r?r.code==="Neo.ClientError.Cluster.NotALeader"||r.code==="Neo.ClientError.General.ForbiddenOnReadOnlyDatabase":!1}function Zl(r){return r}});var ns=f(V=>{"use strict";var j2=V&&V.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),q2=V&&V.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),N2=V&&V.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&j2(t,r,e);return q2(t,r),t},Gl=V&&V.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(V,"__esModule",{value:!0});V.createChannelConnection=V.ConnectionErrorHandler=V.DelegateConnection=V.ChannelConnection=V.Connection=void 0;var HO=Gl(ts());V.Connection=HO.default;var zO=N2(FO());V.ChannelConnection=zO.default;Object.defineProperty(V,"createChannelConnection",{enumerable:!0,get:function(){return zO.createChannelConnection}});var x2=Gl(BO());V.DelegateConnection=x2.default;var D2=Gl(WO());V.ConnectionErrorHandler=D2.default;V.default=HO.default});var is=f(re=>{"use strict";var M2=re&&re.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),k2=re&&re.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),U2=re&&re.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),L2=re&&re.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&k2(t,r,e);return U2(t,r),t},F2=re&&re.__awaiter||function(r,t,e,n){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return new(e||(e=Promise))(function(o,u){function s(l){try{a(n.next(l))}catch(h){u(h)}}function c(l){try{a(n.throw(l))}catch(h){u(h)}}function a(l){l.done?o(l.value):i(l.value).then(s,c)}a((n=n.apply(r,t||[])).next())})},B2=re&&re.__generator||function(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function s(a){return function(l){return c([a,l])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(o=a[0]&2?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[a[0]&2,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,i=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){e.label=a[1];break}if(a[0]===6&&e.label<o[1]){e.label=o[1],o=a;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(a);break}o[2]&&e.ops.pop(),e.trys.pop();continue}a=t.call(r,e)}catch(l){a=[6,l],i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(re,"__esModule",{value:!0});var YO=ns(),ZO=L2(Hl()),KO=P(),V2=KO.error.SERVICE_UNAVAILABLE,W2=function(r){M2(t,r);function t(e,n){var i=e.id,o=e.config,u=e.log,s=e.userAgent,c=e.authToken;n===void 0&&(n=null);var a=r.call(this)||this;return a._id=i,a._config=o,a._log=u,a._userAgent=s,a._authToken=c,a._createChannelConnection=n||function(l){return(0,YO.createChannelConnection)(l,a._config,a._createConnectionErrorHandler(),a._log)},a._connectionPool=new ZO.default({create:a._createConnection.bind(a),destroy:a._destroyConnection.bind(a),validate:a._validateConnection.bind(a),installIdleObserver:t._installIdleObserverOnConnection.bind(a),removeIdleObserver:t._removeIdleObserverOnConnection.bind(a),config:ZO.PoolConfig.fromDriverConfig(o),log:a._log}),a._openConnections={},a}return t.prototype._createConnectionErrorHandler=function(){return new YO.ConnectionErrorHandler(V2)},t.prototype._createConnection=function(e,n){var i=this;return this._createChannelConnection(e).then(function(o){return o._release=function(){return n(e,o)},i._openConnections[o.id]=o,o.connect(i._userAgent,i._authToken).catch(function(u){throw i._destroyConnection(o),u})})},t.prototype._validateConnection=function(e){if(!e.isOpen())return!1;var n=this._config.maxConnectionLifetime,i=Date.now()-e.creationTimestamp;return i<=n},t.prototype._destroyConnection=function(e){return delete this._openConnections[e.id],e.close()},t.prototype.close=function(){return F2(this,void 0,void 0,function(){return B2(this,function(e){switch(e.label){case 0:return[4,this._connectionPool.close()];case 1:return e.sent(),[4,Promise.all(Object.values(this._openConnections).map(function(n){return n.close()}))];case 2:return e.sent(),[2]}})})},t._installIdleObserverOnConnection=function(e,n){e._queueObserver(n)},t._removeIdleObserverOnConnection=function(e){e._updateCurrentObserver()},t}(KO.ConnectionProvider);re.default=W2});var GO=f(Ne=>{"use strict";var H2=Ne&&Ne.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),os=Ne&&Ne.__awaiter||function(r,t,e,n){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return new(e||(e=Promise))(function(o,u){function s(l){try{a(n.next(l))}catch(h){u(h)}}function c(l){try{a(n.throw(l))}catch(h){u(h)}}function a(l){l.done?o(l.value):i(l.value).then(s,c)}a((n=n.apply(r,t||[])).next())})},us=Ne&&Ne.__generator||function(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function s(a){return function(l){return c([a,l])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(o=a[0]&2?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[a[0]&2,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,i=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){e.label=a[1];break}if(a[0]===6&&e.label<o[1]){e.label=o[1],o=a;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(a);break}o[2]&&e.ops.pop(),e.trys.pop();continue}a=t.call(r,e)}catch(l){a=[6,l],i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},z2=Ne&&Ne.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ne,"__esModule",{value:!0});var Y2=z2(is()),Ql=ns(),Xl=P(),Jl=Xl.internal.constants,Z2=Jl.BOLT_PROTOCOL_V3,K2=Jl.BOLT_PROTOCOL_V4_0,G2=Jl.BOLT_PROTOCOL_V4_4,Q2=Xl.error.SERVICE_UNAVAILABLE,IZ=Xl.error.newError,X2=function(r){H2(t,r);function t(e){var n=e.id,i=e.config,o=e.log,u=e.address,s=e.userAgent,c=e.authToken,a=r.call(this,{id:n,config:i,log:o,userAgent:s,authToken:c})||this;return a._address=u,a}return t.prototype.acquireConnection=function(e){var n=this,i=e===void 0?{}:e,o=i.accessMode,u=i.database,s=i.bookmarks,c=Ql.ConnectionErrorHandler.create({errorCode:Q2,handleAuthorizationExpired:function(a,l){return n._handleAuthorizationExpired(a,l,u)}});return this._connectionPool.acquire(this._address).then(function(a){return new Ql.DelegateConnection(a,c)})},t.prototype._handleAuthorizationExpired=function(e,n,i){return this._log.warn("Direct driver "+this._id+" will close connection to "+n+" for database '"+i+"' because of an error "+e.code+" '"+e.message+"'"),this._connectionPool.purge(n).catch(function(){}),e},t.prototype._hasProtocolVersion=function(e){return os(this,void 0,void 0,function(){var n,i;return us(this,function(o){switch(o.label){case 0:return[4,(0,Ql.createChannelConnection)(this._address,this._config,this._createConnectionErrorHandler(),this._log)];case 1:return n=o.sent(),i=n.protocol()?n.protocol().version:null,[4,n.close()];case 2:return o.sent(),i?[2,e(i)]:[2,!1]}})})},t.prototype.supportsMultiDb=function(){return os(this,void 0,void 0,function(){return us(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=K2})];case 1:return[2,e.sent()]}})})},t.prototype.supportsTransactionConfig=function(){return os(this,void 0,void 0,function(){return us(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=Z2})];case 1:return[2,e.sent()]}})})},t.prototype.supportsUserImpersonation=function(){return os(this,void 0,void 0,function(){return us(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=G2})];case 1:return[2,e.sent()]}})})},t}(Y2.default);Ne.default=X2});var ih=f(it=>{"use strict";var $l=it&&it.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,o=[],u;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){u={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(u)throw u.error}}return o},eh=it&&it.__spreadArray||function(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return r.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(it,"__esModule",{value:!0});it.createValidRoutingTable=void 0;var Oe=P(),XO=Oe.internal.constants,J2=XO.ACCESS_MODE_WRITE,$2=XO.ACCESS_MODE_READ,th=Oe.internal.serverAddress.ServerAddress,nh=Oe.error.PROTOCOL_ERROR,eH=1,JO=function(){function r(t){var e=t===void 0?{}:t,n=e.database,i=e.routers,o=e.readers,u=e.writers,s=e.expirationTime,c=e.ttl;this.database=n||null,this.databaseName=n||"default database",this.routers=i||[],this.readers=o||[],this.writers=u||[],this.expirationTime=s||(0,Oe.int)(0),this.ttl=c}return r.fromRawRoutingTable=function(t,e,n){return $O(t,e,n)},r.prototype.forget=function(t){this.readers=ss(this.readers,t),this.writers=ss(this.writers,t)},r.prototype.forgetRouter=function(t){this.routers=ss(this.routers,t)},r.prototype.forgetWriter=function(t){this.writers=ss(this.writers,t)},r.prototype.isStaleFor=function(t){return this.expirationTime.lessThan(Date.now())||this.routers.length<eH||t===$2&&this.readers.length===0||t===J2&&this.writers.length===0},r.prototype.isExpiredFor=function(t){return this.expirationTime.add(t).lessThan(Date.now())},r.prototype.allServers=function(){return eh(eh(eh([],$l(this.routers),!1),$l(this.readers),!1),$l(this.writers),!1)},r.prototype.toString=function(){return"RoutingTable["+("database="+this.databaseName+", ")+("expirationTime="+this.expirationTime+", ")+("currentTime="+Date.now()+", ")+("routers=["+this.routers+"], ")+("readers=["+this.readers+"], ")+("writers=["+this.writers+"]]")},r}();it.default=JO;function ss(r,t){return r.filter(function(e){return e.asKey()!==t.asKey()})}function $O(r,t,e){var n=e.ttl,i=rH(e,t),o=tH(e,t),u=o.routers,s=o.readers,c=o.writers;return QO(u,"routers",t),QO(s,"readers",t),new JO({database:r||e.db,routers:u,readers:s,writers:c,expirationTime:i,ttl:n})}it.createValidRoutingTable=$O;function tH(r,t){try{var e=[],n=[],i=[];return r.servers.forEach(function(o){var u=o.role,s=o.addresses;u==="ROUTE"?e=rh(s).map(function(c){return th.fromUrl(c)}):u==="WRITE"?i=rh(s).map(function(c){return th.fromUrl(c)}):u==="READ"&&(n=rh(s).map(function(c){return th.fromUrl(c)}))}),{routers:e,readers:n,writers:i}}catch(o){throw(0,Oe.newError)("Unable to parse servers entry from router "+t+` from addresses:
`+Oe.json.stringify(r.servers)+`
Error message: `+o.message,nh)}}function rH(r,t){try{var e=(0,Oe.int)(Date.now()),n=(0,Oe.int)(r.ttl).multiply(1e3).add(e);return n.lessThan(e)?Oe.Integer.MAX_VALUE:n}catch(i){throw(0,Oe.newError)("Unable to parse TTL entry from router "+t+` from raw routing table:
`+Oe.json.stringify(r)+`
Error message: `+i.message,nh)}}function QO(r,t,e){if(r.length===0)throw(0,Oe.newError)("Received no "+t+" from router "+e,nh)}function rh(r){if(!Array.isArray(r))throw new TypeError("Array expected but got: "+r);return Array.from(r)}});var tg=f(yo=>{"use strict";var nH=yo&&yo.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(yo,"__esModule",{value:!0});var iH=nH(ih()),oH=Qu(),eg=P(),uH=eg.error.SERVICE_UNAVAILABLE,sH="Neo.ClientError.Procedure.ProcedureNotFound",aH="Neo.ClientError.Database.DatabaseNotFound",cH=function(){function r(t){this._routingContext=t}return r.prototype.lookupRoutingTableOnRouter=function(t,e,n,i){var o=this;return t._acquireConnection(function(u){return o._requestRawRoutingTable(u,t,e,n,i).then(function(s){return s.isNull?null:iH.default.fromRawRoutingTable(e,n,s)})})},r.prototype._requestRawRoutingTable=function(t,e,n,i,o){var u=this;return new Promise(function(s,c){t.protocol().requestRoutingInformation({routingContext:u._routingContext,databaseName:n,impersonatedUser:o,sessionContext:{bookmark:e._lastBookmark,mode:e._mode,database:e._database,afterComplete:e._onComplete},onCompleted:s,onError:function(a){a.code===aH?c(a):a.code===sH?c((0,eg.newError)("Server at "+i.asHostPort()+" can't perform routing. Make sure you are connecting to a causal cluster",uH)):s(oH.RawRoutingTable.ofNull())}})})},r}();yo.default=cH});var ig=f(ot=>{"use strict";var rg=ot&&ot.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ot,"__esModule",{value:!0});ot.RoutingTable=ot.Rediscovery=void 0;var ng=rg(tg());ot.Rediscovery=ng.default;var fH=rg(ih());ot.RoutingTable=fH.default;ot.default=ng.default});var lg=f(U=>{"use strict";var lH=U&&U.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),as=U&&U.__assign||function(){return as=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},as.apply(this,arguments)},hH=U&&U.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),pH=U&&U.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),_H=U&&U.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&hH(t,r,e);return pH(t,r),t},ae=U&&U.__awaiter||function(r,t,e,n){function i(o){return o instanceof e?o:new e(function(u){u(o)})}return new(e||(e=Promise))(function(o,u){function s(l){try{a(n.next(l))}catch(h){u(h)}}function c(l){try{a(n.throw(l))}catch(h){u(h)}}function a(l){l.done?o(l.value):i(l.value).then(s,c)}a((n=n.apply(r,t||[])).next())})},ce=U&&U.__generator||function(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,u;return u={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function s(a){return function(l){return c([a,l])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(o=a[0]&2?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[a[0]&2,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,i=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){e.label=a[1];break}if(a[0]===6&&e.label<o[1]){e.label=o[1],o=a;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(a);break}o[2]&&e.ops.pop(),e.trys.pop();continue}a=t.call(r,e)}catch(l){a=[6,l],i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},og=U&&U.__values||function(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],n=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ug=U&&U.__read||function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,o=[],u;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){u={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(u)throw u.error}}return o},fg=U&&U.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(U,"__esModule",{value:!0});var ge=P(),sg=_H(ig()),dH=Br(),vH=fg(zl()),bH=fg(is()),yH=sl(),ir=ns(),mH=ge.error.SERVICE_UNAVAILABLE,mo=ge.error.SESSION_EXPIRED,OH=ge.internal.bookmark.Bookmark,Oo=ge.internal.constants,ag=Oo.ACCESS_MODE_READ,cg=Oo.ACCESS_MODE_WRITE,gH=Oo.BOLT_PROTOCOL_V3,SH=Oo.BOLT_PROTOCOL_V4_0,EH=Oo.BOLT_PROTOCOL_V4_4,wH="Neo.ClientError.Security.Unauthorized",TH="Neo.ClientError.Database.DatabaseNotFound",PH="system",oh=null,CH=(0,ge.int)(3e4),IH=function(r){lH(t,r);function t(e){var n=e.id,i=e.address,o=e.routingContext,u=e.hostNameResolver,s=e.config,c=e.log,a=e.userAgent,l=e.authToken,h=e.routingTablePurgeDelay,p=r.call(this,{id:n,config:s,log:c,userAgent:a,authToken:l},function(y){return(0,ir.createChannelConnection)(y,p._config,p._createConnectionErrorHandler(),p._log,p._routingContext)})||this;return p._routingContext=as(as({},o),{address:i.toString()}),p._seedRouter=i,p._rediscovery=new sg.default(p._routingContext),p._loadBalancingStrategy=new yH.LeastConnectedLoadBalancingStrategy(p._connectionPool),p._hostNameResolver=u,p._dnsResolver=new dH.HostNameResolver,p._log=c,p._useSeedRouter=!0,p._routingTableRegistry=new RH(h?(0,ge.int)(h):CH),p}return t.prototype._createConnectionErrorHandler=function(){return new ir.ConnectionErrorHandler(mo)},t.prototype._handleUnavailability=function(e,n,i){return this._log.warn("Routing driver "+this._id+" will forget "+n+" for database '"+i+"' because of an error "+e.code+" '"+e.message+"'"),this.forget(n,i||oh),e},t.prototype._handleAuthorizationExpired=function(e,n,i){return this._log.warn("Routing driver "+this._id+" will close connections to "+n+" for database '"+i+"' because of an error "+e.code+" '"+e.message+"'"),this._connectionPool.purge(n).catch(function(){}),e},t.prototype._handleWriteFailure=function(e,n,i){return this._log.warn("Routing driver "+this._id+" will forget writer "+n+" for database '"+i+"' because of an error "+e.code+" '"+e.message+"'"),this.forgetWriter(n,i||oh),(0,ge.newError)("No longer possible to write to server at "+n,mo)},t.prototype.acquireConnection=function(e){var n=e===void 0?{}:e,i=n.accessMode,o=n.database,u=n.bookmarks,s=n.impersonatedUser,c=n.onDatabaseNameResolved;return ae(this,void 0,void 0,function(){var a,l,h,p,y,O,w,z,S=this;return ce(this,function(D){switch(D.label){case 0:return h={database:o||oh},p=new ir.ConnectionErrorHandler(mo,function(W,fe){return S._handleUnavailability(W,fe,h.database)},function(W,fe){return S._handleWriteFailure(W,fe,h.database)},function(W,fe){return S._handleAuthorizationExpired(W,fe,h.database)}),[4,this._freshRoutingTable({accessMode:i,database:h.database,bookmark:u,impersonatedUser:s,onDatabaseNameResolved:function(W){h.database=h.database||W,c&&c(W)}})];case 1:if(y=D.sent(),i===ag)l=this._loadBalancingStrategy.selectReader(y.readers),a="read";else if(i===cg)l=this._loadBalancingStrategy.selectWriter(y.writers),a="write";else throw(0,ge.newError)("Illegal mode "+i);if(!l)throw(0,ge.newError)("Failed to obtain connection towards "+a+" server. Known routing table is: "+y,mo);D.label=2;case 2:return D.trys.push([2,4,,5]),[4,this._acquireConnectionToServer(l,a,y)];case 3:return O=D.sent(),[2,new ir.DelegateConnection(O,p)];case 4:throw w=D.sent(),z=p.handleAndTransformError(w,l),z;case 5:return[2]}})})},t.prototype._hasProtocolVersion=function(e){return ae(this,void 0,void 0,function(){var n,i,o,u,s,c;return ce(this,function(a){switch(a.label){case 0:return[4,this._resolveSeedRouter(this._seedRouter)];case 1:n=a.sent(),o=0,a.label=2;case 2:if(!(o<n.length))return[3,8];a.label=3;case 3:return a.trys.push([3,6,,7]),[4,(0,ir.createChannelConnection)(n[o],this._config,this._createConnectionErrorHandler(),this._log)];case 4:return u=a.sent(),s=u.protocol()?u.protocol().version:null,[4,u.close()];case 5:return a.sent(),s?[2,e(s)]:[2,!1];case 6:return c=a.sent(),i=c,[3,7];case 7:return o++,[3,2];case 8:if(i)throw i;return[2,!1]}})})},t.prototype.supportsMultiDb=function(){return ae(this,void 0,void 0,function(){return ce(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=SH})];case 1:return[2,e.sent()]}})})},t.prototype.supportsTransactionConfig=function(){return ae(this,void 0,void 0,function(){return ce(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=gH})];case 1:return[2,e.sent()]}})})},t.prototype.supportsUserImpersonation=function(){return ae(this,void 0,void 0,function(){return ce(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=EH})];case 1:return[2,e.sent()]}})})},t.prototype.forget=function(e,n){this._routingTableRegistry.apply(n,{applyWhenExists:function(i){return i.forget(e)}}),this._connectionPool.purge(e).catch(function(){})},t.prototype.forgetWriter=function(e,n){this._routingTableRegistry.apply(n,{applyWhenExists:function(i){return i.forgetWriter(e)}})},t.prototype._acquireConnectionToServer=function(e,n,i){return this._connectionPool.acquire(e)},t.prototype._freshRoutingTable=function(e){var n=e===void 0?{}:e,i=n.accessMode,o=n.database,u=n.bookmark,s=n.impersonatedUser,c=n.onDatabaseNameResolved,a=this._routingTableRegistry.get(o,function(){return new sg.RoutingTable({database:o})});return a.isStaleFor(i)?(this._log.info('Routing table is stale for database: "'+o+'" and access mode: "'+i+'": '+a),this._refreshRoutingTable(a,u,s,c)):a},t.prototype._refreshRoutingTable=function(e,n,i,o){var u=e.routers;return this._useSeedRouter?this._fetchRoutingTableFromSeedRouterFallbackToKnownRouters(u,e,n,i,o):this._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter(u,e,n,i,o)},t.prototype._fetchRoutingTableFromSeedRouterFallbackToKnownRouters=function(e,n,i,o,u){return ae(this,void 0,void 0,function(){var s,c;return ce(this,function(a){switch(a.label){case 0:return s=[],[4,this._fetchRoutingTableUsingSeedRouter(s,this._seedRouter,n,i,o)];case 1:return c=a.sent(),c?(this._useSeedRouter=!1,[3,4]):[3,2];case 2:return[4,this._fetchRoutingTableUsingKnownRouters(e,n,i,o)];case 3:c=a.sent(),a.label=4;case 4:return[4,this._applyRoutingTableIfPossible(n,c,u)];case 5:return[2,a.sent()]}})})},t.prototype._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter=function(e,n,i,o,u){return ae(this,void 0,void 0,function(){var s;return ce(this,function(c){switch(c.label){case 0:return[4,this._fetchRoutingTableUsingKnownRouters(e,n,i,o)];case 1:return s=c.sent(),s?[3,3]:[4,this._fetchRoutingTableUsingSeedRouter(e,this._seedRouter,n,i,o)];case 2:s=c.sent(),c.label=3;case 3:return[4,this._applyRoutingTableIfPossible(n,s,u)];case 4:return[2,c.sent()]}})})},t.prototype._fetchRoutingTableUsingKnownRouters=function(e,n,i,o){return ae(this,void 0,void 0,function(){var u,s;return ce(this,function(c){switch(c.label){case 0:return[4,this._fetchRoutingTable(e,n,i,o)];case 1:return u=c.sent(),u?[2,u]:(s=e.length-1,t._forgetRouter(n,e,s),[2,null])}})})},t.prototype._fetchRoutingTableUsingSeedRouter=function(e,n,i,o,u){return ae(this,void 0,void 0,function(){var s,c;return ce(this,function(a){switch(a.label){case 0:return[4,this._resolveSeedRouter(n)];case 1:return s=a.sent(),c=s.filter(function(l){return e.indexOf(l)<0}),[4,this._fetchRoutingTable(c,i,o,u)];case 2:return[2,a.sent()]}})})},t.prototype._resolveSeedRouter=function(e){return ae(this,void 0,void 0,function(){var n,i,o=this;return ce(this,function(u){switch(u.label){case 0:return[4,this._hostNameResolver.resolve(e)];case 1:return n=u.sent(),[4,Promise.all(n.map(function(s){return o._dnsResolver.resolve(s)}))];case 2:return i=u.sent(),[2,[].concat.apply([],i)]}})})},t.prototype._fetchRoutingTable=function(e,n,i,o){var u=this;return e.reduce(function(s,c,a){return ae(u,void 0,void 0,function(){var l,h,p,y;return ce(this,function(O){switch(O.label){case 0:return[4,s];case 1:return l=O.sent(),l?[2,l]:(h=a-1,t._forgetRouter(n,e,h),[4,this._createSessionForRediscovery(c,i,o)]);case 2:if(p=O.sent(),!p)return[3,8];O.label=3;case 3:return O.trys.push([3,5,6,7]),[4,this._rediscovery.lookupRoutingTableOnRouter(p,n.database,c,o)];case 4:return[2,O.sent()];case 5:if(y=O.sent(),y&&y.code===TH)throw y;return this._log.warn("unable to fetch routing table because of an error "+y),[2,null];case 6:return p.close(),[7];case 7:return[3,9];case 8:return[2,null];case 9:return[2]}})})},Promise.resolve(null))},t.prototype._createSessionForRediscovery=function(e,n,i){return ae(this,void 0,void 0,function(){var o,u,s,c,a,l=this;return ce(this,function(h){switch(h.label){case 0:return h.trys.push([0,2,,3]),[4,this._connectionPool.acquire(e)];case 1:return o=h.sent(),u=ir.ConnectionErrorHandler.create({errorCode:mo,handleAuthorizationExpired:function(p,y){return l._handleAuthorizationExpired(p,y)}}),s=new vH.default(new ir.DelegateConnection(o,u)),c=o.protocol().version,c<4?[2,new ge.Session({mode:cg,bookmark:OH.empty(),connectionProvider:s})]:[2,new ge.Session({mode:ag,database:PH,bookmark:n,connectionProvider:s,impersonatedUser:i})];case 2:if(a=h.sent(),a&&a.code===wH)throw a;return[2,null];case 3:return[2]}})})},t.prototype._applyRoutingTableIfPossible=function(e,n,i){return ae(this,void 0,void 0,function(){return ce(this,function(o){switch(o.label){case 0:if(!n)throw(0,ge.newError)("Could not perform discovery. No routing servers available. Known routing table: "+e,mH);return n.writers.length===0&&(this._useSeedRouter=!0),[4,this._updateRoutingTable(n,i)];case 1:return o.sent(),[2,n]}})})},t.prototype._updateRoutingTable=function(e,n){return ae(this,void 0,void 0,function(){return ce(this,function(i){switch(i.label){case 0:return[4,this._connectionPool.keepAll(e.allServers())];case 1:return i.sent(),this._routingTableRegistry.removeExpired(),this._routingTableRegistry.register(e),n(e.database),this._log.info("Updated routing table "+e),[2]}})})},t._forgetRouter=function(e,n,i){var o=n[i];e&&o&&e.forgetRouter(o)},t}(bH.default);U.default=IH;var RH=function(){function r(t){this._tables=new Map,this._routingTablePurgeDelay=t}return r.prototype.register=function(t){return this._tables.set(t.database,t),this},r.prototype.apply=function(t,e){var n=e===void 0?{}:e,i=n.applyWhenExists,o=n.applyWhenDontExists,u=o===void 0?function(){}:o;return this._tables.has(t)?i(this._tables.get(t)):typeof t=="string"||t===null?u():this._forEach(i),this},r.prototype.get=function(t,e){return this._tables.has(t)?this._tables.get(t):typeof e=="function"?e():e},r.prototype.removeExpired=function(){var t=this;return this._removeIf(function(e){return e.isExpiredFor(t._routingTablePurgeDelay)})},r.prototype._forEach=function(t){var e,n;try{for(var i=og(this._tables),o=i.next();!o.done;o=i.next()){var u=ug(o.value,2),s=u[1];t(s)}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return this},r.prototype._remove=function(t){return this._tables.delete(t),this},r.prototype._removeIf=function(t){var e,n;try{for(var i=og(this._tables),o=i.next();!o.done;o=i.next()){var u=ug(o.value,2),s=u[0],c=u[1];t(c)&&this._remove(s)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return this},r}()});var hg=f(Se=>{"use strict";var cs=Se&&Se.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Se,"__esModule",{value:!0});Se.RoutingConnectionProvider=Se.DirectConnectionProvider=Se.PooledConnectionProvider=Se.SingleConnectionProvider=void 0;var AH=zl();Object.defineProperty(Se,"SingleConnectionProvider",{enumerable:!0,get:function(){return cs(AH).default}});var jH=is();Object.defineProperty(Se,"PooledConnectionProvider",{enumerable:!0,get:function(){return cs(jH).default}});var qH=GO();Object.defineProperty(Se,"DirectConnectionProvider",{enumerable:!0,get:function(){return cs(qH).default}});var NH=lg();Object.defineProperty(Se,"RoutingConnectionProvider",{enumerable:!0,get:function(){return cs(NH).default}})});var _g=f(L=>{"use strict";var pg=L&&L.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),xH=L&&L.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),Zr=L&&L.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.prototype.hasOwnProperty.call(r,e)&&pg(t,r,e);return xH(t,r),t},DH=L&&L.__exportStar||function(r,t){for(var e in r)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&pg(t,r,e)};Object.defineProperty(L,"__esModule",{value:!0});L.pool=L.packstream=L.channel=L.buf=L.bolt=L.loadBalancing=void 0;L.loadBalancing=Zr(sl());L.bolt=Zr(Qu());L.buf=Zr(qu());L.channel=Zr(Br());L.packstream=Zr(Lu());L.pool=Zr(Hl());DH(hg(),L)});var fs=gt();Object.defineProperty(exports,"__esModule",{value:!0});exports.driver=mg;Object.defineProperty(exports,"Driver",{enumerable:!0,get:function(){return go.Driver}});Object.defineProperty(exports,"Neo4jError",{enumerable:!0,get:function(){return b.Neo4jError}});Object.defineProperty(exports,"error",{enumerable:!0,get:function(){return b.error}});Object.defineProperty(exports,"Integer",{enumerable:!0,get:function(){return b.Integer}});Object.defineProperty(exports,"int",{enumerable:!0,get:function(){return b.int}});Object.defineProperty(exports,"isInt",{enumerable:!0,get:function(){return b.isInt}});Object.defineProperty(exports,"isPoint",{enumerable:!0,get:function(){return b.isPoint}});Object.defineProperty(exports,"Point",{enumerable:!0,get:function(){return b.Point}});Object.defineProperty(exports,"Date",{enumerable:!0,get:function(){return b.Date}});Object.defineProperty(exports,"DateTime",{enumerable:!0,get:function(){return b.DateTime}});Object.defineProperty(exports,"Duration",{enumerable:!0,get:function(){return b.Duration}});Object.defineProperty(exports,"isDate",{enumerable:!0,get:function(){return b.isDate}});Object.defineProperty(exports,"isDateTime",{enumerable:!0,get:function(){return b.isDateTime}});Object.defineProperty(exports,"isDuration",{enumerable:!0,get:function(){return b.isDuration}});Object.defineProperty(exports,"isLocalDateTime",{enumerable:!0,get:function(){return b.isLocalDateTime}});Object.defineProperty(exports,"isLocalTime",{enumerable:!0,get:function(){return b.isLocalTime}});Object.defineProperty(exports,"isTime",{enumerable:!0,get:function(){return b.isTime}});Object.defineProperty(exports,"LocalDateTime",{enumerable:!0,get:function(){return b.LocalDateTime}});Object.defineProperty(exports,"LocalTime",{enumerable:!0,get:function(){return b.LocalTime}});Object.defineProperty(exports,"Time",{enumerable:!0,get:function(){return b.Time}});Object.defineProperty(exports,"Node",{enumerable:!0,get:function(){return b.Node}});Object.defineProperty(exports,"Path",{enumerable:!0,get:function(){return b.Path}});Object.defineProperty(exports,"PathSegment",{enumerable:!0,get:function(){return b.PathSegment}});Object.defineProperty(exports,"Relationship",{enumerable:!0,get:function(){return b.Relationship}});Object.defineProperty(exports,"UnboundRelationship",{enumerable:!0,get:function(){return b.UnboundRelationship}});Object.defineProperty(exports,"Record",{enumerable:!0,get:function(){return b.Record}});Object.defineProperty(exports,"ResultSummary",{enumerable:!0,get:function(){return b.ResultSummary}});Object.defineProperty(exports,"Plan",{enumerable:!0,get:function(){return b.Plan}});Object.defineProperty(exports,"ProfiledPlan",{enumerable:!0,get:function(){return b.ProfiledPlan}});Object.defineProperty(exports,"QueryStatistics",{enumerable:!0,get:function(){return b.QueryStatistics}});Object.defineProperty(exports,"Notification",{enumerable:!0,get:function(){return b.Notification}});Object.defineProperty(exports,"ServerInfo",{enumerable:!0,get:function(){return b.ServerInfo}});Object.defineProperty(exports,"Result",{enumerable:!0,get:function(){return b.Result}});Object.defineProperty(exports,"auth",{enumerable:!0,get:function(){return b.auth}});Object.defineProperty(exports,"Session",{enumerable:!0,get:function(){return b.Session}});Object.defineProperty(exports,"Transaction",{enumerable:!0,get:function(){return b.Transaction}});Object.defineProperty(exports,"RxSession",{enumerable:!0,get:function(){return vg.default}});Object.defineProperty(exports,"RxTransaction",{enumerable:!0,get:function(){return bg.default}});Object.defineProperty(exports,"RxResult",{enumerable:!0,get:function(){return yg.default}});exports.default=exports.temporal=exports.spatial=exports.session=exports.types=exports.logging=exports.integer=void 0;var go=Ey(),MH=fs(wy()),b=P(),dg=_g(),vg=fs(nl()),bg=fs(el()),yg=fs(gu()),ls=b.internal.util,kH=ls.ENCRYPTION_ON,MZ=ls.ENCRYPTION_OFF,UH=ls.assertString,LH=ls.isEmptyObjectOrNull,FH=b.internal.serverAddress.ServerAddress,BH=b.internal.urlUtil;function mg(r,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};UH(r,"Bolt URL");var n=BH.parseDatabaseUrl(r),i=!1,o=!1,u;switch(n.scheme){case"bolt":break;case"bolt+s":o=!0,u="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES";break;case"bolt+ssc":o=!0,u="TRUST_ALL_CERTIFICATES";break;case"neo4j":i=!0;break;case"neo4j+s":o=!0,u="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES",i=!0;break;case"neo4j+ssc":o=!0,u="TRUST_ALL_CERTIFICATES",i=!0;break;default:throw new Error("Unknown scheme: ".concat(n.scheme))}if(o){if("encrypted"in e||"trust"in e)throw new Error("Encryption/trust can only be configured either through URL or config, not both");e.encrypted=kH,e.trust=u}t=t||{},t.scheme=t.scheme||"none",e.userAgent=e.userAgent||VH;var s=FH.fromUrl(n.hostAndPort),c={address:s,typename:i?"Routing":"Direct",routing:i};return new go.Driver(c,e,a());function a(){if(i)return function(l,h,p,y){return new dg.RoutingConnectionProvider({id:l,config:h,log:p,hostNameResolver:y,authToken:t,address:s,userAgent:h.userAgent,routingContext:n.query})};if(!LH(n.query))throw new Error("Parameters are not supported with none routed scheme. Given URL: '".concat(r,"'"));return function(l,h,p){return new dg.DirectConnectionProvider({id:l,config:h,log:p,authToken:t,address:s,userAgent:h.userAgent})}}}var VH="neo4j-javascript/"+MH.default,Og={console:function(r){function t(e){return r.apply(this,arguments)}return t.toString=function(){return r.toString()},t}(function(r){return{level:r,logger:function(e,n){return console.log("".concat(global.Date.now()," ").concat(e.toUpperCase()," ").concat(n))}}})};exports.logging=Og;var gg={Node:b.Node,Relationship:b.Relationship,UnboundRelationship:b.UnboundRelationship,PathSegment:b.PathSegment,Path:b.Path,Result:b.Result,ResultSummary:b.ResultSummary,Record:b.Record,Point:b.Point,Date:b.Date,DateTime:b.DateTime,Duration:b.Duration,LocalDateTime:b.LocalDateTime,LocalTime:b.LocalTime,Time:b.Time,Integer:b.Integer};exports.types=gg;var Sg={READ:go.READ,WRITE:go.WRITE};exports.session=Sg;var Eg={toNumber:b.toNumber,toString:b.toString,inSafeRange:b.inSafeRange};exports.integer=Eg;var wg={isPoint:b.isPoint};exports.spatial=wg;var Tg={isDuration:b.isDuration,isLocalTime:b.isLocalTime,isTime:b.isTime,isDate:b.isDate,isLocalDateTime:b.isLocalDateTime,isDateTime:b.isDateTime};exports.temporal=Tg;var WH={driver:mg,int:b.int,isInt:b.isInt,isPoint:b.isPoint,isDuration:b.isDuration,isLocalTime:b.isLocalTime,isTime:b.isTime,isDate:b.isDate,isLocalDateTime:b.isLocalDateTime,isDateTime:b.isDateTime,integer:Eg,Neo4jError:b.Neo4jError,auth:b.auth,logging:Og,types:gg,session:Sg,error:b.error,spatial:wg,temporal:Tg,Driver:go.Driver,Session:b.Session,Transaction:b.Transaction,Result:b.Result,RxSession:vg.default,RxTransaction:bg.default,RxResult:yg.default,ResultSummary:b.ResultSummary,Plan:b.Plan,ProfiledPlan:b.ProfiledPlan,QueryStatistics:b.QueryStatistics,Notification:b.Notification,ServerInfo:b.ServerInfo,Record:b.Record,Node:b.Node,Relationship:b.Relationship,UnboundRelationship:b.UnboundRelationship,Path:b.Path,PathSegment:b.PathSegment,Point:b.Point,Integer:b.Integer,Duration:b.Duration,LocalTime:b.LocalTime,Time:b.Time,Date:b.Date,LocalDateTime:b.LocalDateTime,DateTime:b.DateTime},HH=WH;exports.default=HH;
