import{_ as m,a as i}from"./table-1e4642d3.js";import{_ as l}from"./switch-6bf42133.js";import{n as f}from"./notify-d9afd13e.js";import{d as v,i as c,m as p,n as d}from"./app-aaf1260a.js";import{_,a as s}from"./form-ef8cbf8e.js";import{_ as y}from"./dialog-dd4b0ce4.js";import"./checkbox-4f03e503.js";import"./scrollbar-b60f2172.js";import"./index-72d37e73.js";import"./checkbox-group-7fc9dfe8.js";import"./index-3e66c890.js";var r=(n=>(n[n.Stop=0]="Stop",n[n.Running=1]="Running",n[n.AlreadyUsed=2]="AlreadyUsed",n))(r||{});const u=v("forward",{state:()=>({panel:{visible:!1,loading:!1,edit:{name:null,autoStartUp:null,type:null,localHost:null,localPort:null,remoteHost:null,remotePort:null}}})});const b={mixins:[c],data(){return{config:{}}},computed:{...p(u,{panel:n=>n.panel}),localPortPlaceHolder(){return this.panel.edit.type=="Dynamic"?"1080":"port"},forwardNotice(){switch(this.panel.edit.type){case"Local":return this.$t("ssh.portForward.local");case"Remote":return this.$t("ssh.portForward.remote")}return this.$t("ssh.portForward.dynamic")}},watch:{"panel.edit.type"(n){this.panel.edit.id||(this.panel.edit.remoteHost=n=="Remote"?this.config.host:"127.0.0.1")}},mounted(){this.on("config",n=>{this.config=n})},methods:{confirmSave(){this.emit("save",this.panel.edit),this.panel.loading=!0}}};var h=function(){var t=this,e=t._self._c;return e(y,{ref:"editDialog",attrs:{title:"Port Fowarding",visible:t.panel.visible,width:"550px",top:"3vh",closeOnClickModal:!1},on:{"update:visible":function(a){return t.$set(t.panel,"visible",a)}},scopedSlots:t._u([{key:"footer",fn:function(){return[e("vsc-button",{attrs:{type:"secondary",size:"mini"},on:{click:function(a){t.panel.visible=!1}}},[t._v(t._s(t.$t("common.cancel")))]),e("vsc-button",{attrs:{loading:t.panel.loading,size:"mini"},on:{click:t.confirmSave}},[t._v("Save")])]},proxy:!0}])},[e(_,{ref:"infoForm",attrs:{model:t.panel.edit,"label-width":"120px"}},[e("div",{staticClass:"mb-2 ml-20"},[t._v(" "+t._s(t.forwardNotice)+" ")]),e(s,{attrs:{size:"mini"},scopedSlots:t._u([{key:"label",fn:function(){return[e("RedMark"),t._v("Type ")]},proxy:!0}])},[e("vsc-radio-group",{staticClass:"!inline-flex",attrs:{size:"mini"},model:{value:t.panel.edit.type,callback:function(a){t.$set(t.panel.edit,"type",a)},expression:"panel.edit.type"}},[e("vsc-radio-button",{attrs:{label:"Local"},model:{value:t.panel.edit.type,callback:function(a){t.$set(t.panel.edit,"type",a)},expression:"panel.edit.type"}}),e("vsc-radio-button",{attrs:{label:"Remote"},model:{value:t.panel.edit.type,callback:function(a){t.$set(t.panel.edit,"type",a)},expression:"panel.edit.type"}}),e("vsc-radio-button",{attrs:{label:"Dynamic"},model:{value:t.panel.edit.type,callback:function(a){t.$set(t.panel.edit,"type",a)},expression:"panel.edit.type"}},[t._v(" Dynamic(Socks Proxy) ")])],1)],1),e(s,{attrs:{size:"mini"},scopedSlots:t._u([{key:"label",fn:function(){return[e("RedMark"),t._v("Local ")]},proxy:!0}])},[e("div",{staticClass:"flex flex-row items-center w-72"},[e("vsc-input",{staticClass:"basis-72",model:{value:t.panel.edit.localHost,callback:function(a){t.$set(t.panel.edit,"localHost",a)},expression:"panel.edit.localHost"}}),e("span",{staticClass:"basis-14 text-center text-base"},[t._v(":")]),e("vsc-input",{staticClass:"basis-32",attrs:{placeholder:t.localPortPlaceHolder},model:{value:t.panel.edit.localPort,callback:function(a){t.$set(t.panel.edit,"localPort",a)},expression:"panel.edit.localPort"}})],1)]),t.panel.edit.type!="Dynamic"?[e("div",{staticClass:"forward-arrow"},[t.panel.edit.type=="Remote"?e("i",{staticClass:"el-icon-bottom"}):e("i",{staticClass:"el-icon-top"})]),e(s,{attrs:{size:"mini"},scopedSlots:t._u([{key:"label",fn:function(){return[e("RedMark"),t._v("Remote ")]},proxy:!0}],null,!1,664957416)},[e("div",{staticClass:"flex flex-row items-center w-72"},[e("vsc-input",{staticClass:"basis-72",model:{value:t.panel.edit.remoteHost,callback:function(a){t.$set(t.panel.edit,"remoteHost",a)},expression:"panel.edit.remoteHost"}}),e("span",{staticClass:"basis-14 text-center text-base"},[t._v(":")]),e("vsc-input",{staticClass:"basis-32",attrs:{placeholder:"port"},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.confirmSave.apply(null,arguments)}},model:{value:t.panel.edit.remotePort,callback:function(a){t.$set(t.panel.edit,"remotePort",a)},expression:"panel.edit.remotePort"}})],1)])]:t._e(),e("div",{staticClass:"flex flex-row"},[e(s,{staticClass:"w-64",attrs:{size:"mini",label:"Name"}},[e("vsc-input",{model:{value:t.panel.edit.name,callback:function(a){t.$set(t.panel.edit,"name",a)},expression:"panel.edit.name"}})],1),e(s,{staticClass:"auto-start-form-item",attrs:{size:"mini",label:"Auto Start",title:"Auto start with VS Code startup"}},[e(l,{staticClass:"ml-2",model:{value:t.panel.edit.autoStartUp,callback:function(a){t.$set(t.panel.edit,"autoStartUp",a)},expression:"panel.edit.autoStartUp"}})],1)],1)],2)],1)},w=[],x=d(b,h,w,!1,null,"8bfeedcd",null,null);const g=x.exports,k={components:{ForwardDialog:g},mixins:[c],data(){return{name:"",forwardList:[]}},computed:{...p(u,{panel:n=>n.panel})},mounted(){this.on("forwardList",n=>{this.forwardList=n,this.panel.loading=!1,this.panel.visible=!1}).on("name",n=>{this.name=n}).on("success",()=>{this.error=!1,this.emit("load")}).on("error",({id:n,message:t})=>{for(const e of this.forwardList)e.id==n&&(e.loading=!1);this.panel.loading=!1,f({message:t,type:"error",position:"top-left"})}).init()},methods:{updateForward(n){this.emit("save",n)},createRequest(){this.panel.edit={type:"Local",autoStartUp:!1,localHost:"127.0.0.1",remoteHost:"127.0.0.1"},this.panel.visible=!0},load(){this.emit("load")},getState(n){switch(n){case r.Running:return"Running";case r.AlreadyUsed:return"AlreadyUsed";default:return"Stop"}},start(n){n.loading=!0,this.emit("start",n.id)},stop(n){this.emit("stop",n)},remove(n){this.emit("remove",n)},openEdit(n){this.panel.edit={...n},this.panel.visible=!0},deleteConfirm(n){this.$confirm("Are you sure to delete this forward?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(()=>{this.remove(n)})}}};var S=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"ml-2 my-1 text-base"},[t._v(" Connection: "+t._s(t.name)),e("br"),e("vsc-button",{staticStyle:{color:"var(--vscode-terminal-ansiCyan)"},attrs:{type:"icon",icon:"codicon-add text-base"},on:{click:t.createRequest}}),e("vsc-button",{staticStyle:{color:"var(--vscode-terminal-ansiBrightGreen)"},attrs:{type:"icon",icon:"codicon-refresh text-base"},on:{click:t.load}})],1),e(m,{staticStyle:{width:"100%"},attrs:{data:t.forwardList}},[e(i,{attrs:{prop:"name",label:"Name"}}),e(i,{attrs:{prop:"type",label:"Type"}}),e(i,{attrs:{prop:"localPort",label:"Local Port"}}),e(i,{attrs:{prop:"remoteHost",label:"Remote Host",width:"120"}}),e(i,{attrs:{prop:"remotePort",label:"Remote Port",width:"120"}}),e(i,{attrs:{prop:"keepAlive",label:"KeepAlive"},scopedSlots:t._u([{key:"default",fn:function(a){return[e(l,{on:{change:function(o){return t.updateForward(a.row)}},model:{value:a.row.keepAlive,callback:function(o){t.$set(a.row,"keepAlive",o)},expression:"scope.row.keepAlive"}})]}}])}),e(i,{attrs:{prop:"autoStartUp",label:"AutoStart"},scopedSlots:t._u([{key:"default",fn:function(a){return[e(l,{on:{change:function(o){return t.updateForward(a.row)}},model:{value:a.row.autoStartUp,callback:function(o){t.$set(a.row,"autoStartUp",o)},expression:"scope.row.autoStartUp"}})]}}])}),e(i,{attrs:{prop:"state",label:"State"},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.state==0?e("vsc-button",{attrs:{type:"icon",icon:"el-icon-close text-base text-red"}}):a.row.state==1?e("vsc-button",{attrs:{type:"icon",icon:"el-icon-check text-base text-green"}}):e("vsc-button",{attrs:{type:"icon",icon:"el-icon-video-pause text-base text-yellow"}}),t._v(" "+t._s(t.getState(a.row.state))+" ")]}}])}),e(i,{attrs:{fixed:"right",width:"200"},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.state!=1?e("vsc-button",{staticStyle:{color:"var(--vscode-terminal-ansiBrightGreen)"},attrs:{type:"success",size:"small",title:"Start",loading:a.row.loading,icon:"el-icon-video-play",circle:""},on:{click:function(o){return t.start(a.row)}}}):t._e(),a.row.state==1?e("vsc-button",{attrs:{type:"danger",size:"small",title:"Stop",icon:"el-icon-switch-button",circle:""},on:{click:function(o){return t.stop(a.row.id)}}}):t._e(),e("vsc-button",{staticStyle:{color:"var(--vscode-terminal-ansiCyan)"},attrs:{type:"primary",size:"small",title:"Edit",icon:"el-icon-edit",circle:""},on:{click:function(o){return t.openEdit(a.row)}}}),e("vsc-button",{staticStyle:{color:"#f56c6c"},attrs:{title:"delete",type:"danger",size:"small",icon:"el-icon-delete",circle:""},on:{click:function(o){return t.deleteConfirm(a.row.id)}}})]}}])})],1),e("ForwardDialog",{ref:"fowardDialog"})],1)},$=[],C=d(k,S,$,!1,null,null,null,null);const M=C.exports;export{M as default};
